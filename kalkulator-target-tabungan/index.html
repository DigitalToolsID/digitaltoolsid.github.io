<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="icon" href="data:,">
    
    <link rel="canonical" href="https://digitaltoolsid.github.io/kalkulator-target-tabungan/" />
    
    <meta name="description" content="Savings Goal Calculator. Calculate the monthly deposit needed to reach specific financial targets like a house down payment, wedding, or vacation within a set timeframe." />
    <meta name="keywords" content="Savings Goal Calculator, Sinking Fund Calculator, Financial Planner, Investment Goal, Future Value Calculator, Kalkulator Target Tabungan, Simulasi Tabungan Nikah, Hitung Dana Rumah, Target Investasi, Tabungan Umroh, Cara hitung setoran bulanan, strategi menabung efektif, berapa harus menabung per bulan">
 
    <title id="appTitle">Savings Goal Calculator</title>
    
    <link rel="alternate" hreflang="id" href="https://digitaltoolsid.github.io/kalkulator-target-tabungan/index.html" />
    <link rel="alternate" hreflang="en" href="https://digitaltoolsid.github.io/kalkulator-target-tabungan/index.html" />
    
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../output.css">
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7M8E7QRYNY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-7M8E7QRYNY');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4885884866232864" crossorigin="anonymous"></script>
    
    <style>
        /* STANDAR TAMPILAN: Hard Lock 50% Desktop */
        @media (min-width: 1024px) {
            .layout-article-fixed {
                width: 50% !important;
                max-width: 50% !important;
                min-width: 50% !important;
                margin-left: auto;
                margin-right: auto;
            }
        }

        /* Transisi Hasil */
        .result-box {
            transition: all 0.5s ease-in-out;
            transform-origin: top center;
            opacity: 0;
            max-height: 0;
            overflow: hidden;
        }
        .result-box.visible {
            opacity: 1;
            max-height: 3000px; 
            padding: 1.5rem; 
        }
        
        /* Tombol Utama (Warna Ungu/Goal) */
        .calculate-button {
            box-shadow: 0 4px #7e22ce; /* purple-700 */
            background-color: #9333ea; /* purple-600 */
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .calculate-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px #7e22ce;
            background-color: #a855f7; /* purple-500 */
        }
        .calculate-button:active {
            transform: translateY(2px);
            box-shadow: 0 2px #7e22ce;
        }

        /* Gaya Bar Progress */
        .progress-bar {
            height: 24px;
            border-radius: 9999px;
            background-color: #f3f4f6; /* gray-100 */
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.05);
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #9333ea 0%, #7e22ce 100%); /* Purple gradient */
            transition: width 1s ease-in-out;
            position: absolute;
            top: 0;
            left: 0;
            border-radius: 9999px;
        }
        .progress-text {
            position: absolute;
            width: 100%;
            text-align: center;
            line-height: 24px;
            font-size: 0.75rem;
            font-weight: 700;
            color: #4b5563; /* gray-600 default */
            z-index: 10;
            text-shadow: 0 0 2px rgba(255, 255, 255, 0.8);
        }
        
        /* Gaya Kartu Hasil Utama */
        .result-card-main {
            background-color: #faf5ff; /* purple-50 */
            border: 2px solid #d8b4fe; /* purple-300 */
        }
        
        /* Section Header */
        .section-title {
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
            color: #1f2937;
        }
    </style>
</head>

<body class="bg-gray-50 flex flex-col min-h-screen font-sans">

    <script>window.headerCategory = 'finance';</script>
    <div id="global-header-container"></div>

    <main class="flex-grow p-4 sm:p-8 flex justify-center">
        <div class="layout-article-fixed w-full max-w-2xl bg-white shadow-xl rounded-xl p-6 sm:p-8">
            
            <h1 id="headerTitle" class="text-3xl font-extrabold text-gray-900 mb-3">Savings Goal Calculator</h1>
            
            <p id="toolSubtitle" class="text-sm text-gray-700 font-medium mb-6 leading-relaxed text-justify">
               Accurately calculate how much fund you need to set aside monthly to achieve large financial goals, such as a down payment for a house, wedding costs, or a dream vacation.
            </p>
            
            <form id="savingsGoalForm" onsubmit="calculateSavings(event)" class="space-y-6">
                
                <div class="bg-purple-50 p-4 rounded-lg border border-purple-100">
                    <h2 class="section-title text-purple-800" id="sectionGoalHeader">1. Your Financial Goal</h2>
                    
                    <div class="space-y-4">
                        <div class="relative">
                            <label for="goalAmount" class="block text-sm font-medium text-gray-700 mb-1">
                                <span id="labelGoalAmount">Required Target Fund</span> <span class="currency-label font-normal text-gray-500">(Rp/$)</span>
                            </label>
                            <input type="text" id="goalAmount" inputmode="numeric" oninput="formatInput(this)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500 text-sm" value="300.000.000" required>
                            <p class="text-xs text-gray-500 mt-1" id="descGoalAmount">Total amount needed (e.g. Down Payment).</p>
                        </div>
                        
                        <div class="relative">
                            <label for="currentSavings" class="block text-sm font-medium text-gray-700 mb-1">
                                <span id="labelCurrentSavings">Current Savings Balance</span> <span class="currency-label font-normal text-gray-500">(Rp/$)</span>
                            </label>
                            <input type="text" id="currentSavings" inputmode="numeric" oninput="formatInput(this)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500 text-sm" value="50.000.000" required>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-4 rounded-lg border border-gray-200">
                    <h2 class="section-title text-gray-700" id="sectionTimeInterestHeader">2. Timeline & Interest</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="relative">
                            <label for="yearsToGoal" class="block text-sm font-medium text-gray-700 mb-1" id="labelYearsToGoal">Timeline (Years)</label>
                            <input type="number" id="yearsToGoal" inputmode="numeric" min="0.5" step="0.5" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500 text-sm" value="5" required>
                        </div>
                        
                        <div class="relative">
                            <label for="annualInterestRate" class="block text-sm font-medium text-gray-700 mb-1" id="labelAnnualInterestRate">Est. Annual Return (%)</label>
                            <input type="number" id="annualInterestRate" step="0.1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500 text-sm" value="6" required>
                            <p class="text-xs text-gray-500 mt-1" id="descAnnualInterestRate">Average annual return/interest.</p>
                        </div>
                    </div>
                </div>

                <button type="submit" id="calculateButton" class="calculate-button w-full text-white font-semibold py-3 rounded-xl text-lg">
                    Calculate Monthly Deposit
                </button>
                
                <div id="errorAlert" class="hidden mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
                    <span id="errorText" class="block sm:inline text-sm"></span>
                </div>
            </form>

            <div id="resultBox" class="result-box mt-8 p-6 rounded-xl shadow-lg result-card-main">
                
                <h3 id="resultTitle" class="text-2xl font-bold text-purple-900 mb-4 border-b border-purple-200 pb-2">Savings Plan</h3>

                <div class="mb-6">
                    <p class="text-xs font-bold text-gray-500 uppercase mb-2 tracking-wide" id="visualHeader">Fund Projection Progress</p>
                    <div class="progress-bar">
                        <div id="progressFill" class="progress-fill" style="width: 0%;"></div>
                        <div id="progressText" class="progress-text">0%</div>
                    </div>
                </div>

                <div id="resultSummaryText" class="p-4 rounded-lg mb-4 bg-white border border-purple-100 shadow-sm">
                    <p class="text-lg font-bold mb-2 text-purple-700" id="summaryTitle"></p>
                    <p id="summaryText" class="text-gray-700 text-sm leading-relaxed text-justify"></p>
                </div>

                <h3 id="metricsHeader" class="text-xl font-bold text-gray-800 mb-3 border-b pb-2">Contribution Details</h3>
                <div id="metricsContent" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    
                    <div class="col-span-1 sm:col-span-2 p-4 rounded-lg border-2 border-dashed border-purple-400 bg-white text-center">
                        <p class="text-sm font-bold text-gray-600" id="resultMonthlyDeposit">Required Monthly Deposit</p>
                        <p class="text-3xl font-extrabold mt-1 text-purple-700" id="monthlyDepositResult">--</p>
                    </div>

                    <div class="p-3 rounded-lg border border-gray-200 bg-white">
                        <p class="text-xs text-gray-500 uppercase" id="resultTotalInterest">Total Interest Earned</p>
                        <p class="text-xl font-bold mt-1 text-green-600" id="totalInterestResult">--</p>
                    </div>

                    <div class="p-3 rounded-lg border border-gray-200 bg-white">
                        <p class="text-xs text-gray-500 uppercase" id="resultTotalDeposit">Total Principal Deposited</p>
                        <p class="text-xl font-bold mt-1 text-gray-700" id="totalDepositResult">--</p>
                    </div>
                </div>

            </div>
            
            <section class="mt-8 pt-4 border-t border-gray-200 font-sans">
                <h2 id="sectionHeader1" class="text-xl font-bold text-gray-800 mb-3">Goal-Based Savings</h2>
                <p id="content1" class="text-gray-600 text-sm leading-relaxed text-justify mb-4"></p>

                <h3 id="sectionHeader2" class="text-lg font-bold text-gray-800 mb-2">Choosing the Right Instrument</h3>
                <p id="content2" class="text-gray-600 text-sm leading-relaxed text-justify mb-4"></p>
            </section>

        </div>
    </main>
    
    <section id="related-tools-section" class="layout-article-fixed w-full max-w-2xl mx-auto px-4 py-8 mb-4">
        <div class="flex items-center mb-5">
            <div class="w-1 h-7 mr-3 bg-green-600"></div> 
            <h2 class="text-xl font-bold text-gray-800" data-en="Finance Tools" data-id="Alat Keuangan">Finance Tools</h2>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-10">
            <a href="../kalkulator-bunga-majemuk/index.html" class="tool-card group block p-4 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 hover:border-green-400">
                <h3 class="text-base font-bold mb-1 text-green-600 group-hover:text-green-700" data-en="Compound Interest" data-id="Bunga Majemuk">Compound Interest</h3>
                <p class="text-xs text-gray-600" data-en="See how your savings grow." data-id="Lihat tabungan Anda tumbuh.">See how your savings grow.</p>
            </a>
            <a href="../kalkulator-inflasi/index.html" class="tool-card group block p-4 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 hover:border-green-400">
                <h3 class="text-base font-bold mb-1 text-green-600 group-hover:text-green-700" data-en="Inflation Calculator" data-id="Kalkulator Inflasi">Inflation Calculator</h3>
                <p class="text-xs text-gray-600" data-en="Plan for future prices." data-id="Rencanakan harga masa depan.">Plan for future prices.</p>
            </a>
            <a href="../kalkulator-anggaran-bulanan/index.html" class="tool-card group block p-4 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 hover:border-green-400">
                <h3 class="text-base font-bold mb-1 text-green-600 group-hover:text-green-700" data-en="Monthly Budget" data-id="Anggaran Bulanan">Monthly Budget</h3>
                <p class="text-xs text-gray-600" data-en="Manage expenses smartly." data-id="Kelola pengeluaran dengan cerdas.">Manage expenses smartly.</p>
            </a>
        </div>

        <div class="border-t border-gray-200 pt-8">
            <h3 class="text-xl font-bold text-gray-800 mb-4" data-en="Related Articles" data-id="Artikel Terkait">Related Articles</h3>
            <ul class="space-y-3">
                <li>
                    <a href="../articles/strategi-mempercepat-pelunasan-utang.html" class="flex items-center text-sm text-blue-600 hover:underline group">
                        <span class="w-1.5 h-1.5 bg-gray-300 rounded-full mr-3 group-hover:bg-blue-500"></span>
                        <span data-en="Strategies to Accelerate Debt Repayment" data-id="Strategi Mempercepat Pelunasan Utang">Strategies to Accelerate Debt Repayment</span>
                    </a>
                </li>
            </ul>
        </div>
    </section>

    <div id="global-footer-container"></div>
    <script src="../components.js"></script>
    
    <script>
        // **********************************************
        // LOGIKA KALKULATOR TARGET TABUNGAN
        // **********************************************

        let currentLang = 'en';

        const translations = {
            id: {
                appTitle: "Kalkulator Target Tabungan",
                headerTitle: "Kalkulator Target Tabungan",
                toolSubtitle: "Hitung secara akurat berapa dana yang perlu Anda sisihkan setiap bulan untuk mencapai tujuan finansial besar, seperti uang muka rumah, biaya pernikahan, atau liburan impian.",
                backToCatalogText: "Kembali ke Katalog Alat",
                
                sectionGoalHeader: "1. Tujuan Finansial Anda",
                labelGoalAmount: "Target Dana yang Dibutuhkan",
                descGoalAmount: "Total dana yang Anda butuhkan untuk mencapai tujuan.",
                labelCurrentSavings: "Dana yang Sudah Dimiliki Saat Ini",
                
                sectionTimeInterestHeader: "2. Jangka Waktu & Asumsi Bunga",
                labelYearsToGoal: "Jangka Waktu (Tahun)",
                labelAnnualInterestRate: "Estimasi Imbal Hasil/Bunga Tahunan (%)",
                descAnnualInterestRate: "Asumsi bunga rata-rata dari tempat Anda menabung.",
                calculateButton: "Hitung Setoran Bulanan",
                
                resultTitle: "Rencana Setoran Tabungan",
                visualHeader: "Progress Proyeksi Target Dana",
                metricsHeader: "Detail Kontribusi",
                resultMonthlyDeposit: "Setoran Bulanan yang Diperlukan",
                resultTotalInterest: "Total Bunga/Imbal Hasil",
                resultTotalDeposit: "Total Uang yang Anda Setor",
                
                summaryTitle_OnTrack: "Status: Target Tercapai",
                summaryTitle_TooHigh: "Peringatan: Setoran Bulanan Terlalu Tinggi",
                summaryTitle_Impossible: "Peringatan: Target Tidak Tercapai",

                summaryText_OnTrack: (monthlyDeposit, totalInterest, totalDeposit, goalAmount) => `Untuk mencapai target ${goalAmount} dalam jangka waktu yang ditetapkan, Anda perlu menyetor <strong>${monthlyDeposit} per bulan</strong>. Total bunga/imbal hasil yang Anda dapatkan adalah ${totalInterest}, dengan total uang yang Anda setorkan sebesar ${totalDeposit}.`,
                summaryText_TooHigh: (monthlyDeposit) => `Perhatian: Jumlah setoran bulanan yang diperlukan sangat tinggi (${monthlyDeposit}). Pertimbangkan untuk memperpanjang jangka waktu atau mengurangi target dana Anda agar lebih realistis.`,
                summaryText_Impossible: (goalAmount, totalAchieved) => `Maaf, dengan asumsi bunga dan jangka waktu saat ini, target ${goalAmount} <strong>tidak dapat tercapai</strong>. Maksimal dana yang dapat terkumpul adalah ${totalAchieved}. Silakan perpanjang jangka waktu atau tingkatkan setoran bulanan Anda.`,

                errorInput: "Harap masukkan semua nilai yang valid.",
                
                sectionHeader1: "Keuntungan Menabung dengan Target",
                content1: "Menetapkan tujuan tabungan yang jelas mengubah proses menabung dari kewajiban menjadi misi yang terukur. Dengan mengetahui jumlah pasti yang harus disetor bulanan, Anda dapat mengintegrasikannya ke dalam anggaran (seperti 50/30/20) dan mengukur progres secara realistis, yang meningkatkan motivasi Anda untuk mencapainya tepat waktu.",
                sectionHeader2: "Pilih Instrumen yang Tepat",
                content2: "Untuk tujuan jangka pendek (di bawah 3 tahun), instrumen dengan risiko rendah seperti deposito, tabungan berjangka, atau reksa dana pasar uang seringkali ideal. Untuk tujuan jangka menengah (3-5 tahun), pertimbangkan reksa dana pendapatan tetap atau campuran untuk potensi imbal hasil yang lebih tinggi. Pastikan imbal hasil yang Anda masukkan di kalkulator sesuai dengan instrumen yang Anda pilih.",
            },
            en: {
                appTitle: "Savings Goal Calculator",
                headerTitle: "Savings Goal Calculator",
                toolSubtitle: "Accurately calculate how much fund you need to set aside monthly to achieve large financial goals, such as a down payment for a house, wedding costs, or a dream vacation.",
                backToCatalogText: "Back to Tools Catalog",
                
                sectionGoalHeader: "1. Your Financial Goal",
                labelGoalAmount: "Required Target Fund",
                descGoalAmount: "The total fund you need to achieve the goal.",
                labelCurrentSavings: "Current Savings Balance",
                
                sectionTimeInterestHeader: "2. Timeline & Interest Assumption",
                labelYearsToGoal: "Timeline (Years)",
                labelAnnualInterestRate: "Estimated Annual Return/Interest (%)",
                descAnnualInterestRate: "Assumed average interest or return.",
                calculateButton: "Calculate Monthly Deposit",
                
                resultTitle: "Savings Deposit Plan",
                visualHeader: "Target Fund Projection Progress",
                metricsHeader: "Contribution Details",
                resultMonthlyDeposit: "Required Monthly Deposit",
                resultTotalInterest: "Total Interest/Return",
                resultTotalDeposit: "Total Money You Deposit",
                
                summaryTitle_OnTrack: "Status: Target Achieved",
                summaryTitle_TooHigh: "Warning: Monthly Deposit Too High",
                summaryTitle_Impossible: "Warning: Target Unachievable",

                summaryText_OnTrack: (monthlyDeposit, totalInterest, totalDeposit, goalAmount) => `To reach the ${goalAmount} target within the set timeframe, you need to deposit <strong>${monthlyDeposit} monthly</strong>. The total interest/return you gain is ${totalInterest}, with your total deposited money being ${totalDeposit}.`,
                summaryText_TooHigh: (monthlyDeposit) => `Attention: The required monthly deposit is extremely high (${monthlyDeposit}). Consider extending the timeline or reducing your target fund to make it more realistic.`,
                summaryText_Impossible: (goalAmount, totalAchieved) => `Sorry, with the current interest and timeline assumptions, the ${goalAmount} target is <strong>unachievable</strong>. The maximum fund that can be accumulated is ${totalAchieved}. Please extend the timeline or increase your monthly deposit.`,

                errorInput: "Please enter all valid values.",
                
                sectionHeader1: "The Advantage of Goal-Based Savings",
                content1: "Setting clear savings goals transforms saving from an obligation into a measurable mission. By knowing the exact amount to deposit monthly, you can integrate it into your budget (like 50/30/20) and measure progress realistically, which boosts your motivation to achieve it on time.",
                sectionHeader2: "Choose the Right Instrument",
                content2: "For short-term goals (under 3 years), low-risk instruments like deposits, fixed-term savings, or money market funds are often ideal. For mid-term goals (3-5 years), consider fixed-income or mixed mutual funds for higher potential returns. Ensure the return rate you enter in the calculator matches the instrument you choose.",
            }
        };

        const resultBox = document.getElementById('resultBox');
        const errorAlert = document.getElementById('errorAlert');
        const errorText = document.getElementById('errorText');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');

        function cleanInput(formattedValue) {
            if (typeof formattedValue !== 'string') return formattedValue;
            let cleaned = formattedValue.replace(/\D/g, '');
            return parseFloat(cleaned) || 0;
        }

        function formatNumber(num) {
            return num.toLocaleString(currentLang === 'id' ? 'id-ID' : 'en-US', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).replace('IDR', 'Rp');
        }

        function formatInput(inputElement) {
            let value = inputElement.value;
            let numericValue = value.replace(/[^0-9]/g, '');
            if (numericValue.length === 0) {
                inputElement.value = '';
                return;
            }
            let number = parseInt(numericValue, 10);
            inputElement.value = number.toLocaleString(currentLang === 'id' ? 'id-ID' : 'en-US', {
                maximumFractionDigits: 0,
                minimumFractionDigits: 0
            });
        }

        function calculateSavings(event) {
            if(event) event.preventDefault();
            const t = translations[currentLang];

            const goalAmount = cleanInput(document.getElementById('goalAmount').value);
            const currentSavings = cleanInput(document.getElementById('currentSavings').value);
            const yearsToGoal = parseFloat(document.getElementById('yearsToGoal').value);
            const annualInterestRate = parseFloat(document.getElementById('annualInterestRate').value) / 100;

            if (goalAmount <= 0 || yearsToGoal <= 0 || annualInterestRate < 0 || goalAmount <= currentSavings || isNaN(goalAmount) || isNaN(currentSavings) || isNaN(yearsToGoal) || isNaN(annualInterestRate)) {
                errorText.textContent = t.errorInput;
                errorAlert.classList.remove('hidden');
                resultBox.classList.remove('visible');
                return;
            }

            errorAlert.classList.add('hidden');
            
            const nMonths = yearsToGoal * 12;
            const rateMonthly = annualInterestRate / 12;
            
            const fvCurrentSavings = currentSavings * Math.pow(1 + rateMonthly, nMonths);
            const fvNeededFromDeposits = goalAmount - fvCurrentSavings;
            
            let monthlyDeposit = 0;
            let totalDeposit = 0;
            let totalInterest = 0;
            let goalAchievable = true;

            if (fvNeededFromDeposits <= 0) {
                monthlyDeposit = 0;
                totalDeposit = currentSavings;
                totalInterest = goalAmount - currentSavings;
            } else {
                const factor = rateMonthly / (Math.pow(1 + rateMonthly, nMonths) - 1);
                if (isNaN(factor) || !isFinite(factor)) {
                    monthlyDeposit = fvNeededFromDeposits / nMonths;
                } else {
                    monthlyDeposit = fvNeededFromDeposits * factor;
                }

                if (annualInterestRate === 0) {
                    monthlyDeposit = fvNeededFromDeposits / nMonths;
                }

                const totalMonthlyDeposit = monthlyDeposit * nMonths;
                totalDeposit = currentSavings + totalMonthlyDeposit;
                totalInterest = goalAmount - totalDeposit;

                if (monthlyDeposit * 12 > goalAmount * 0.75) {
                    goalAchievable = false;
                }
            }

            let summaryTitleKey;
            let summaryText;
            let progressValue;
            
            const monthlyDepositFormatted = formatNumber(monthlyDeposit);
            const totalInterestFormatted = formatNumber(totalInterest);
            const totalDepositFormatted = formatNumber(totalDeposit);
            const goalAmountFormatted = formatNumber(goalAmount);

            if (!goalAchievable) {
                summaryTitleKey = 'summaryTitle_Impossible';
                const maxDepositRate = (goalAmount - currentSavings) / nMonths;
                const fvMaxAchieved = fvCurrentSavings + (maxDepositRate * (Math.pow(1 + rateMonthly, nMonths) - 1) / rateMonthly);
                const fvMaxAchievedFormatted = formatNumber(fvMaxAchieved);
                summaryText = t.summaryText_Impossible(goalAmountFormatted, fvMaxAchievedFormatted);
                progressValue = (fvMaxAchieved / goalAmount) * 100;
            } else if (monthlyDeposit === 0 && fvNeededFromDeposits <= 0) {
                summaryTitleKey = 'summaryTitle_OnTrack';
                summaryText = t.summaryText_OnTrack(monthlyDepositFormatted, totalInterestFormatted, totalDepositFormatted, goalAmountFormatted);
                progressValue = 100;
            } else if (monthlyDeposit * 12 > goalAmount * 0.75) { 
                summaryTitleKey = 'summaryTitle_TooHigh';
                summaryText = t.summaryText_TooHigh(monthlyDepositFormatted);
                progressValue = 100;
            } else {
                summaryTitleKey = 'summaryTitle_OnTrack';
                summaryText = t.summaryText_OnTrack(monthlyDepositFormatted, totalInterestFormatted, totalDepositFormatted, goalAmountFormatted);
                progressValue = 100; 
            }

            document.getElementById('summaryTitle').textContent = t[summaryTitleKey];
            document.getElementById('summaryText').innerHTML = summaryText;

            document.getElementById('monthlyDepositResult').textContent = monthlyDepositFormatted;
            document.getElementById('totalInterestResult').textContent = totalInterestFormatted;
            document.getElementById('totalDepositResult').textContent = totalDepositFormatted;

            const clampedProgress = Math.min(100, Math.max(0, progressValue));
            progressFill.style.width = `${clampedProgress}%`;
            progressText.textContent = `${clampedProgress.toFixed(1)}%`;
            progressText.style.color = (clampedProgress > 50) ? 'white' : '#4b5563';

            resultBox.classList.add('visible');
        }

        function setLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            
            // Text Only Updates
            ['appTitle', 'backToCatalogText', 'headerTitle', 'toolSubtitle', 'sectionGoalHeader', 'labelGoalAmount', 
             'descGoalAmount', 'labelCurrentSavings', 'sectionTimeInterestHeader', 'labelYearsToGoal', 'labelAnnualInterestRate', 
             'descAnnualInterestRate', 'calculateButton', 'resultTitle', 'visualHeader', 'metricsHeader', 'resultMonthlyDeposit', 
             'resultTotalInterest', 'resultTotalDeposit', 'sectionHeader1', 'sectionHeader2'].forEach(id => {
                 const el = document.getElementById(id);
                 if(el) el.textContent = t[id];
            });
            
            // HTML Updates
            ['content1', 'content2'].forEach(id => {
                const el = document.getElementById(id);
                if(el) el.innerHTML = t[id];
            });

            // Re-format Inputs
            ['goalAmount', 'currentSavings'].forEach(id => {
                const input = document.getElementById(id);
                if (input.value) {
                    const cleanedValue = cleanInput(input.value);
                    input.value = cleanedValue.toLocaleString(lang === 'id' ? 'id-ID' : 'en-US', {
                        maximumFractionDigits: 0
                    });
                }
            });

            // Related Tools Update
            document.querySelectorAll('[data-en]').forEach(el => {
                const text = el.getAttribute(`data-${lang}`);
                if (text) el.textContent = text;
            });

            if(document.getElementById('resultBox').classList.contains('visible')){
                calculateSavings();
            }
        }

        const observer = new MutationObserver((mutations) => {
            mutations.forEach((m) => {
                if (m.type === 'attributes' && m.attributeName === 'lang') {
                    setLanguage(document.documentElement.lang || 'en');
                }
            });
        });
        observer.observe(document.documentElement, { attributes: true });

        document.addEventListener('DOMContentLoaded', () => {
            setLanguage(document.documentElement.lang || 'en');
        });
    </script>
</body>
</html>