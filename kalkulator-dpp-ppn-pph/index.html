<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../output.css">

    <link rel="canonical" href="https://digitaltoolsid.github.io/kalkulator-dpp-ppn-pph/" />
    <meta name="description" content="Kalkulator Pajak Kontrak Fleksibel (DPP, PPN, PPh). Sesuaikan tarif pajak dan uji 3 skema pembayaran untuk akurasi keuangan proyek Anda.">
 
    <title id="pageTitle">Kalkulator Pajak Kontrak Fleksibel (DPP, PPN, PPh)</title>
   
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7M8E7QRYNY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-7M8E7QRYNY');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4885884866232864" crossorigin="anonymous"></script>

    <style>
        /* CSS LOKAL */
        .result-box {
            transition: all 0.3s ease;
        }
        .note-box {
            border-left-width: 4px;
        }
        
        /* GRID LOGIC: 
           - Mobile (<640px): 1 Kolom (Vertikal)
           - [cite_start]Tablet & Desktop (>=640px): 2 Kolom (2x2) [cite: 166-168] */
        .result-grid {
            display: grid;
            grid-template-columns: 1fr; /* Mobile: Stack ke bawah */
            gap: 1rem;
        }
        @media (min-width: 640px) {
            .result-grid {
                grid-template-columns: repeat(2, 1fr); /* Desktop: Grid 2x2 */
            }
        }
    </style>
</head>
<body class="bg-gray-50 flex flex-col min-h-screen font-sans">

    <div id="global-header-container"></div>

    <main class="flex-grow p-4 sm:p-8 flex flex-col items-center">
        
        <div class="w-full max-w-2xl bg-white shadow-xl rounded-xl p-6 sm:p-8">
            
            <h1 id="mainHeading" class="text-3xl font-extrabold text-gray-800 mb-2 dynamic-text">Hitung DPP, PPN, dan PPh Kontrak Otomatis</h1>
            <p id="subHeading" class="text-gray-500 mb-6">Alat hitung fleksibel untuk berbagai tarif PPN dan PPh sesuai kebutuhan proyek Anda.</p>

            <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 mb-8">
                <div class="flex flex-col gap-6">
                    
                    <div class="w-full relative">
                        <label for="nilaiKontrak" id="labelNilaiKontrak" class="block text-sm font-medium text-gray-700 mb-1">Nilai Kontrak (Rp)</label>
                        <input type="text" id="nilaiKontrak" value="100.000.000" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 text-right font-mono text-lg font-bold text-gray-800" inputmode="numeric">
                    </div>

                    <div class="flex gap-4 w-full">
                        <div class="w-1/2 relative">
                            <label for="tarifPPN" id="labelTarifPPN" class="block text-sm font-medium text-gray-700 mb-1">PPN (%)</label>
                            <div class="relative">
                                <input type="number" id="tarifPPN" value="11" step="0.1" min="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 text-center font-bold text-gray-800">
                                <span class="absolute right-3 top-3 text-gray-400 text-sm">%</span>
                            </div>
                        </div>

                        <div class="w-1/2 relative">
                            <label for="tarifPPh" id="labelTarifPPh" class="block text-sm font-medium text-gray-700 mb-1">PPh (%)</label>
                            <div class="relative">
                                <input type="number" id="tarifPPh" value="4.5" step="0.1" min="0" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 text-center font-bold text-gray-800">
                                <span class="absolute right-3 top-3 text-gray-400 text-sm">%</span>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <h2 id="skema1Title" class="text-xl font-bold text-green-600 mb-2">Skema 1: Jika Harga Kontrak = DPP</h2>
            <p id="skema1Desc" class="text-gray-600 text-sm mb-4">Harga belum termasuk pajak. PPN ditambahkan di atas harga, PPh dipotong dari harga.</p>
            <div class="result-grid mb-10">
                <div class="result-box bg-green-50 border border-green-200 rounded-lg p-4 flex flex-row justify-between items-center md:block">
                    <span id="labelDPP1" class="text-xs font-semibold text-gray-500 uppercase tracking-wide">DPP (Dasar)</span>
                    <span id="resultDPP1" class="text-lg font-bold text-blue-900 mt-1">Rp0</span>
                </div>
                <div class="result-box bg-green-50 border border-green-200 rounded-lg p-4 flex flex-row justify-between items-center md:block">
                    <span id="labelPPN1" class="text-xs font-semibold text-gray-500 uppercase tracking-wide">PPN</span>
                    <span id="resultPPN1" class="text-lg font-bold text-blue-900 mt-1">Rp0</span>
                </div>
                <div class="result-box bg-green-50 border border-green-200 rounded-lg p-4 flex flex-row justify-between items-center md:block">
                    <span id="labelPPh1" class="text-xs font-semibold text-gray-500 uppercase tracking-wide">PPh (Potong)</span>
                    <span id="resultPPh1" class="text-lg font-bold text-blue-900 mt-1">Rp0</span>
                </div>
                <div class="result-box bg-green-100 border-2 border-green-400 rounded-lg p-4 flex flex-row justify-between items-center md:block">
                    <span id="labelNet1" class="text-xs font-semibold text-gray-600 uppercase tracking-wide">Bersih Diterima</span>
                    <span id="resultNet1" class="text-xl font-extrabold text-green-700 mt-1">Rp0</span>
                </div>
            </div>

            <h2 id="skema2Title" class="text-xl font-bold text-green-600 mb-2">Skema 2: Jika Harga Kontrak = DPP + PPN</h2>
            <p id="skema2Desc" class="text-gray-600 text-sm mb-4">Harga sudah termasuk PPN (Gross PPN). PPh dipotong dari nilai DPP.</p>
            <div class="result-grid mb-10">
                <div class="result-box bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex flex-row justify-between items-center md:block">
                    <span id="labelDPP2" class="text-xs font-semibold text-gray-500 uppercase tracking-wide">DPP (Gross-Up)</span>
                    <span id="resultDPP2" class="text-lg font-bold text-blue-900 mt-1">Rp0</span>
                </div>
                <div class="result-box bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex flex-row justify-between items-center md:block">
                    <span id="labelPPN2" class="text-xs font-semibold text-gray-500 uppercase tracking-wide">PPN</span>
                    <span id="resultPPN2" class="text-lg font-bold text-blue-900 mt-1">Rp0</span>
                </div>
                <div class="result-box bg-yellow-50 border border-yellow-200 rounded-lg p-4 flex flex-row justify-between items-center md:block">
                    <span id="labelPPh2" class="text-xs font-semibold text-gray-500 uppercase tracking-wide">PPh (Potong)</span>
                    <span id="resultPPh2" class="text-lg font-bold text-blue-900 mt-1">Rp0</span>
                </div>
                <div class="result-box bg-yellow-100 border-2 border-yellow-400 rounded-lg p-4 flex flex-row justify-between items-center md:block">
                    <span id="labelNet2" class="text-xs font-semibold text-gray-600 uppercase tracking-wide">Bersih Diterima</span>
                    <span id="resultNet2" class="text-xl font-extrabold text-green-700 mt-1">Rp0</span>
                </div>
            </div>

            <h2 id="skema3Title" class="text-xl font-bold text-green-600 mb-2">Skema 3: Jika Harga Kontrak = DPP + PPN - PPh</h2>
            <p id="skema3Desc" class="text-gray-600 text-sm mb-4">Harga adalah nilai bersih (Netto) yang harus diterima. Dilakukan Gross-Up ganda.</p>
            <div class="result-grid">
                <div class="result-box bg-blue-50 border border-blue-200 rounded-lg p-4 flex flex-row justify-between items-center md:block">
                    <span id="labelDPP3" class="text-xs font-semibold text-gray-500 uppercase tracking-wide">DPP (Gross-Up)</span> 
                    <span id="resultDPP3" class="text-lg font-bold text-blue-900 mt-1">Rp0</span>
                </div>
                <div class="result-box bg-blue-50 border border-blue-200 rounded-lg p-4 flex flex-row justify-between items-center md:block">
                    <span id="labelPPN3" class="text-xs font-semibold text-gray-500 uppercase tracking-wide">PPN</span>
                    <span id="resultPPN3" class="text-lg font-bold text-blue-900 mt-1">Rp0</span>
                </div>
                <div class="result-box bg-blue-50 border border-blue-200 rounded-lg p-4 flex flex-row justify-between items-center md:block">
                    <span id="labelPPh3" class="text-xs font-semibold text-gray-500 uppercase tracking-wide">PPh (Potong)</span>
                    <span id="resultPPh3" class="text-lg font-bold text-blue-900 mt-1">Rp0</span>
                </div>
                <div class="result-box bg-blue-100 border-2 border-blue-400 rounded-lg p-4 flex flex-row justify-between items-center md:block">
                    <span id="labelNet3" class="text-xs font-semibold text-gray-600 uppercase tracking-wide">Nilai Bersih</span>
                    <span id="resultNet3" class="text-xl font-extrabold text-green-700 mt-1">Rp0</span>
                </div>
            </div>

            <div class="mt-12 bg-green-50 border-green-500 text-gray-700 note-box p-4 rounded-r-lg">
                <h3 id="useCaseTitle" class="font-bold text-lg text-green-600 mb-2">Kapan Kalkulator ini Digunakan?</h3>
                <p id="useCaseDesc" class="text-sm mb-3">
                    Gunakan alat ini saat merancang kontrak jasa. Ubah tarif PPN dan PPh sesuai regulasi terbaru atau jenis jasa (misal: Jasa Konstruksi, Konsultasi, dll). Alat ini membantu menghindari selisih bayar akibat salah interpretasi klausul "Harga Termasuk Pajak".
                </p>
            </div>

        </div>
    </main>

    <section id="related-tools-section" class="w-full max-w-2xl mx-auto px-4 py-8 mb-4">
        
        <div class="flex items-center mb-5">
            <div class="w-1 h-7 mr-3 dynamic-bg bg-green-600"></div> 
            <h2 class="text-xl font-bold text-gray-800" 
                data-en="Related Finance Tools" 
                data-id="Alat Keuangan Terkait">
                Alat Keuangan Terkait
            </h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-10">
            <a href="../kalkulator-pph/index.html" class="tool-card group block p-4 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 dynamic-border hover:border-green-400">
                <h3 class="text-base font-bold mb-1 dynamic-text text-green-600 group-hover:text-green-700" data-en="Income Tax Calculator (PPh 21)" data-id="Kalkulator PPh 21">Kalkulator PPh 21</h3>
                <p class="text-xs text-gray-600 leading-relaxed" data-en="Calculate your monthly income tax easily." data-id="Hitung pajak penghasilan bulanan Anda dengan mudah.">Hitung pajak penghasilan bulanan Anda dengan mudah.</p>
            </a>
            <a href="../kalkulator-anggaran-bulanan/index.html" class="tool-card group block p-4 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 dynamic-border hover:border-green-400">
                <h3 class="text-base font-bold mb-1 dynamic-text text-green-600 group-hover:text-green-700" data-en="Monthly Budget Calculator" data-id="Kalkulator Anggaran Bulanan">Kalkulator Anggaran Bulanan</h3>
                <p class="text-xs text-gray-600 leading-relaxed" data-en="Plan your monthly finances effectively." data-id="Rencanakan keuangan bulanan Anda secara efektif.">Rencanakan keuangan bulanan Anda secara efektif.</p>
            </a>
            <a href="../kalkulator-bunga-majemuk/index.html" class="tool-card group block p-4 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 dynamic-border hover:border-green-400">
                <h3 class="text-base font-bold mb-1 dynamic-text text-green-600 group-hover:text-green-700" data-en="Compound Interest Calculator" data-id="Kalkulator Bunga Majemuk">Kalkulator Bunga Majemuk</h3>
                <p class="text-xs text-gray-600 leading-relaxed" data-en="Calculate investment growth over time." data-id="Hitung pertumbuhan investasi dari waktu ke waktu.">Hitung pertumbuhan investasi dari waktu ke waktu.</p>
            </a>
        </div>

        <div class="border-t border-gray-100 pt-8">
            <h3 class="text-xl font-bold text-gray-800 mb-4" 
                data-en="Related Articles:" 
                data-id="Artikel Terkait:">
                Artikel Terkait:
            </h3>
            <ul class="space-y-3">
                <li>
                    <a href="../articles/klausul-perpajakan-kontrak.html" class="flex items-center text-sm hover:underline group dynamic-text">
                        <span class="w-1.5 h-1.5 bg-gray-300 rounded-full mr-3 dynamic-bg-group group-hover:bg-green-500"></span>
                        <span data-en="Understanding Tax Clauses in Contracts" 
                              data-id="Memahami Klausul Perpajakan dalam Kontrak">
                            Memahami Klausul Perpajakan dalam Kontrak
                        </span>
                    </a>
                </li>
                <li>
                    <a href="../articles/strategi-mempercepat-pelunasan-utang.html" class="flex items-center text-sm hover:underline group dynamic-text">
                        <span class="w-1.5 h-1.5 bg-gray-300 rounded-full mr-3 dynamic-bg-group group-hover:bg-green-500"></span>
                        <span data-en="Strategies to Accelerate Debt Repayment" 
                              data-id="Strategi Mempercepat Pelunasan Utang">
                            Strategi Mempercepat Pelunasan Utang
                        </span>
                    </a>
                </li>
            </ul>
        </div>
    </section>

    <div id="global-footer-container"></div>

    <script>
        window.headerCategory = 'finance'; [cite_start]// [cite: 154]
    </script>
    <script src="../components.js"></script>

    <script>
        // Objek Terjemahan
        const translations = {
            id: {
                pageTitle: "Kalkulator Pajak Kontrak Fleksibel (DPP, PPN, PPh)",
                mainHeading: "Hitung DPP, PPN, dan PPh Kontrak Otomatis",
                subHeading: "Alat hitung fleksibel untuk berbagai tarif PPN dan PPh sesuai kebutuhan proyek Anda.",
                labelNilaiKontrak: "Nilai Kontrak (Rp)",
                labelTarifPPN: "PPN (%)",
                labelTarifPPh: "PPh (%)",
                
                // Skema 1
                skema1Title: "Skema 1: Jika Harga Kontrak = DPP",
                skema1Desc: "Harga belum termasuk pajak. PPN ditambahkan di atas harga, PPh dipotong dari harga.",
                labelDPP1: "DPP (Dasar)",
                labelPPN1: "PPN",
                labelPPh1: "PPh (Potong)",
                labelNet1: "Bersih Diterima",
                
                // Skema 2
                skema2Title: "Skema 2: Jika Harga Kontrak = DPP + PPN",
                skema2Desc: "Harga sudah termasuk PPN (Gross PPN). PPh dipotong dari nilai DPP.",
                labelDPP2: "DPP (Gross-Up)",
                labelPPN2: "PPN",
                labelPPh2: "PPh (Potong)",
                labelNet2: "Bersih Diterima",
                
                // Skema 3
                skema3Title: "Skema 3: Jika Harga Kontrak = DPP + PPN - PPh",
                skema3Desc: "Harga adalah nilai bersih (Netto) yang harus diterima. Dilakukan Gross-Up ganda.",
                labelDPP3: "DPP (Gross-Up)", 
                labelPPN3: "PPN",
                labelPPh3: "PPh (Potong)",
                labelNet3: "Nilai Bersih",

                // Edukasi
                useCaseTitle: "Kapan Kalkulator ini Digunakan?",
                useCaseDesc: "Gunakan alat ini saat merancang kontrak jasa. Ubah tarif PPN dan PPh sesuai regulasi terbaru atau jenis jasa (misal: Jasa Konstruksi, Konsultasi, dll). Alat ini membantu menghindari selisih bayar akibat salah interpretasi klausul 'Harga Termasuk Pajak'.",
            },
            en: {
                pageTitle: "Flexible Contract Tax Calculator (DPP, VAT, WHT)",
                mainHeading: "Automatic Contract Tax Calculator",
                subHeading: "Flexible tool for various VAT and WHT rates according to your project needs.",
                labelNilaiKontrak: "Contract Value (Rp)",
                labelTarifPPN: "VAT (%)",
                labelTarifPPh: "WHT (%)",

                // Skema 1
                skema1Title: "Scheme 1: Contract Price is DPP (Base)",
                skema1Desc: "Price excludes tax. VAT is added on top, WHT is deducted from base.",
                labelDPP1: "DPP (Base)",
                labelPPN1: "VAT",
                labelPPh1: "WHT (Withheld)",
                labelNet1: "Net Received",
                
                // Skema 2
                skema2Title: "Scheme 2: Contract Price Includes VAT",
                skema2Desc: "Price includes VAT (Gross VAT). WHT is deducted from the DPP value.",
                labelDPP2: "DPP (Gross-Up)",
                labelPPN2: "VAT",
                labelPPh2: "WHT (Withheld)",
                labelNet2: "Net Received",
                
                // Skema 3
                skema3Title: "Scheme 3: Contract Price is Net Clean",
                skema3Desc: "Price is the net amount to be received. Double Gross-Up is performed.",
                labelDPP3: "DPP (Gross-Up)", 
                labelPPN3: "VAT",
                labelPPh3: "WHT (Withheld)",
                labelNet3: "Net Value",

                // Edukasi
                useCaseTitle: "When to Use This Calculator?",
                useCaseDesc: "Use this tool when drafting service contracts. Adjust VAT and WHT rates according to latest regulations or service types (e.g., Construction, Consulting). This tool helps avoid payment discrepancies due to misinterpreting 'Tax Inclusive' clauses.",
            }
        };

        let currentLang = 'id';

        const formatRupiah = (number) => {
            if (isNaN(number) || number === null) return 'Rp0';
            const formatter = new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0,
            });
            return formatter.format(number).replace('IDR', 'Rp');
        };

        const formatNumberInput = (number) => {
            if (isNaN(number) || number === null) return '0';
            return new Intl.NumberFormat('id-ID').format(number);
        };

        // Fungsi Utama Kalkulasi
        const calculateTax = () => {
            const nilaiKontrakRaw = document.getElementById('nilaiKontrak').value.replace(/\./g, '');
            const nilaiKontrak = parseFloat(nilaiKontrakRaw) || 0;
            
            // Ambil Input Persentase PPN dan PPh
            const ppnPercent = parseFloat(document.getElementById('tarifPPN').value) || 0;
            const pphPercent = parseFloat(document.getElementById('tarifPPh').value) || 0;

            const PPN_RATE = ppnPercent / 100;
            const PPH_RATE = pphPercent / 100;

            // --- SKEMA 1: Harga = DPP ---
            const dpp1 = nilaiKontrak;
            const ppn1 = dpp1 * PPN_RATE;
            const pph1 = dpp1 * PPH_RATE;
            const net1 = dpp1 + ppn1 - pph1;
            
            document.getElementById('resultDPP1').textContent = formatRupiah(dpp1);
            document.getElementById('resultPPN1').textContent = formatRupiah(ppn1);
            document.getElementById('resultPPh1').textContent = formatRupiah(pph1);
            document.getElementById('resultNet1').textContent = formatRupiah(net1);
            
            // --- SKEMA 2: Harga Termasuk PPN ---
            const totalJasa2 = nilaiKontrak;
            const dpp2 = totalJasa2 / (1 + PPN_RATE);
            const ppn2 = dpp2 * PPN_RATE;
            const pph2 = dpp2 * PPH_RATE;
            const net2 = totalJasa2 - pph2;
            
            document.getElementById('resultDPP2').textContent = formatRupiah(dpp2);
            document.getElementById('resultPPN2').textContent = formatRupiah(ppn2);
            document.getElementById('resultPPh2').textContent = formatRupiah(pph2);
            document.getElementById('resultNet2').textContent = formatRupiah(net2);
            
            // --- SKEMA 3: Harga Net/Bersih ---
            const netPrice3 = nilaiKontrak; 
            const dpp3 = netPrice3 / (1 + PPN_RATE - PPH_RATE);
            const pph3 = dpp3 * PPH_RATE;
            const ppn3 = dpp3 * PPN_RATE;

            document.getElementById('resultDPP3').textContent = formatRupiah(dpp3);
            document.getElementById('resultPPN3').textContent = formatRupiah(ppn3);
            document.getElementById('resultPPh3').textContent = formatRupiah(pph3);
            document.getElementById('resultNet3').textContent = formatRupiah(netPrice3); 
        };

        const setLanguage = (lang) => {
            currentLang = lang;
            const t = translations[lang];

            const elementsToTranslate = [
                { id: 'pageTitle', key: 'pageTitle' },
                { id: 'mainHeading', key: 'mainHeading' },
                { id: 'subHeading', key: 'subHeading' },
                { id: 'labelNilaiKontrak', key: 'labelNilaiKontrak' },
                { id: 'labelTarifPPN', key: 'labelTarifPPN' },
                { id: 'labelTarifPPh', key: 'labelTarifPPh' },

                // Skema 1
                { id: 'skema1Title', key: 'skema1Title' },
                { id: 'skema1Desc', key: 'skema1Desc' },
                { id: 'labelDPP1', key: 'labelDPP1' },
                { id: 'labelPPN1', key: 'labelPPN1' },
                { id: 'labelPPh1', key: 'labelPPh1' },
                { id: 'labelNet1', key: 'labelNet1' },
                
                // Skema 2
                { id: 'skema2Title', key: 'skema2Title' },
                { id: 'skema2Desc', key: 'skema2Desc' },
                { id: 'labelDPP2', key: 'labelDPP2' },
                { id: 'labelPPN2', key: 'labelPPN2' },
                { id: 'labelPPh2', key: 'labelPPh2' },
                { id: 'labelNet2', key: 'labelNet2' },
                
                // Skema 3
                { id: 'skema3Title', key: 'skema3Title' },
                { id: 'skema3Desc', key: 'skema3Desc' },
                { id: 'labelDPP3', key: 'labelDPP3' }, 
                { id: 'labelPPN3', key: 'labelPPN3' },
                { id: 'labelPPh3', key: 'labelPPh3' },
                { id: 'labelNet3', key: 'labelNet3' },
                
                // Edukasi
                { id: 'useCaseTitle', key: 'useCaseTitle' },
            ];

            elementsToTranslate.forEach(item => {
                const element = document.getElementById(item.id);
                if (element) {
                    element.textContent = t[item.key];
                }
            });

            document.getElementById('useCaseDesc').innerHTML = t.useCaseDesc;
            updateRelatedContent(lang);
            calculateTax();
        };

        function updateRelatedContent(lang) {
            const translatableElements = document.querySelectorAll('#related-tools-section [data-en]');
            translatableElements.forEach(el => {
                const newText = el.getAttribute(`data-${lang}`);
                if (newText) {
                    el.textContent = newText;
                }
            });
        }

        function applyDynamicTheme() {
            const category = window.headerCategory || 'health'; 
            const themes = {
                health: { bg: 'bg-blue-600', text: 'text-blue-600', border: 'hover:border-blue-400', hoverText: 'group-hover:text-blue-700', bgGroup: 'group-hover:bg-blue-500' },
                finance: { bg: 'bg-green-600', text: 'text-green-600', border: 'hover:border-green-400', hoverText: 'group-hover:text-green-700', bgGroup: 'group-hover:bg-green-500' },
                productivity: { bg: 'bg-purple-600', text: 'text-purple-600', border: 'hover:border-purple-400', hoverText: 'group-hover:text-purple-700', bgGroup: 'group-hover:bg-purple-500' }
            };
            const theme = themes[category] || themes.health;

            document.querySelectorAll('.dynamic-bg').forEach(el => el.classList.add(theme.bg));
            document.querySelectorAll('.dynamic-text').forEach(el => el.classList.add(theme.text));
            document.querySelectorAll('.dynamic-border').forEach(el => el.classList.add(theme.border));
            document.querySelectorAll('.dynamic-hover-text').forEach(el => el.classList.add(theme.hoverText));
            // Tambahan untuk bg group
            document.querySelectorAll('.dynamic-bg-group').forEach(el => el.classList.add(theme.bgGroup));
        }

        document.addEventListener('DOMContentLoaded', () => {
            const nilaiKontrakInput = document.getElementById('nilaiKontrak');
            const tarifPPNInput = document.getElementById('tarifPPN');
            const tarifPPhInput = document.getElementById('tarifPPh');

            nilaiKontrakInput.value = formatNumberInput(parseFloat(nilaiKontrakInput.value.replace(/\./g, '')) || 0);

            nilaiKontrakInput.addEventListener('input', function() {
                let rawValue = this.value.replace(/\D/g, ''); 
                if (rawValue.length > 15) {
                    rawValue = rawValue.substring(0, 15);
                }
                const formattedValue = formatNumberInput(parseInt(rawValue));
                this.value = formattedValue;
                calculateTax();
            });

            // Trigger kalkulasi saat tarif berubah
            tarifPPNInput.addEventListener('input', calculateTax);
            tarifPPhInput.addEventListener('input', calculateTax);
            
            setLanguage('id');
            applyDynamicTheme();
        });

        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'attributes' && mutation.attributeName === 'lang') {
                    const currentLang = document.documentElement.lang || 'en';
                    setLanguage(currentLang);
                }
            });
        });
        observer.observe(document.documentElement, { attributes: true });

    </script>
</body>
</html>