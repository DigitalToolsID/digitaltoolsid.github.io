<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="canonical" href="https://digitaltoolsid.github.io/kalkulator-perbandingan-pinjaman-pribadi/" />
    <!-- Judul akan di-set oleh JS -->
 
    <meta name="description" content="Kalkulator perbandingan pinjaman pribadi. Bandingkan dua skenario pinjaman (Bank A vs. Bank B) untuk menemukan opsi angsuran dan biaya total yang paling hemat." />
 
    <title id="appTitle">Personal Loan Comparison Calculator</title>
    <link rel="alternate" hreflang="id" href="https://digitaltoolsid.github.io/personal-loan-comparison/index.html" />
    <link rel="alternate" hreflang="en" href="https://digitaltoolsid.github.io/personal-loan-comparison/index.html" />
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Kode Google Analytic dan Adsense -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7M8E7QRYNY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-7M8E7QRYNY');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4885884866232864"
         crossorigin="anonymous"></script>
    
    <!-- Konfigurasi Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'primary': '#2c3e50', 
                        'secondary': '#3498db', 
                        'primary-dark': '#1e3a8a', 
                        'finance-color': '#27ae60', // Hijau untuk Keuangan
                        'loan-a': '#3498db', // Biru untuk Pinjaman A
                        'loan-b': '#e67e22', // Oranye untuk Pinjaman B
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Gaya kustom untuk tampilan hasil (disederhanakan dari KPR) */
        .result-box {
            transition: all 0.5s ease-in-out;
            transform-origin: top center;
            opacity: 0;
            max-height: 0;
            overflow: hidden;
        }
        .result-box.visible {
            opacity: 1;
            max-height: 3000px; 
            padding: 1.5rem; 
        }
        
        /* Gaya Toggle Bahasa (Sama seperti alat KPR) */
        .lang-toggle-container {
            position: relative;
            display: inline-flex;
            background-color: #e5e7eb; 
            border-radius: 9999px; 
            padding: 4px;
        }
        .lang-toggle-btn {
            padding: 6px 14px;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            z-index: 10;
            color: #6b7280; 
            transition: color 0.3s ease;
            position: relative;
        }
        .lang-toggle-slider {
            position: absolute;
            top: 4px;
            left: 4px;
            height: calc(100% - 8px);
            width: calc(50% - 4px); 
            background-color: #1e3a8a; /* Primary-dark */
            border-radius: 9999px;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 5;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }
        .lang-toggle-container.lang-en .lang-toggle-slider { transform: translateX(0%); }
        .lang-toggle-container.lang-id .lang-toggle-slider { transform: translateX(100%); }
        .lang-toggle-container.lang-en #lang-en { color: white; }
        .lang-toggle-container.lang-id #lang-id { color: white; }
        
        /* Gaya kustom untuk input dan tombol (Sama seperti alat KPR) */
        .calculate-button {
            box-shadow: 0 4px #1e8449; /* Warna hijau yang lebih gelap */
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .calculate-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px #1e8449;
        }
        .calculate-button:active {
            transform: translateY(2px);
            box-shadow: 0 2px #1e8449;
        }

        /* Gaya untuk deskripsi input */
        .input-description {
            font-size: 0.75rem; /* text-xs */
            color: #6b7280; /* text-gray-500 */
            margin-top: 0.25rem;
        }

        /* Gaya Khusus untuk Kartu Pinjaman */
        .loan-card {
            border-top-width: 4px;
        }
        .loan-a-border { border-top-color: #3498db; }
        .loan-b-border { border-top-color: #e67e22; }

        /* Gaya untuk kartu hasil Pinjaman A dan B */
        .result-card-a { background-color: #dbeafe; border-color: #93c5fd; } /* Blue-100/300 */
        .result-card-b { background-color: #fef3c7; border-color: #fcd34d; } /* Yellow-100/300 */
        
        .text-loan-a { color: #3498db; }
        .text-loan-b { color: #e67e22; }

        /* Gaya Tabel Perbandingan */
        .comparison-table th, .comparison-table td {
            padding: 10px 12px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        .comparison-table th {
            font-weight: 600;
            background-color: #f9fafb;
            color: #374151;
            font-size: 0.875rem;
        }
        .comparison-table td {
            font-size: 0.875rem;
            color: #4b5563;
        }
        .comparison-table tr:hover {
            background-color: #f3f4f6;
        }
        .comparison-table tr:last-child td {
            border-bottom: none;
        }
        
        /* Gaya untuk Toggle Input Mode (Persen vs Absolut) */
        .mode-toggle-container {
            position: relative;
            display: inline-flex;
            background-color: #e5e7eb; 
            border-radius: 0.5rem; /* rounded-lg */
            padding: 2px;
            width: 100%;
            margin-bottom: 8px; /* Tambahkan sedikit margin di bawah toggle */
        }
        .mode-toggle-btn {
            flex-grow: 1;
            padding: 4px 8px;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            z-index: 10;
            color: #6b7280; 
            transition: color 0.3s ease;
            position: relative;
            text-align: center;
        }
        .mode-toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            height: calc(100% - 4px);
            width: calc(50% - 2px); 
            background-color: #ffffff; 
            border-radius: 0.5rem; 
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 5;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        }
        .mode-toggle-container[data-mode="percent"] .mode-toggle-slider { transform: translateX(0%); }
        .mode-toggle-container[data-mode="absolute"] .mode-toggle-slider { transform: translateX(100%); }
        .mode-toggle-container[data-mode="percent"] .btn-percent { color: #3498db; } /* Warna Pinjaman A untuk teks aktif */
        .mode-toggle-container[data-mode="absolute"] .btn-absolute { color: #3498db; }
        
    </style>
</head>

<!-- Body dengan kode pengaman (Sama seperti alat KPR) -->
<body class="bg-gray-50 flex flex-col min-h-screen font-sans" oncontextmenu="return false;" oncopy="return false;" oncut="return false;">

    <!-- Header -->
    <header class="bg-primary-dark text-white py-4 shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center">
            
            <!-- Tautan Kembali ke Katalog (Asumsi: naik 1 tingkat dari path alat ini) -->
            <a href="../index.html" class="text-lg font-semibold tracking-tight text-gray-200 hover:text-white transition duration-150">
                &larr; <span id="backToCatalogText">Back to Tools Catalog</span>
            </a>
            
            <div id="languageSwitcher" class="lang-toggle-container lang-en">
                <div id="langToggleSlider" class="lang-toggle-slider"></div>
                <button id="lang-en" onclick="setLanguage('en')" class="lang-toggle-btn">
                    EN
                </button>
                <button id="lang-id" onclick="setLanguage('id')" class="lang-toggle-btn">
                    ID
                </button>
            </div>
            </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow p-4 sm:p-8 flex justify-center">
        <div class="w-full max-w-4xl bg-white shadow-xl rounded-xl p-6 sm:p-8">
            
            <h1 id="headerTitle" class="text-3xl font-extrabold text-primary-dark mb-3">Personal Loan Comparison Calculator</h1>
            
            <p id="toolSubtitle" class="text-base text-gray-700 font-medium mb-6">
                Compare two different personal loan scenarios (e.g., Bank A vs. Fintech B) to find the option that saves you the most money.
            </p>
            
            <!-- Form Input -->
            <form id="loanComparisonForm" onsubmit="calculateComparison(event)" class="space-y-6">
                
                <!-- Input Pinjaman Utama (Sama untuk A dan B) -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="relative md:col-span-2">
                        <label for="loanAmount" class="block text-sm font-medium text-gray-700 mb-1" id="labelLoanAmount">Loan Amount (Principal)</label>
                        <input type="text" id="loanAmount" inputmode="numeric" value="50.000.000" oninput="formatInput(this)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-finance-color focus:border-finance-color transition duration-150" required>
                        <p class="input-description" id="descLoanAmount">Total pokok pinjaman yang ingin Anda ajukan (Sama untuk Pinjaman A & B).</p>
                    </div>
                    
                    <div class="relative">
                        <label for="loanTermYears" class="block text-sm font-medium text-gray-700 mb-1" id="labelLoanTerm">Loan Term (Years)</label>
                        <input type="number" id="loanTermYears" min="1" max="5" value="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-finance-color focus:border-finance-color transition duration-150" required>
                        <p class="input-description" id="descLoanTerm">Jangka waktu pinjaman total dalam tahun (Maks. 5 Tahun untuk Pinjaman Pribadi).</p>
                    </div>
                </div>

                <!-- Perbandingan Pinjaman A dan B -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t border-gray-200">
                    
                    <!-- PINJAMAN A (Bank/Fintech 1) -->
                    <div class="loan-card loan-a-border bg-blue-50/50 p-5 rounded-lg shadow-md">
                        <h2 class="text-xl font-bold mb-3 text-loan-a" id="headerLoanA">Loan Scenario A (Bank A)</h2>
                        <div class="space-y-3">
                            <div class="relative">
                                <label for="rateA" class="block text-sm font-medium text-gray-700 mb-1" id="labelRateA">Annual Interest Rate (%)</label>
                                <input type="number" id="rateA" min="0" step="0.1" value="12" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-loan-a focus:border-loan-a transition duration-150" required>
                                <p class="input-description" id="descRateA">Suku bunga tahunan Pinjaman A.</p>
                            </div>
                            
                            <!-- Biaya Admin A: Dibuat Toggle -->
                            <div class="relative">
                                <label class="block text-sm font-medium text-gray-700 mb-1" id="labelAdminFeeA">Upfront Admin Fee</label>
                                <!-- Toggle Button (Percent vs Absolute) -->
                                <div id="adminFeeModeA" class="mode-toggle-container" data-mode="percent">
                                    <div class="mode-toggle-slider"></div>
                                    <button type="button" onclick="setAdminFeeMode('A', 'percent')" class="mode-toggle-btn btn-percent text-sm">
                                        % <span id="modePercentA">Percentage</span>
                                    </button>
                                    <button type="button" onclick="setAdminFeeMode('A', 'absolute')" class="mode-toggle-btn btn-absolute text-sm">
                                        <span id="modeAbsoluteA">Absolute Value</span>
                                    </button>
                                </div>
                                <!-- Input Element for Admin Fee A -->
                                <input type="text" id="adminFeeA" inputmode="numeric" value="1.5" oninput="formatFeeInput(this, 'A')" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-loan-a focus:border-loan-a transition duration-150" required>
                                <p class="input-description" id="descAdminFeeA">Biaya administrasi di muka (persen dari Pokok Pinjaman).</p>
                            </div>

                        </div>
                    </div>

                    <!-- PINJAMAN B (Bank/Fintech 2) -->
                    <div class="loan-card loan-b-border bg-yellow-50/50 p-5 rounded-lg shadow-md">
                        <h2 class="text-xl font-bold mb-3 text-loan-b" id="headerLoanB">Loan Scenario B (Bank B)</h2>
                        <div class="space-y-3">
                             <div class="relative">
                                <label for="rateB" class="block text-sm font-medium text-gray-700 mb-1" id="labelRateB">Annual Interest Rate (%)</label>
                                <input type="number" id="rateB" min="0" step="0.1" value="15" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-loan-b focus:border-loan-b transition duration-150" required>
                                <p class="input-description" id="descRateB">Suku bunga tahunan Pinjaman B.</p>
                            </div>
                            
                            <!-- Biaya Admin B: Dibuat Toggle -->
                            <div class="relative">
                                <label class="block text-sm font-medium text-gray-700 mb-1" id="labelAdminFeeB">Upfront Admin Fee</label>
                                <!-- Toggle Button (Percent vs Absolute) -->
                                <div id="adminFeeModeB" class="mode-toggle-container" data-mode="percent">
                                    <div class="mode-toggle-slider"></div>
                                    <button type="button" onclick="setAdminFeeMode('B', 'percent')" class="mode-toggle-btn btn-percent text-sm">
                                        % <span id="modePercentB">Percentage</span>
                                    </button>
                                    <button type="button" onclick="setAdminFeeMode('B', 'absolute')" class="mode-toggle-btn btn-absolute text-sm">
                                        <span id="modeAbsoluteB">Absolute Value</span>
                                    </button>
                                </div>
                                <!-- Input Element for Admin Fee B -->
                                <input type="text" id="adminFeeB" inputmode="numeric" value="0.5" oninput="formatFeeInput(this, 'B')" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-loan-b focus:border-loan-b transition duration-150" required>
                                <p class="input-description" id="descAdminFeeB">Biaya administrasi di muka (persen dari Pokok Pinjaman).</p>
                            </div>
                        </div>
                    </div>
                </div>


                <button type="submit" id="calculateButton" class="calculate-button w-full bg-finance-color text-white font-semibold py-3 rounded-xl hover:bg-green-700 transition duration-300 ease-in-out transform focus:outline-none focus:ring-4 focus:ring-finance-color focus:ring-opacity-50">
                    Compare Loans
                </button>
                
                <!-- Error Alert -->
                <div id="errorAlert" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
                    <span id="errorText" class="block sm:inline"></span>
                </div>
            </form>

            <!-- Result Box -->
            <div id="resultBox" class="result-box mt-8 bg-gray-50 border border-gray-200 rounded-xl shadow-lg">
                
                <h3 id="resultHeader" class="text-2xl font-bold mb-6 text-primary border-b pb-2">Comparison Results</h3>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                    
                    <!-- Summary Card A -->
                    <div class="result-card-a p-6 rounded-xl shadow-lg border-2">
                        <p class="text-sm font-bold text-loan-a mb-1" id="summaryHeaderA">Loan A Summary</p>
                        <p id="monthlyPaymentA" class="text-3xl font-extrabold text-loan-a mb-3">0</p>
                        <p class="text-base font-medium text-gray-700" id="labelMonthlyA">Monthly Installment</p>
                        
                        <div class="mt-4 pt-4 border-t border-blue-300 space-y-2">
                            <p class="text-sm text-gray-600 flex justify-between">
                                <span id="labelTotalInterestA">Total Interest Paid:</span>
                                <span id="totalInterestA" class="font-semibold text-gray-800">0</span>
                            </p>
                            <p class="text-sm text-gray-600 flex justify-between">
                                <span id="labelTotalFeeA">Upfront Admin Fee:</span>
                                <span id="totalFeeA" class="font-semibold text-gray-800">0</span>
                            </p>
                            <p class="text-lg font-bold flex justify-between">
                                <span id="labelTotalCostA">TOTAL LOAN COST:</span>
                                <span id="totalCostA" class="font-extrabold text-red-700">0</span>
                            </p>
                        </div>
                    </div>

                     <!-- Summary Card B -->
                    <div class="result-card-b p-6 rounded-xl shadow-lg border-2">
                        <p class="text-sm font-bold text-loan-b mb-1" id="summaryHeaderB">Loan B Summary</p>
                        <p id="monthlyPaymentB" class="text-3xl font-extrabold text-loan-b mb-3">0</p>
                        <p class="text-base font-medium text-gray-700" id="labelMonthlyB">Monthly Installment</p>
                        
                        <div class="mt-4 pt-4 border-t border-yellow-300 space-y-2">
                            <p class="text-sm text-gray-600 flex justify-between">
                                <span id="labelTotalInterestB">Total Interest Paid:</span>
                                <span id="totalInterestB" class="font-semibold text-gray-800">0</span>
                            </p>
                            <p class="text-sm text-gray-600 flex justify-between">
                                <span id="labelTotalFeeB">Upfront Admin Fee:</span>
                                <span id="totalFeeB" class="font-semibold text-gray-800">0</span>
                            </p>
                            <p class="text-lg font-bold flex justify-between">
                                <span id="labelTotalCostB">TOTAL LOAN COST:</span>
                                <span id="totalCostB" class="font-extrabold text-red-700">0</span>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Tabel Perbandingan Utama -->
                <h3 id="tableHeader" class="text-xl font-bold text-primary border-b pb-2 mb-4">Direct Comparison of Key Metrics</h3>
                <div class="overflow-x-auto">
                    <table class="comparison-table w-full bg-white rounded-lg shadow-inner">
                        <thead>
                            <tr>
                                <th id="colHeaderMetric">Metric</th>
                                <th class="text-loan-a" id="colHeaderLoanA">Loan A</th>
                                <th class="text-loan-b" id="colHeaderLoanB">Loan B</th>
                                <th id="colHeaderDifference">Difference</th>
                                <th id="colHeaderBest">Best Option</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td id="rowMonthlyPayment">Monthly Installment</td>
                                <td id="compMonthlyA" class="font-semibold text-loan-a"></td>
                                <td id="compMonthlyB" class="font-semibold text-loan-b"></td>
                                <td id="diffMonthly"></td>
                                <td id="bestMonthly" class="font-bold"></td>
                            </tr>
                            <tr>
                                <td id="rowInterestRate">Annual Interest Rate</td>
                                <td id="compRateA"></td>
                                <td id="compRateB"></td>
                                <td id="diffRate"></td>
                                <td id="bestRate" class="font-bold"></td>
                            </tr>
                            <tr>
                                <td id="rowTotalInterest">Total Interest Paid</td>
                                <td id="compInterestA" class="text-loan-a"></td>
                                <td id="compInterestB" class="text-loan-b"></td>
                                <td id="diffInterest"></td>
                                <td id="bestInterest" class="font-bold"></td>
                            </tr>
                            <tr>
                                <td id="rowTotalFee">Upfront Admin Fee</td>
                                <td id="compFeeA"></td>
                                <td id="compFeeB"></td>
                                <td id="diffFee"></td>
                                <td id="bestFee" class="font-bold"></td>
                            </tr>
                            <tr class="bg-gray-100 font-bold">
                                <td id="rowTotalCost">TOTAL COST</td>
                                <td id="compTotalCostA" class="text-loan-a"></td>
                                <td id="compTotalCostB" class="text-loan-b"></td>
                                <td id="diffTotalCost" class="text-red-700"></td>
                                <td id="bestTotalCost" class="font-extrabold text-finance-color"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- CALL TO ACTION (CTA) DIHAPUS SESUAI PERMINTAAN PENGGUNA -->
            </div>
            
            <!-- Konten Edukasi -->
            <section class="mt-8 pt-4 border-t border-gray-200 font-sans">
                <h2 id="sectionHeader1" class="text-xl font-bold text-gray-800 mb-3">Understanding Personal Loan Costs</h2>
                <p id="content1" class="text-gray-600 text-sm leading-relaxed text-justify mb-6"></p>

                <h3 id="sectionHeader2" class="text-lg font-bold text-gray-800 mb-2">Interest Rate vs. Upfront Fee</h3>
                <p id="content2" class="text-gray-600 text-sm leading-relaxed text-justify mb-6"></p>

                <h3 id="sectionHeader3" class="text-lg font-bold text-gray-800 mb-2">Key Comparison Metrics</h3>
                <ul id="content3" class="text-gray-600 text-sm leading-relaxed text-justify mb-6 list-disc ml-6 space-y-1">
                    <li id="tip1"></li>
                    <li id="tip2"></li>
                    <li id="tip3"></li>
                </ul>

                <h3 id="sectionHeader4" class="text-lg font-bold text-gray-800 mb-2">Disclaimer</h3>
                <p id="content4" class="text-gray-600 text-sm leading-relaxed text-justify mb-6"></p>
            </section>

        </div>
    </main>
    
    <!-- Footer (Sama seperti alat KPR) -->
    <footer class="mt-12 py-6 border-t border-gray-200 bg-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div id="footerLinks" class="flex flex-wrap justify-center space-x-4 sm:space-x-8 text-sm font-medium text-gray-600">
                <a href="../privacy-policy.html" id="linkPrivacy" class="hover:text-secondary transition duration-150 ease-in-out">Privacy Policy</a>
                <span aria-hidden="true" class="hidden sm:inline">|</span>
                <a href="../terms-of-service.html" id="linkTerms" class="hover:text-secondary transition duration-150 ease-in-out">Terms of Service</a>
                <span aria-hidden="true" class="hidden sm:inline">|</span>
                <a href="../about-us.html" id="linkAbout" class="hover:text-secondary transition duration-150 ease-in-out">About Us</a>
                <span aria-hidden="true" class="hidden sm:inline">|</span>
                <a href="../contact-us.html" id="linkContact" class="hover:text-secondary transition duration-150 ease-in-out">Contact Us</a>
            </div>
            
            <div class="mt-6 text-center text-xs text-gray-500">
                <span id="footerCopyright">&copy; 2025 Digital Tools ID. All rights reserved. Developed by DTID Analytics.</span>
            </div>
        </div>
    </footer>
    
    <script>
        // **********************************************
        // LOGIKA KALKULATOR PERBANDINGAN PINJAMAN PRIBADI
        // **********************************************
        
        // --- State Input Biaya Admin ---
        // Menyimpan nilai dan mode input biaya admin untuk setiap skenario
        let adminFeeState = {
            A: { mode: 'percent', value: 1.5 },
            B: { mode: 'percent', value: 0.5 }
        };

        const translations = {
            id: {
                appTitle: "Kalkulator Perbandingan Pinjaman Pribadi",
                headerTitle: "Kalkulator Perbandingan Pinjaman Pribadi",
                toolSubtitle: "Bandingkan dua skenario pinjaman pribadi yang berbeda (misalnya, Bank A vs. Fintech B) untuk menemukan opsi yang paling hemat biaya total.",
                backToCatalogText: "Kembali ke Katalog Alat",
                // Input Global
                labelLoanAmount: "Jumlah Pinjaman (Pokok)",
                descLoanAmount: "Total pokok pinjaman yang ingin Anda ajukan (Sama untuk Pinjaman A & B).",
                labelLoanTerm: "Jangka Waktu Pinjaman (Tahun)",
                descLoanTerm: "Jangka waktu pinjaman total dalam tahun (Maks. 5 Tahun untuk Pinjaman Pribadi).",
                calculateButton: "Bandingkan Pinjaman",
                inputError: "Mohon masukkan semua nilai input yang valid (Jumlah Pinjaman > 0, Bunga >= 0, Jangka Waktu 1-5 Tahun).",
                // Input Skenario A & B
                headerLoanA: "Skenario Pinjaman A (Bank A)",
                headerLoanB: "Skenario Pinjaman B (Bank B)",
                labelRateA: "Suku Bunga Tahunan (%) Pinjaman A",
                descRateA: "Suku bunga tahunan Pinjaman A.",
                labelAdminFeeA: "Biaya Admin di Muka",
                modePercent: "Persentase",
                modeAbsolute: "Nilai Absolut",
                descAdminFeePercent: "Biaya administrasi di muka (persen dari Pokok Pinjaman).",
                descAdminFeeAbsolute: "Nilai nominal biaya administrasi di muka (misalnya: 500.000).",
                labelRateB: "Suku Bunga Tahunan (%) Pinjaman B",
                descRateB: "Suku bunga tahunan Pinjaman B.",
                labelAdminFeeB: "Biaya Admin di Muka",
                
                // Hasil Ringkasan
                resultHeader: "Hasil Perbandingan",
                summaryHeaderA: "Ringkasan Pinjaman A",
                summaryHeaderB: "Ringkasan Pinjaman B",
                labelMonthlyA: "Angsuran Bulanan",
                labelMonthlyB: "Angsuran Bulanan",
                labelTotalInterestA: "Total Bunga Dibayar",
                labelTotalInterestB: "Total Bunga Dibayar",
                labelTotalFeeA: "Biaya Admin di Muka",
                labelTotalFeeB: "Biaya Admin di Muka",
                labelTotalCostA: "TOTAL BIAYA PINJAMAN",
                labelTotalCostB: "TOTAL BIAYA PINJAMAN",

                // Tabel Perbandingan
                tableHeader: "Perbandingan Langsung Metrik Utama",
                colHeaderMetric: "Metrik",
                colHeaderLoanA: "Pinjaman A",
                colHeaderLoanB: "Pinjaman B",
                colHeaderDifference: "Selisih",
                colHeaderBest: "Opsi Terbaik",
                rowMonthlyPayment: "Angsuran Bulanan",
                rowInterestRate: "Suku Bunga Tahunan",
                rowTotalInterest: "Total Bunga Dibayar",
                rowTotalFee: "Biaya Admin di Muka",
                rowTotalCost: "TOTAL BIAYA",
                // CTA
                ctaText: "Siap memilih pinjaman terbaik? Bandingkan penawaran langsung dari mitra terpercaya kami!",
                ctaButton: "Dapatkan Penawaran Pinjaman Personalisasi",

                // Konten Edukasi
                sectionHeader1: "Penting: Menggunakan Suku Bunga Efektif Tahunan",
                content1: "Pinjaman pribadi seringkali dikomunikasikan menggunakan suku bunga flat, padahal perhitungan angsuran sebenarnya menggunakan suku bunga <b>efektif</b> (anuitas). Suku bunga efektif mencerminkan biaya pinjaman yang <b>sesungguhnya</b> per tahun, setelah memperhitungkan perhitungan bunga majemuk bulanan. <b>Kalkulator ini HANYA dapat memberikan hasil yang akurat jika Anda memasukkan persentase Suku Bunga Efektif Tahunan (%) yang benar.</b>",
                
                sectionHeader2: "Apa yang Harus Dilakukan Jika Perhitungan Berbeda?",
                content2: "Jika angka angsuran bulanan hasil kalkulator ini <b>berbeda</b> dengan yang diinformasikan oleh pemberi pinjaman (Bank/Fintech), ini menunjukkan adanya perbedaan antara suku bunga yang Anda masukkan dengan suku bunga efektif yang mereka gunakan. <b>Tanyakan kepada pemberi pinjaman mengenai persentase Suku Bunga Efektif Tahunan yang sebenarnya.</b> Transparansi ini penting untuk memastikan Anda mendapatkan gambaran total biaya yang akurat.",
                
                sectionHeader3: "Cara Menghitung Suku Bunga Efektif",
                content3: "Jika pemberi pinjaman hanya memberikan Angsuran Bulanan, Anda masih dapat menghitung perkiraan Suku Bunga Efektifnya. Anda dapat menggunakan kalkulator terpisah untuk tujuan ini. Klik link berikut untuk menggunakan alat bantu perhitungan suku bunga efektif:",
                tip1: "<a href='../kalkulator-bunga-efektif/index.html' class='text-secondary hover:text-primary-dark font-bold underline transition duration-150'>Kalkulator Suku Bunga Efektif</a>",
                tip2: "Total Bunga Dibayar: Ini mencerminkan seberapa besar biaya pinjaman dalam jangka panjang (tenor).",
                tip3: "Total Biaya (Pokok + Bunga + Fee): Ini adalah angka terpenting. Pinjaman dengan Total Biaya terendah adalah pilihan yang paling hemat secara finansial.",
                
                sectionHeader4: "Penting (Disclaimer)",
                content4: "Kalkulator ini menggunakan metode perhitungan anuitas standar untuk tujuan estimasi. Hasil yang disajikan <b>tidak termasuk</b> biaya asuransi, biaya pelunasan dipercepat, atau penalti lainnya. Hasil ini murni estimasi dan bukan merupakan penawaran pinjaman yang mengikat. Selalu verifikasi perhitungan Anda dengan penyedia pinjaman resmi.",

                // Footer
                linkPrivacy: "Kebijakan Privasi",
                linkTerms: "Ketentuan Layanan",
                linkAbout: "Tentang Kami",
                linkContact: "Hubungi Kami",
                footerCopyright: "&copy; 2025 Digital Tools ID. Semua hak dilindungi. Dikembangkan oleh DTID Analytics."
            },
            en: {
                appTitle: "Personal Loan Comparison Calculator",
                headerTitle: "Personal Loan Comparison Calculator",
                toolSubtitle: "Compare two different personal loan scenarios (e.g., Bank A vs. Fintech B) to find the option that saves you the most money in total cost.",
                backToCatalogText: "Back to Tools Catalog",
                // Input Global
                labelLoanAmount: "Loan Amount (Principal)",
                descLoanAmount: "The total principal loan amount you wish to borrow (Same for Loan A & B).",
                labelLoanTerm: "Loan Term (Years)",
                descLoanTerm: "The total duration of the loan in years (Max 5 Years for Personal Loans).",
                calculateButton: "Compare Loans",
                inputError: "Please enter all valid input values (Loan Amount > 0, Interest >= 0, Term 1-5 Years).",
                 // Input Skenario A & B
                headerLoanA: "Loan Scenario A (Bank A)",
                headerLoanB: "Loan Scenario B (Bank B)",
                labelRateA: "Annual Interest Rate (%) Loan A",
                descRateA: "The annual interest rate for Loan A.",
                labelAdminFeeA: "Upfront Admin Fee",
                modePercent: "Percentage",
                modeAbsolute: "Absolute Value",
                descAdminFeePercent: "The upfront administration fee (percentage of the Principal Loan).",
                descAdminFeeAbsolute: "The upfront administration fee (absolute nominal value, e.g.: 500,000).",
                labelRateB: "Annual Interest Rate (%) Loan B",
                descRateB: "The annual interest rate for Loan B.",
                labelAdminFeeB: "Upfront Admin Fee",

                // Hasil Ringkasan
                resultHeader: "Comparison Results",
                summaryHeaderA: "Loan A Summary",
                summaryHeaderB: "Loan B Summary",
                labelMonthlyA: "Monthly Installment",
                labelMonthlyB: "Monthly Installment",
                labelTotalInterestA: "Total Interest Paid",
                labelTotalInterestB: "Total Interest Paid",
                labelTotalFeeA: "Upfront Admin Fee",
                labelTotalFeeB: "Upfront Admin Fee",
                labelTotalCostA: "TOTAL LOAN COST",
                labelTotalCostB: "TOTAL LOAN COST",

                // Tabel Perbandingan
                tableHeader: "Direct Comparison of Key Metrics",
                colHeaderMetric: "Metric",
                colHeaderLoanA: "Loan A",
                colHeaderLoanB: "Loan B",
                colHeaderDifference: "Difference",
                colHeaderBest: "Best Option",
                rowMonthlyPayment: "Monthly Installment",
                rowInterestRate: "Annual Interest Rate",
                rowTotalInterest: "Total Interest Paid",
                rowTotalFee: "Upfront Admin Fee",
                rowTotalCost: "TOTAL COST",
                // CTA
                ctaText: "Ready to choose the best loan? Compare live offers from our trusted partners!",
                ctaButton: "Get Personalized Loan Offers",

                // Konten Edukasi
                sectionHeader1: "Important: Use the Effective Annual Interest Rate",
                content1: "Personal loans are often communicated using a flat interest rate, even though the installment calculation actually uses the <b>effective</b> (anuitas) interest rate. The effective interest rate reflects the <b>true</b> annual cost of the loan, after accounting for monthly compounding interest. <b>This calculator can ONLY provide accurate results if you input the correct Effective Annual Interest Percentage (%) rate.</b>",
                
                sectionHeader2: "What to Do If Calculations Differ?",
                content2: "If the monthly installment figure calculated here <b>differs</b> from what the lender (Bank/Fintech) informs you, it indicates a discrepancy between the rate you entered and the effective rate they are using. <b>Ask the lender about the actual Effective Annual Interest Percentage they use.</b> This transparency is crucial for ensuring you get an accurate total cost picture.",
                
                sectionHeader3: "How to Calculate the Effective Interest Rate",
                content3: "If the lender only provides the Monthly Installment amount, you can still estimate the Effective Interest Rate. You can use a separate calculator for this purpose. Click the following link to use the effective interest rate calculation tool:",
                tip1: "<a href='../kalkulator-bunga-efektif/index.html' class='text-secondary hover:text-primary-dark font-bold underline transition duration-150'>Effective Interest Rate Calculator</a>",
                tip2: "Total Interest Paid: This reflects how much the loan costs you over the long term (tenor).",
                tip3: "Total Cost (Principal + Interest + Fee): This is the most important number. The loan with the lowest Total Cost is the most financially optimal choice.",
                
                sectionHeader4: "Disclaimer",
                content4: "This calculator uses the standard annuity calculation method for estimation purposes. The results presented <b>do not include</b> insurance fees, accelerated repayment fees, or other penalties. This result is purely an estimate and does not constitute a binding loan offer. Always verify your calculations with the official loan provider.",
            
                // Footer
                linkPrivacy: "Privacy Policy",
                linkTerms: "Terms of Service",
                linkAbout: "About Us",
                linkContact: "Contact Us",
                footerCopyright: "&copy; 2025 Digital Tools ID. All rights reserved. Developed by DTID Analytics."
            }
        };

        let currentLang = 'en'; // Default language

        // Fungsi utilitas untuk memformat angka dengan pemisah ribuan (tanpa simbol mata uang)
        function formatNumber(amount, decimalPlaces = 0) {
            const locale = currentLang === 'id' ? 'id-ID' : 'en-US';
            return new Intl.NumberFormat(locale, {
                minimumFractionDigits: decimalPlaces,
                maximumFractionDigits: decimalPlaces,
            }).format(amount);
        }

        // Fungsi yang dipanggil oleh event oninput untuk memformat input secara real-time
        function formatInput(inputElement) {
            // Hapus semua non-digit untuk mendapatkan nilai mentah
            let rawValue = inputElement.value.replace(/\D/g, ''); 
            
            // Konversi ke angka, lalu format, lalu kembalikan ke input value
            if (rawValue) {
                const numericValue = parseInt(rawValue, 10);
                inputElement.value = formatNumber(numericValue);
                // Update state untuk biaya admin (jika itu input biaya admin)
                if (inputElement.id === 'loanAmount') {
                    // Jika nilai loanAmount berubah, kita harus memastikan biaya admin absolutnya juga di-update jika modenya absolut
                    // Ini untuk menghindari inkonsistensi saat user mengubah jumlah pinjaman
                }
            } else {
                inputElement.value = ''; // Biarkan kosong jika tidak ada input
            }
        }
        
        // Fungsi untuk membersihkan format dari input string (misalnya "10.000.000" menjadi 10000000)
        function cleanInput(formattedValue) {
            // Menghapus semua karakter non-digit (termasuk titik/koma pemisah ribuan)
            return parseFloat(formattedValue.replace(/\D/g, '')) || 0;
        }

        // --- FUNGSI INPUT BIAYA ADMIN SESUAI MODE ---
        function formatFeeInput(inputElement, scenario) {
            const isPercentMode = adminFeeState[scenario].mode === 'percent';
            let rawValue = inputElement.value;
            let numericValue;

            if (isPercentMode) {
                // Mode Persen: Izinkan koma/titik desimal (desimal hanya 2 digit)
                rawValue = rawValue.replace(/[^0-9.,]/g, '');
                // Ganti koma dengan titik untuk parsing yang benar
                rawValue = rawValue.replace(/,/g, '.');
                numericValue = parseFloat(rawValue);

                if (!isNaN(numericValue)) {
                    // Simpan nilai mentah ke state
                    adminFeeState[scenario].value = numericValue;
                    // Tampilkan di input apa adanya (tanpa format ribuan)
                    inputElement.value = numericValue.toFixed(2).replace(/\.00$/, ''); 
                } else {
                     adminFeeState[scenario].value = 0;
                     inputElement.value = '';
                }
            } else {
                // Mode Absolut: Hanya angka (format ribuan)
                let cleanedValue = rawValue.replace(/\D/g, '');
                numericValue = parseInt(cleanedValue, 10);

                if (!isNaN(numericValue)) {
                    // Simpan nilai mentah ke state
                    adminFeeState[scenario].value = numericValue;
                    // Tampilkan dengan format ribuan
                    inputElement.value = formatNumber(numericValue);
                } else {
                     adminFeeState[scenario].value = 0;
                     inputElement.value = '';
                }
            }
        }
        
        // --- FUNGSI TOGGLE INPUT MODE ---
        function setAdminFeeMode(scenario, mode) {
            if (adminFeeState[scenario].mode === mode) return; // Jangan lakukan apa-apa jika mode tidak berubah

            adminFeeState[scenario].mode = mode;
            const inputElement = document.getElementById('adminFee' + scenario);
            const modeContainer = document.getElementById('adminFeeMode' + scenario);
            const t = translations[currentLang];
            
            modeContainer.dataset.mode = mode;

            // Update label deskripsi dan nilai input
            if (mode === 'percent') {
                inputElement.setAttribute('inputmode', 'decimal');
                // Asumsi: kembali ke nilai default/terakhir yang diinput dalam persen
                inputElement.value = adminFeeState[scenario].value.toFixed(2).replace(/\.00$/, '');
                document.getElementById('descAdminFee' + scenario).textContent = t.descAdminFeePercent;
            } else {
                inputElement.setAttribute('inputmode', 'numeric');
                // Asumsi: kembali ke nilai default/terakhir yang diinput dalam absolut
                inputElement.value = formatNumber(adminFeeState[scenario].value);
                document.getElementById('descAdminFee' + scenario).textContent = t.descAdminFeeAbsolute;
            }
            
             // Atur ulang penanganan input agar sesuai dengan mode baru
             inputElement.oninput = function() {
                formatFeeInput(this, scenario);
            };
            
            // Panggil formatFeeInput setelah mode diatur untuk merapikan nilai awal
            formatFeeInput(inputElement, scenario);
        }

        /**
         * Fungsi inti untuk menghitung Pinjaman Pribadi.
         * Menggunakan formula anuitas.
         * @param {number} L - Loan Amount (Pokok Pinjaman)
         * @param {number} R_annual - Annual Interest Rate (e.g., 0.12 for 12%)
         * @param {number} T_years - Loan Term in Years (e.g., 3)
         * @param {string} scenario - 'A' or 'B'
         * @returns {object} {monthlyPayment, totalInterestPaid, totalFee, totalCost}
         */
        function calculateLoan(L, R_annual, T_years, scenario) {
            if (L <= 0 || T_years < 1) {
                return { monthlyPayment: 0, totalInterestPaid: 0, totalFee: 0, totalCost: 0 };
            }
            
            // --- Dapatkan Biaya Admin Absolut ---
            let totalFee;
            const feeInput = adminFeeState[scenario].value;
            const feeMode = adminFeeState[scenario].mode;
            
            if (feeMode === 'percent') {
                // Jika mode persen, konversi persen (0.015) ke nilai absolut
                // Nilai input persen (e.g., 1.5) harus dibagi 100
                const feePercentage = feeInput / 100;
                totalFee = L * feePercentage;
            } else {
                // Jika mode absolut, gunakan nilai input langsung
                totalFee = feeInput;
            }
            // --- END NEW ---

            const R_monthly = R_annual / 12; // Monthly Interest Rate
            const N_months = T_years * 12; // Total Number of Payments (Bulan)
            
            let monthlyPayment = 0;
            
            // Hitung Angsuran Bulanan (M) menggunakan Formula Cicilan Anuitas
            if (R_monthly > 0) {
                const powerFactor = Math.pow(1 + R_monthly, N_months);
                monthlyPayment = L * (R_monthly * powerFactor) / (powerFactor - 1);
            } else {
                // Jika bunga 0%
                monthlyPayment = L / N_months;
            }

            const totalInterestPaid = (monthlyPayment * N_months) - L;
            const totalCost = L + totalInterestPaid + totalFee;

            // Bulatkan hasil ke integer terdekat
            return {
                monthlyPayment: Math.round(monthlyPayment),
                totalInterestPaid: Math.round(totalInterestPaid),
                totalFee: Math.round(totalFee),
                totalCost: Math.round(totalCost)
            };
        }


        // Fungsi utama untuk menjalankan perbandingan
        function calculateComparison(event) {
            event.preventDefault();

            // 1. Ambil dan Bersihkan Input Global
            const L = cleanInput(document.getElementById('loanAmount').value); // Loan Amount
            const T_years = parseInt(document.getElementById('loanTermYears').value) || 0; // Loan Term (Tahun)
            
            // 2. Ambil dan Bersihkan Input Skenario A
            const R_annual_A = parseFloat(document.getElementById('rateA').value) / 100; // Rate A
            
            // 3. Ambil dan Bersihkan Input Skenario B
            const R_annual_B = parseFloat(document.getElementById('rateB').value) / 100; // Rate B

            const resultBox = document.getElementById('resultBox');
            const errorAlert = document.getElementById('errorAlert');

            // 4. Validasi Input
            if (L <= 0 || T_years < 1 || T_years > 5 || R_annual_A < 0 || R_annual_B < 0) {
                document.getElementById('errorText').textContent = translations[currentLang].inputError;
                errorAlert.classList.remove('hidden');
                resultBox.classList.remove('visible');
                return;
            }
            
            errorAlert.classList.add('hidden');
            
            // 5. Hitung Skenario A dan B (passing scenario letter)
            const resultA = calculateLoan(L, R_annual_A, T_years, 'A');
            const resultB = calculateLoan(L, R_annual_B, T_years, 'B');

            // 6. Tampilkan Ringkasan Hasil A
            document.getElementById('monthlyPaymentA').textContent = formatNumber(resultA.monthlyPayment);
            document.getElementById('totalInterestA').textContent = formatNumber(resultA.totalInterestPaid);
            document.getElementById('totalFeeA').textContent = formatNumber(resultA.totalFee);
            document.getElementById('totalCostA').textContent = formatNumber(resultA.totalCost);

            // 7. Tampilkan Ringkasan Hasil B
            document.getElementById('monthlyPaymentB').textContent = formatNumber(resultB.monthlyPayment);
            document.getElementById('totalInterestB').textContent = formatNumber(resultB.totalInterestPaid);
            document.getElementById('totalFeeB').textContent = formatNumber(resultB.totalFee);
            document.getElementById('totalCostB').textContent = formatNumber(resultB.totalCost);

            // 8. Tampilkan Tabel Perbandingan
            
            // Angsuran Bulanan
            document.getElementById('compMonthlyA').textContent = formatNumber(resultA.monthlyPayment);
            document.getElementById('compMonthlyB').textContent = formatNumber(resultB.monthlyPayment);
            document.getElementById('diffMonthly').textContent = formatNumber(Math.abs(resultA.monthlyPayment - resultB.monthlyPayment));
            document.getElementById('bestMonthly').textContent = resultA.monthlyPayment < resultB.monthlyPayment ? "A" : (resultB.monthlyPayment < resultA.monthlyPayment ? "B" : "Tie");
            
            // Suku Bunga Tahunan
            document.getElementById('compRateA').textContent = formatNumber(R_annual_A * 100, 2) + '%';
            document.getElementById('compRateB').textContent = formatNumber(R_annual_B * 100, 2) + '%';
            document.getElementById('diffRate').textContent = formatNumber(Math.abs(R_annual_A * 100 - R_annual_B * 100), 2) + '%';
            document.getElementById('bestRate').textContent = R_annual_A < R_annual_B ? "A" : (R_annual_B < R_annual_A ? "B" : "Tie");

            // Total Bunga Dibayar
            document.getElementById('compInterestA').textContent = formatNumber(resultA.totalInterestPaid);
            document.getElementById('compInterestB').textContent = formatNumber(resultB.totalInterestPaid);
            document.getElementById('diffInterest').textContent = formatNumber(Math.abs(resultA.totalInterestPaid - resultB.totalInterestPaid));
            document.getElementById('bestInterest').textContent = resultA.totalInterestPaid < resultB.totalInterestPaid ? "A" : (resultB.totalInterestPaid < resultA.totalInterestPaid ? "B" : "Tie");

            // Biaya Admin di Muka
            document.getElementById('compFeeA').textContent = formatNumber(resultA.totalFee);
            document.getElementById('compFeeB').textContent = formatNumber(resultB.totalFee);
            document.getElementById('diffFee').textContent = formatNumber(Math.abs(resultA.totalFee - resultB.totalFee));
            document.getElementById('bestFee').textContent = resultA.totalFee < resultB.totalFee ? "A" : (resultB.totalFee < resultA.totalFee ? "B" : "Tie");

            // Total Biaya
            document.getElementById('compTotalCostA').textContent = formatNumber(resultA.totalCost);
            document.getElementById('compTotalCostB').textContent = formatNumber(resultB.totalCost);
            document.getElementById('diffTotalCost').textContent = formatNumber(Math.abs(resultA.totalCost - resultB.totalCost));
            document.getElementById('bestTotalCost').textContent = resultA.totalCost < resultB.totalCost ? "A (Saves " + formatNumber(Math.abs(resultA.totalCost - resultB.totalCost)) + ")" : (resultB.totalCost < resultA.totalCost ? "B (Saves " + formatNumber(Math.abs(resultA.totalCost - resultB.totalCost)) + ")" : "Tie");


            // Tampilkan kotak hasil
            resultBox.classList.add('visible');
        }


        // Fungsi untuk mengubah semua teks UI berdasarkan bahasa (Diadaptasi dari KPR)
        function setLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            const languageSwitcher = document.getElementById('languageSwitcher');

            // Update status toggle
            languageSwitcher.classList.remove('lang-en', 'lang-id');
            languageSwitcher.classList.add(`lang-${lang}`);
            document.documentElement.lang = lang; 

            // Ambil nilai input yang sudah diformat
            const lValue = document.getElementById('loanAmount').value;

            // Update teks statis
            document.getElementById('appTitle').textContent = t.appTitle;
            document.getElementById('headerTitle').textContent = t.headerTitle;
            document.getElementById('toolSubtitle').textContent = t.toolSubtitle;
            document.getElementById('backToCatalogText').textContent = t.backToCatalogText;
            
            // Update label formulir dan tombol
            document.getElementById('labelLoanAmount').textContent = t.labelLoanAmount;
            document.getElementById('descLoanAmount').textContent = t.descLoanAmount;
            document.getElementById('labelLoanTerm').textContent = t.labelLoanTerm;
            document.getElementById('descLoanTerm').textContent = t.descLoanTerm;
            document.getElementById('calculateButton').textContent = t.calculateButton;

            // Update Skenario A & B Headers
            document.getElementById('headerLoanA').textContent = t.headerLoanA;
            document.getElementById('headerLoanB').textContent = t.headerLoanB;
            document.getElementById('labelRateA').textContent = t.labelRateA;
            document.getElementById('descRateA').textContent = t.descRateA;

            document.getElementById('labelAdminFeeA').textContent = t.labelAdminFeeA;
            document.getElementById('modePercentA').textContent = t.modePercent;
            document.getElementById('modeAbsoluteA').textContent = t.modeAbsolute;
            
            document.getElementById('labelRateB').textContent = t.labelRateB;
            document.getElementById('descRateB').textContent = t.descRateB;
            
            document.getElementById('labelAdminFeeB').textContent = t.labelAdminFeeB;
            document.getElementById('modePercentB').textContent = t.modePercent;
            document.getElementById('modeAbsoluteB').textContent = t.modeAbsolute;


            // Format ulang input value (Loan Amount) berdasarkan bahasa baru
            document.getElementById('loanAmount').value = formatNumber(cleanInput(lValue));
            
            // Update label hasil
            document.getElementById('resultHeader').textContent = t.resultHeader;
            document.getElementById('summaryHeaderA').textContent = t.summaryHeaderA;
            document.getElementById('summaryHeaderB').textContent = t.summaryHeaderB;
            document.getElementById('labelMonthlyA').textContent = t.labelMonthlyA;
            document.getElementById('labelMonthlyB').textContent = t.labelMonthlyB;
            document.getElementById('labelTotalInterestA').textContent = t.labelTotalInterestA;
            document.getElementById('labelTotalInterestB').textContent = t.labelTotalInterestB;
            document.getElementById('labelTotalFeeA').textContent = t.labelTotalFeeA;
            document.getElementById('labelTotalFeeB').textContent = t.labelTotalFeeB;
            document.getElementById('labelTotalCostA').textContent = t.labelTotalCostA;
            document.getElementById('labelTotalCostB').textContent = t.labelTotalCostB;

            // Update header tabel
            document.getElementById('tableHeader').textContent = t.tableHeader;
            document.getElementById('colHeaderMetric').textContent = t.colHeaderMetric;
            document.getElementById('colHeaderLoanA').textContent = t.colHeaderLoanA;
            document.getElementById('colHeaderLoanB').textContent = t.colHeaderLoanB;
            document.getElementById('colHeaderDifference').textContent = t.colHeaderDifference;
            document.getElementById('colHeaderBest').textContent = t.colHeaderBest;
            document.getElementById('rowMonthlyPayment').textContent = t.rowMonthlyPayment;
            document.getElementById('rowInterestRate').textContent = t.rowInterestRate;
            document.getElementById('rowTotalInterest').textContent = t.rowTotalInterest;
            document.getElementById('rowTotalFee').textContent = t.rowTotalFee;
            document.getElementById('rowTotalCost').textContent = t.rowTotalCost;

            // Update Konten Edukasi
            document.getElementById('sectionHeader1').textContent = t.sectionHeader1;
            document.getElementById('content1').innerHTML = t.content1;
            document.getElementById('sectionHeader2').textContent = t.sectionHeader2;
            document.getElementById('content2').innerHTML = t.content2;
            document.getElementById('sectionHeader3').textContent = t.sectionHeader3;
            // Tips (Diubah menjadi link ke kalkulator efektif)
            document.getElementById('tip1').innerHTML = t.tip1;
            document.getElementById('tip2').textContent = t.tip2;
            document.getElementById('tip3').textContent = t.tip3;
            document.getElementById('sectionHeader4').textContent = t.sectionHeader4;
            document.getElementById('content4').innerHTML = t.content4;
            
            // Update Footer
            document.getElementById('linkPrivacy').textContent = t.linkPrivacy;
            document.getElementById('linkTerms').textContent = t.linkTerms;
            document.getElementById('linkAbout').textContent = t.linkAbout;
            document.getElementById('linkContact').textContent = t.linkContact;
            document.getElementById('footerCopyright').innerHTML = t.footerCopyright;
            
            // Perbarui deskripsi Biaya Admin berdasarkan mode yang aktif
            ['A', 'B'].forEach(scenario => {
                const mode = adminFeeState[scenario].mode;
                const inputElement = document.getElementById('adminFee' + scenario);
                // Panggil ulang formatFeeInput untuk merapikan nilai berdasarkan bahasa baru (absolut)
                formatFeeInput(inputElement, scenario); 
                document.getElementById('descAdminFee' + scenario).textContent = mode === 'percent' ? t.descAdminFeePercent : t.descAdminFeeAbsolute;
            });


            // Format ulang hasil jika sudah ada
            const resultElement = document.getElementById('monthlyPaymentA');
            if (resultElement.textContent !== '0') {
                 // Panggil kembali fungsi hitung untuk me-refresh format angka
                 calculateComparison({ preventDefault: () => {} }); 
            }

             // Pastikan error message diupdate
            if (!document.getElementById('errorAlert').classList.contains('hidden')) {
                document.getElementById('errorText').textContent = t.inputError;
            }
        }
        
        // Event listener untuk perubahan bahasa
        document.getElementById('languageSwitcher').addEventListener('click', (event) => {
            if (event.target.tagName === 'BUTTON') {
                const newLang = event.target.id === 'lang-en' ? 'en' : 'id';
                if (newLang !== currentLang) {
                    setLanguage(newLang);
                    // Sembunyikan hasil saat bahasa berganti
                    document.getElementById('resultBox').classList.remove('visible');
                    document.getElementById('errorAlert').classList.add('hidden');
                }
            }
        });

        // Inisialisasi
        document.addEventListener('DOMContentLoaded', () => {
            // Logika Deteksi Bahasa Awal
            let defaultLang = 'en'; 
            const browserLang = (navigator.language || navigator.userLanguage).toLowerCase();
            if (browserLang.startsWith('id')) {
                defaultLang = 'id';
            }
            setLanguage(defaultLang);
            
            // Inisialisasi mode input biaya admin di awal
            setAdminFeeMode('A', adminFeeState.A.mode);
            setAdminFeeMode('B', adminFeeState.B.mode);
        });

    </script>
</body>
</html>