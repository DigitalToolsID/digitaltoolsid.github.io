<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="description" content="Target Heart Rate Calculator: Master the Karvonen method to calculate your ideal training zones. Optimize fat burning and cardio endurance based on your age and RHR." />
    
    <meta name="keywords" content="Target Heart Rate Calculator, Karvonen Formula, Heart Rate Zones, Cardio Intensity, MHR Calculator, Kalkulator Detak Jantung, Zona Latihan, Hitung Denyut Nadi, Rumus Karvonen, Latihan Kardio, Pembakaran Lemak" />

    <title id="appTitle">Target Heart Rate Calculator (Karvonen) - Digital Tools ID</title>

    <link rel="canonical" href="https://digitaltoolsid.github.io/kalkulator-denyut-jantung/" />
    <link rel="icon" href="data:,"> <link rel="alternate" hreflang="id" href="https://digitaltoolsid.github.io/kalkulator-denyut-jantung/index.html" />
    <link rel="alternate" hreflang="en" href="https://digitaltoolsid.github.io/kalkulator-denyut-jantung/index.html" />

    <meta name="theme-color" content="#1e3a8a">
    
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../output.css">
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7M8E7QRYNY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-7M8E7QRYNY');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4885884866232864" crossorigin="anonymous"></script>
    
    <style>
        /* CSS LOKAL */
        
        /* Layout Hard Lock 50% Desktop */
        .layout-article-fixed { width: 100%; }
        @media (min-width: 1024px) {
            .layout-article-fixed { width: 50% !important; margin-left: auto !important; margin-right: auto !important; }
        }

        /* Gaya Kustom untuk hasil */
        .result-box {
            transition: all 0.5s ease-in-out;
            transform-origin: top center;
            opacity: 0;
            max-height: 0;
            overflow: hidden;
        }
        .result-box.visible {
            opacity: 1;
            max-height: 2500px; /* Cukup tinggi untuk konten */
            padding: 1.5rem;
            overflow: visible; 
        }
        
        /* Untuk daftar aksi */
        .action-list {
            list-style-type: disc;
            margin-left: 1.5rem;
            margin-top: 0.5rem;
        }
        .action-list li {
            margin-bottom: 0.25rem;
        }

        /* Hover effects for tool cards */
        .tool-card:hover {
            border-color: #3b82f6; /* Blue-500 */
            transform: translateY(-2px);
        }
        
        /* Dynamic Text Highlight */
        .dynamic-text:hover {
            color: #2563eb;
        }
    </style>
</head>

<body class="bg-gray-50 flex flex-col min-h-screen font-sans" oncontextmenu="return false;" oncopy="return false;" oncut="return false;">

    <div id="global-header-container"></div>
    <script> window.headerCategory = 'health'; </script>

    <main class="flex-grow p-4 sm:p-8 mx-auto layout-article-fixed">
        <div class="w-full bg-white shadow-xl rounded-xl p-6 sm:p-10 border border-gray-100">
            
            <h1 id="headerTitle" class="text-3xl font-extrabold text-blue-800 mb-3">Target Heart Rate Calculator (Karvonen)</h1>
            
            <p id="toolSubtitle" class="text-sm text-gray-600 mb-6 leading-relaxed text-justify">
                Calculate the optimal heart rate zones for your cardio workout based on your age and resting heart rate.
            </p>
            
            <div class="space-y-4">
                <div class="relative">
                    <label for="ageInput" class="block text-sm font-medium text-gray-700 mb-1" id="labelAge">Age (Years)</label>
                    <input type="number" id="ageInput" placeholder="E.g.: 30" step="1" min="1" max="100" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150" required>
                </div>

                <div class="relative">
                    <label for="rhrInput" class="block text-sm font-medium text-gray-700 mb-1" id="labelRHR">Resting Heart Rate (bpm)</label>
                    <input type="number" id="rhrInput" placeholder="E.g.: 65" step="1" min="30" max="120" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150" required>
                    <p id="rhrHelper" class="text-xs text-gray-500 mt-1 pl-1">How to measure: Count beats per minute while fully rested (e.g., first thing in the morning).</p>
                </div>

                <button id="calculateButton" onclick="calculateTHR()" class="w-full bg-blue-600 text-white font-semibold py-3 rounded-xl shadow-md hover:bg-blue-700 transition duration-300 ease-in-out transform hover:scale-[1.01] focus:outline-none focus:ring-4 focus:ring-blue-300 focus:ring-opacity-50">
                    Calculate Heart Rate Zones
                </button>
                
                <div id="errorAlert" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
                    <span id="errorText" class="block sm:inline"></span>
                </div>
            </div>

            <div id="resultBox" class="result-box mt-6 bg-blue-50 border border-blue-200 rounded-xl shadow-lg">
                <h3 id="resultTitle" class="text-lg font-bold mb-3 text-blue-800 border-b border-blue-200 pb-2">Your Heart Rate Zones</h3>

                <div class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div class="p-3 bg-white border border-blue-100 rounded-lg text-center">
                            <p id="labelMaxHR" class="text-sm text-gray-700 font-medium">Maximum Heart Rate (MHR)</p>
                            <p id="maxHrResult" class="text-2xl font-bold text-blue-600 mt-1">-- bpm</p>
                        </div>
                        <div class="p-3 bg-white border border-blue-100 rounded-lg text-center">
                            <p id="labelRHRResult" class="text-sm text-gray-700 font-medium">Resting Heart Rate (RHR)</p>
                            <p id="rhrResult" class="text-2xl font-bold text-gray-800 mt-1">-- bpm</p>
                        </div>
                    </div>
                </div>

                <h3 id="zoneHeader" class="text-lg font-bold mt-6 mb-3 text-gray-800 border-b border-blue-200 pb-2">Training Zones (Beats Per Minute)</h3>
                <div id="zoneContainer" class="space-y-2">
                    </div>
                
                <div id="actionAdviceBox" class="p-4 bg-white border border-blue-200 rounded-lg mt-6">
                    <h4 id="actionHeader" class="text-lg font-bold text-blue-800 mb-2">How to Use Your Heart Rate Zones</h4>
                    <ul class="action-list list-disc ml-4 space-y-1 text-sm text-gray-700" id="actionSteps">
                        </ul>
                </div>

            </div>
            
            <section class="mt-8 pt-4 border-t border-gray-200 font-sans">
                <h2 id="sectionHeader1" class="text-xl font-bold text-gray-800 mb-3">Understanding the Karvonen Method</h2>
                <p id="content1" class="text-gray-600 text-sm leading-relaxed text-justify mb-6"></p>

                <h3 id="sectionHeader2" class="text-lg font-bold text-gray-800 mb-2">The Purpose of Each Heart Rate Zone</h3>
                
                <div id="content2" class="text-gray-600 text-sm leading-relaxed text-justify mb-6 space-y-4">
                    <p id="zoneIntro"></p>
                    <div id="zoneBenefits" class="space-y-3">
                        </div>
                </div>

                <h3 id="sectionHeader3" class="text-lg font-bold text-gray-800 mb-2">Safety Guidelines</h3>
                <p id="content3" class="text-gray-600 text-sm leading-relaxed text-justify mb-4"></p>
                <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
                    <h4 class="text-sm font-bold text-yellow-800 mb-2" id="safetyHeader">Important Safety Guidelines</h4>
                    <ul class="action-list list-disc ml-4 space-y-1 text-xs text-yellow-900" id="safetyList">
                        </ul>
                </div>
            </section>
            
            <section id="referenceSection" class="mt-8 pt-4 border-t border-gray-200 font-sans">
                <h2 id="sectionHeader4" class="text-lg font-bold text-gray-800 mb-2">Sources & References</h2>
                <div id="references" class="text-gray-500 text-xs leading-relaxed space-y-1">
                    </div>
            </section>

        </div>
    </main>

    <section id="related-tools-section" class="max-w-4xl mx-auto px-4 py-8 mb-4">
        <div class="flex items-center mb-5">
            <div class="w-1 h-7 bg-blue-600 mr-3 rounded"></div> 
            <h2 class="text-xl font-bold text-gray-800" 
                data-en="Health & Lifestyle Tools" 
                data-id="Alat Kesehatan & Gaya Hidup">
                Health & Lifestyle Tools
            </h2>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-10">
            <a href="../BMI/index.html" class="tool-card group block p-4 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 hover:border-blue-400">
                <h3 class="text-base font-bold mb-1 dynamic-text dynamic-hover-text"
                    data-en="BMI Calculator"
                    data-id="Kalkulator BMI">
                    BMI Calculator
                </h3>
                <p class="text-xs text-gray-600 leading-relaxed"
                    data-en="Calculate Body Mass Index & Daily Calorie Needs."
                    data-id="Hitung Indeks Massa Tubuh & Kebutuhan Kalori Harian.">
                    Calculate Body Mass Index & Daily Calorie Needs.
                </p>
            </a>

            <a href="../body-fat-calculator/index.html" class="tool-card group block p-4 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 hover:border-blue-400">
                <h3 class="text-base font-bold mb-1 dynamic-text dynamic-hover-text"
                    data-en="Body Fat Percentage"
                    data-id="Persentase Lemak Tubuh">
                    Body Fat Percentage
                </h3>
                <p class="text-xs text-gray-600 leading-relaxed"
                    data-en="Estimate body composition using US Navy method."
                    data-id="Estimasi komposisi tubuh dengan metode Angkatan Laut AS.">
                    Estimate body composition using US Navy method.
                </p>
            </a>

            <a href="../kalkulator-kebutuhan-protein/index.html" class="tool-card group block p-4 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 hover:border-blue-400">
                <h3 class="text-base font-bold mb-1 dynamic-text dynamic-hover-text"
                    data-en="Daily Protein Needs Calculator"
                    data-id="Kalkulator Kebutuhan Protein">
                    Daily Protein Needs Calculator
                </h3>
                <p class="text-xs text-gray-600 leading-relaxed"
                    data-en="Determine ideal protein intake for muscle building or diet."
                    data-id="Tentukan asupan protein ideal untuk pembentukan otot atau diet.">
                    Determine ideal protein intake for muscle building or diet.
                </p>
            </a>
        </div>

        <div class="border-t border-gray-100 pt-8">
            <h3 class="text-xl font-bold text-gray-800 mb-4" 
                data-en="Related Articles:" 
                data-id="Artikel Terkait:">
                Related Articles:
            </h3>
            <ul class="space-y-3">
                <li>
                    <a href="../articles/definisi_bmi_tdee.html" class="flex items-center text-sm hover:underline group dynamic-text">
                        <span class="w-1.5 h-1.5 bg-gray-300 rounded-full mr-3 group-hover:bg-blue-500"></span>
                        <span data-en="Understanding BMI and TDEE: Your Daily Calorie Needs" 
                              data-id="Memahami BMI dan TDEE: Kebutuhan Kalori Harian Anda">
                            Understanding BMI and TDEE: Your Daily Calorie Needs
                        </span>
                    </a>
                </li>
                <li>
                    <a href="../articles/panduan-label-nutrisi.html" class="flex items-center text-sm hover:underline group dynamic-text">
                        <span class="w-1.5 h-1.5 bg-gray-300 rounded-full mr-3 group-hover:bg-blue-500"></span>
                        <span data-en="The Complete Guide: How to Read a Nutrition Facts Label" 
                              data-id="Panduan Lengkap: Cara Membaca Label Informasi Nilai Gizi">
                            The Complete Guide: How to Read a Nutrition Facts Label
                        </span>
                    </a>
                </li>
            </ul>
        </div>
    </section>

    <div id="global-footer-container"></div>
    <script src="../components.js"></script>
    
    <script>
        const zonesData = [
            { name: "Healthy Heart / Warm-up (50-60%)", min: 0.50, max: 0.60, color: "bg-gray-100", text: "text-gray-800", id: "zone1" },
            { name: "Fat Burning (60-70%)", min: 0.60, max: 0.70, color: "bg-green-100", text: "text-green-800", id: "zone2" },
            { name: "Aerobic / Endurance (70-80%)", min: 0.70, max: 0.80, color: "bg-yellow-100", text: "text-yellow-800", id: "zone3" },
            { name: "Anaerobic / Performance (80-90%)", min: 0.80, max: 0.90, color: "bg-orange-100", text: "text-orange-800", id: "zone4" },
            { name: "Maximum Effort (90-100%)", min: 0.90, max: 1.00, color: "bg-red-100", text: "text-red-900", id: "zone5" }
        ];

        const translations = {
            id: {
                appTitle: "Kalkulator Target Denyut Jantung",
                headerTitle: "Kalkulator Target Denyut Jantung (Karvonen)",
                toolSubtitle: "Hitung zona denyut jantung optimal untuk latihan kardio Anda berdasarkan usia dan denyut jantung istirahat.",
                backToCatalogText: "Kembali ke Katalog Alat",
                labelAge: "Usia (Tahun)",
                labelRHR: "Denyut Jantung Istirahat (bpm)",
                rhrHelper: "Cara mengukur: Hitung denyut per menit saat benar-benar istirahat (misalnya, saat bangun tidur).",
                calculateButton: "Hitung Zona Denyut Jantung",
                inputError: "Mohon masukkan Usia dan Denyut Jantung Istirahat yang valid (Usia minimal 10 tahun).",
                placeholderAge: "Contoh: 30",
                placeholderRHR: "Contoh: 65",

                // Hasil
                resultTitle: "Zona Denyut Jantung Anda",
                labelMaxHR: "Denyut Jantung Maksimum (MHR)",
                labelRHRResult: "Denyut Jantung Istirahat (RHR)",
                zoneHeader: "Zona Latihan (Denyut per Menit)",
                actionHeader: "Cara Menggunakan Zona Denyut Jantung Anda",

                // Nama Zona
                zone1Name: "Pemanasan / Kesehatan Jantung (50-60%)",
                zone2Name: "Pembakaran Lemak (60-70%)",
                zone3Name: "Aerobik / Ketahanan (70-80%)",
                zone4Name: "Anaerobik / Performa (80-90%)",
                zone5Name: "Upaya Maksimum (90-100%)",
                
                // Konten Edukasi
                sectionHeader1: "Memahami Metode Karvonen",
                content1: "Detak Jantung Maksimum (MHR) yang dihitung dengan rumus dasar (220 - Usia) seringkali tidak akurat karena tidak memperhitungkan tingkat kebugaran individual. Metode <strong>Karvonen</strong> yang kami gunakan jauh lebih akurat karena memasukkan Denyut Jantung Istirahat (RHR) Anda. <br><br> RHR adalah metrik penting yang secara langsung mencerminkan kebugaran kardiovaskular Anda: semakin rendah RHR, semakin efisien jantung Anda memompa darah. Dengan menggunakan RHR, kami menghitung Heart Rate Reserve (HRR) Anda, memungkinkan zona target latihan Anda lebih dipersonalisasi.",
                
                sectionHeader2: "Tujuan Setiap Zona Denyut Jantung",
                zoneIntro: `Setiap zona pelatihan menargetkan sistem energi yang berbeda dalam tubuh, memberikan manfaat kebugaran yang unik.`,
                
                // Manfaat Zona
                zone1Benefit: "<strong>Manfaat:</strong> Membangun fondasi kebugaran dan pemanasan. Meningkatkan daya tahan jantung dasar.",
                zone2Benefit: "<strong>Manfaat:</strong> Zona optimal untuk pembakaran lemak karena tubuh menggunakan lemak sebagai sumber energi utama.",
                zone3Benefit: "<strong>Manfaat:</strong> Meningkatkan kapasitas aerobik dan daya tahan kardiovaskular jangka panjang.",
                zone4Benefit: "<strong>Manfaat:</strong> Membangun kecepatan dan kekuatan. Latihan intensitas tinggi untuk peningkatan performa.",
                zone5Benefit: "<strong>Manfaat:</strong> Interval sangat pendek untuk latihan performa. Jangan pertahankan zona ini terlalu lama.",
                
                // Aksi
                actionStep0: "<strong>Panduan Umum:</strong> Selalu gunakan monitor Denyut Jantung. Jika melebihi batas, kurangi intensitas.",
                actionStep1: "<strong>Pembakaran Lemak (Zona 2):</strong> 45-60 menit berjalan cepat atau bersepeda santai.",
                actionStep2: "<strong>Daya Tahan (Zona 3):</strong> 30-45 menit lari santai atau berenang.",
                actionStep3: "<strong>Performa (Zona 4):</strong> Interval Intensitas Tinggi (HIIT).",
                actionStep4: "<strong>Maksimum (Zona 5):</strong> Hanya untuk atlet berpengalaman (Sprint singkat).",
                actionStep5: "<strong>Pendinginan:</strong> Kembali ke Zona 1 selama 5-10 menit setelah latihan.",

                sectionHeader3: "Keselamatan dan Penggunaan Praktis",
                content3: "Meskipun kalkulator ini menyediakan panduan, selalu utamakan perasaan tubuh Anda. Jika pusing atau sakit dada, berhenti segera.",
                
                safetyHeader: "Pedoman Keselamatan Penting",
                safetyList1: "Konsultasikan dengan dokter sebelum memulai latihan intensif.",
                safetyList2: "Gunakan monitor detak jantung untuk akurasi.",
                safetyList3: "Jangan memaksakan diri mencapai batas maksimum jika tidak nyaman.",
                
                sectionHeader4: "Sumber & Referensi",
                ref1: "Karvonen, J., et al. (1957). The effects of training on heart rate.",
                ref2: "American College of Sports Medicine (ACSM). Guidelines for Exercise Testing.",
                ref3: "Centers for Disease Control and Prevention (CDC). Target Heart Rate.",
            },
            en: {
                appTitle: "Target Heart Rate Calculator",
                headerTitle: "Target Heart Rate Calculator (Karvonen)",
                toolSubtitle: "Calculate the optimal heart rate zones for your cardio workout based on your age and resting heart rate.",
                backToCatalogText: "Back to Tools Catalog",
                labelAge: "Age (Years)",
                labelRHR: "Resting Heart Rate (bpm)",
                rhrHelper: "How to measure: Count beats per minute while fully rested (e.g., first thing in the morning).",
                calculateButton: "Calculate Heart Rate Zones",
                inputError: "Please enter a valid Age and Resting Heart Rate (Minimum age 10 years).",
                placeholderAge: "E.g.: 30",
                placeholderRHR: "E.g.: 65",

                resultTitle: "Your Heart Rate Zones",
                labelMaxHR: "Maximum Heart Rate (MHR)",
                labelRHRResult: "Resting Heart Rate (RHR)",
                zoneHeader: "Training Zones (Beats Per Minute)",
                actionHeader: "How to Use Your Heart Rate Zones",

                zone1Name: "Healthy Heart / Warm-up (50-60%)",
                zone2Name: "Fat Burning (60-70%)",
                zone3Name: "Aerobic / Endurance (70-80%)",
                zone4Name: "Anaerobic / Performance (80-90%)",
                zone5Name: "Maximum Effort (90-100%)",

                sectionHeader1: "Understanding the Karvonen Method",
                content1: "Maximum Heart Rate (MHR) calculated using the basic formula (220 - Age) is often inaccurate. The <strong>Karvonen method</strong> is more precise as it incorporates your Resting Heart Rate (RHR). <br><br> RHR reflects your cardiovascular fitness: the lower your RHR, the more efficient your heart. By using RHR, we calculate Heart Rate Reserve (HRR) for personalized zones.",
                
                sectionHeader2: "The Purpose of Each Heart Rate Zone",
                zoneIntro: `Each training zone targets a different energy system, providing unique fitness benefits.`,
                
                zone1Benefit: "<strong>Benefit:</strong> Builds fitness foundation and warms up the body.",
                zone2Benefit: "<strong>Benefit:</strong> Optimal for fat burning using fat as primary energy.",
                zone3Benefit: "<strong>Benefit:</strong> Improves aerobic capacity and endurance.",
                zone4Benefit: "<strong>Benefit:</strong> Builds speed and strength (High intensity).",
                zone5Benefit: "<strong>Benefit:</strong> Short intervals for performance. Do not sustain long.",
                
                actionStep0: "<strong>General Guide:</strong> Use a Heart Rate monitor. Adjust intensity to stay in zone.",
                actionStep1: "<strong>Fat Burning (Zone 2):</strong> 45-60 mins brisk walking/cycling.",
                actionStep2: "<strong>Endurance (Zone 3):</strong> 30-45 mins steady running/swimming.",
                actionStep3: "<strong>Performance (Zone 4):</strong> High-Intensity Interval Training (HIIT).",
                actionStep4: "<strong>Max Effort (Zone 5):</strong> Experienced athletes only (Sprints).",
                actionStep5: "<strong>Cool-down:</strong> Return to Zone 1 for 5-10 mins.",

                sectionHeader3: "Safety and Practical Use",
                content3: "Always prioritize how your body feels. Stop if you feel dizziness or chest pain.",
                
                safetyHeader: "Important Safety Guidelines",
                safetyList1: "Consult a doctor before starting intensive exercise.",
                safetyList2: "Use a heart rate monitor for real-time tracking.",
                safetyList3: "Never push to absolute max if uncomfortable.",

                sectionHeader4: "Sources & References",
                ref1: "Karvonen, J., et al. (1957). The effects of training on heart rate.",
                ref2: "American College of Sports Medicine (ACSM). Guidelines for Exercise Testing.",
                ref3: "Centers for Disease Control and Prevention (CDC). Target Heart Rate.",
            }
        };

        let currentLang = 'en'; 

        function calculateTHR() {
            const age = parseInt(document.getElementById('ageInput').value);
            const rhr = parseInt(document.getElementById('rhrInput').value);
            const lang = currentLang;
            const resultBox = document.getElementById('resultBox');
            const errorAlert = document.getElementById('errorAlert');

            if (isNaN(age) || age < 10 || isNaN(rhr) || rhr < 30 || rhr > 120) {
                document.getElementById('errorText').textContent = translations[lang].inputError;
                errorAlert.classList.remove('hidden');
                resultBox.classList.remove('visible');
                return;
            }
            
            errorAlert.classList.add('hidden');
            
            const mhr = 220 - age;
            const hrr = mhr - rhr;
            
            document.getElementById('maxHrResult').textContent = `${mhr} bpm`;
            document.getElementById('rhrResult').textContent = `${rhr} bpm`;

            let zoneHTML = '';
            let zoneBenefitHTML = '';

            zonesData.forEach(zone => {
                const minTHR = Math.round((hrr * zone.min) + rhr);
                const maxTHR = Math.round((hrr * zone.max) + rhr);
                
                const zoneNameKey = `zone${zonesData.indexOf(zone) + 1}Name`;
                const zoneBenefitKey = `zone${zonesData.indexOf(zone) + 1}Benefit`;

                const zoneName = translations[lang][zoneNameKey] || zone.name;
                const zoneBenefit = translations[lang][zoneBenefitKey];

                zoneHTML += `
                    <div class="flex justify-between items-center p-3 rounded-lg shadow-sm ${zone.color}">
                        <div>
                            <p class="font-semibold ${zone.text}">${zoneName}</p>
                            <p class="text-xs text-gray-700">${(zone.min * 100).toFixed(0)}% - ${(zone.max * 100).toFixed(0)}% MHR</p>
                        </div>
                        <p class="text-xl font-extrabold ${zone.text}">${minTHR} - ${maxTHR} bpm</p>
                    </div>
                `;
                
                zoneBenefitHTML += `
                    <div class="pt-2">
                        <h4 class="text-sm font-semibold mt-0 text-blue-800">${zoneName}</h4>
                        <p class="text-xs text-gray-700">${zoneBenefit}</p>
                    </div>
                `;
            });
            
            document.getElementById('zoneContainer').innerHTML = zoneHTML;
            document.getElementById('zoneBenefits').innerHTML = zoneBenefitHTML;
            
            document.getElementById('actionSteps').innerHTML = `
                <li>${translations[lang].actionStep0}</li>
                <li>${translations[lang].actionStep1}</li>
                <li>${translations[lang].actionStep2}</li>
                <li>${translations[lang].actionStep3}</li>
                <li>${translations[lang].actionStep4}</li>
                <li>${translations[lang].actionStep5}</li>
            `;
            
            resultBox.classList.add('visible');
        }

        function setLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            
            document.getElementById('appTitle').textContent = t.appTitle;
            document.getElementById('headerTitle').textContent = t.headerTitle;
            document.getElementById('toolSubtitle').textContent = t.toolSubtitle;
            
            document.getElementById('labelAge').textContent = t.labelAge;
            document.getElementById('labelRHR').textContent = t.labelRHR;
            document.getElementById('rhrHelper').textContent = t.rhrHelper;
            document.getElementById('calculateButton').textContent = t.calculateButton;

            document.getElementById('ageInput').placeholder = t.placeholderAge;
            document.getElementById('rhrInput').placeholder = t.placeholderRHR;

            document.getElementById('resultTitle').textContent = t.resultTitle;
            document.getElementById('labelMaxHR').textContent = t.labelMaxHR;
            document.getElementById('labelRHRResult').textContent = t.labelRHRResult;
            document.getElementById('zoneHeader').textContent = t.zoneHeader;
            document.getElementById('actionHeader').textContent = t.actionHeader;
            
            document.getElementById('sectionHeader1').textContent = t.sectionHeader1;
            document.getElementById('content1').innerHTML = t.content1;
            document.getElementById('sectionHeader2').textContent = t.sectionHeader2;
            document.getElementById('zoneIntro').innerHTML = t.zoneIntro;
            
            document.getElementById('sectionHeader3').textContent = t.sectionHeader3;
            document.getElementById('content3').innerHTML = t.content3;
            document.getElementById('safetyHeader').textContent = t.safetyHeader;
            document.getElementById('safetyList').innerHTML = `
                <li>${t.safetyList1}</li>
                <li>${t.safetyList2}</li>
                <li>${t.safetyList3}</li>
            `;
            document.getElementById('sectionHeader4').textContent = t.sectionHeader4;
            document.getElementById('references').innerHTML = `
                <p>${t.ref1}</p>
                <p>${t.ref2}</p>
                <p>${t.ref3}</p>
            `;

            const maxHrResultElement = document.getElementById('maxHrResult');
            if (maxHrResultElement.textContent !== '-- bpm') {
                 calculateTHR();
            }

            document.querySelectorAll('#related-tools-section [data-en]').forEach(el => {
                const newText = el.getAttribute(`data-${lang}`);
                if (newText) el.textContent = newText;
            });
        }

        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'attributes' && mutation.attributeName === 'lang') {
                    setLanguage(document.documentElement.lang || 'en');
                }
            });
        });
        observer.observe(document.documentElement, { attributes: true });

        document.addEventListener('DOMContentLoaded', () => {
            setLanguage('en'); 
        });
    </script>
</body>
</html>