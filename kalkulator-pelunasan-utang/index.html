<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="canonical" href="https://digitaltoolsid.github.io/kalkulator-pelunasan-utang/" />
    
    <meta name="description" content="Debt Payoff Calculator. Compare Snowball vs Avalanche strategies to find the fastest and cheapest way to get out of debt.">
    <meta name="keywords" content="Debt Snowball Calculator, Debt Avalanche Calculator, Debt Payoff Planner, Kalkulator Pelunasan Utang, Strategi Bebas Utang, Manajemen Utang, Cara melunasi hutang menumpuk, how to pay off debt faster, snowball method vs avalanche">
    
    <link rel="icon" href="data:,">

    <link rel="alternate" hreflang="id" href="https://digitaltoolsid.github.io/kalkulator-pelunasan-utang/index.html" />
    <link rel="alternate" hreflang="en" href="https://digitaltoolsid.github.io/kalkulator-pelunasan-utang/index.html" />

    <title id="appTitle">Debt Payoff Priority Calculator</title>
    
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../output.css">
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7M8E7QRYNY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-7M8E7QRYNY');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4885884866232864" crossorigin="anonymous"></script>
    
    <style>
        /* STANDAR TAMPILAN: Hard Lock 50% untuk Desktop */
        @media (min-width: 1024px) {
            .layout-article-fixed {
                width: 50% !important;
                max-width: 50% !important;
                min-width: 50% !important;
                margin-left: auto;
                margin-right: auto;
            }
        }

        /* Transisi Hasil */
        .result-box {
            transition: all 0.5s ease-in-out;
            transform-origin: top center;
            opacity: 0;
            max-height: 0;
            overflow: hidden;
        }
        .result-box.visible {
            opacity: 1;
            max-height: 5000px; 
            padding: 1.5rem; 
        }
        
        /* Tombol Utama */
        .calculate-button {
            box-shadow: 0 4px #15803d; /* green-700 */
            background-color: #16a34a; /* green-600 */
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .calculate-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px #15803d;
            background-color: #22c55e; /* green-500 */
        }
        .calculate-button:active {
            transform: translateY(2px);
            box-shadow: 0 2px #15803d;
        }

        /* Kartu Utang */
        .debt-card {
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            position: relative;
        }
        .delete-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            color: #ef4444;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 600;
        }
        .delete-btn:hover { text-decoration: underline; }
        .section-title {
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
            color: #1f2937;
        }

        /* LOCAL STYLING: REKOMENDASI BOX */
        .recommendation-box {
            background-color: #14532d; /* Green 900 - Hijau Tua */
            color: #ffffff;
            border-radius: 0.5rem;
            padding: 1.25rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>

<body class="bg-gray-50 flex flex-col min-h-screen font-sans">

    <script>window.headerCategory = 'finance';</script>
    <div id="global-header-container"></div>

    <main class="flex-grow p-4 sm:p-8 flex flex-col items-center">
        <div class="w-full layout-article-fixed bg-white shadow-xl rounded-xl p-6 sm:p-8">
            
            <h1 id="headerTitle" class="text-3xl font-extrabold text-gray-900 mb-3 text-center">Debt Payoff Priority Calculator</h1>
           
            <p id="toolSubtitle" class="text-sm text-gray-700 font-medium mb-6 leading-relaxed text-justify">
               </p>
            
            <form id="debtForm" onsubmit="calculateStrategies(event)" class="space-y-6">
                
                <div class="bg-white rounded-lg">
                    <h2 class="section-title" id="headerDebts">1. Your Debts (List all)</h2>
                    <div id="debtListContainer"></div>
                    <button type="button" onclick="addDebtInput()" id="btnAddDebt" class="w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-500 hover:text-blue-600 transition font-semibold mt-2">
                        + Add Another Debt
                    </button>
                </div>

                <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                    <h2 class="text-lg font-bold text-green-700 mb-2" id="headerExtra">2. Monthly Extra Payment</h2>
                    <div class="relative">
                        <label for="extraPayment" class="block text-sm font-medium text-gray-700 mb-1">
                            <span id="labelExtraPayment">Extra Amount</span> <span class="currency-label font-normal text-gray-500">(Rp/$)</span>
                        </label>
                        <input type="text" id="extraPayment" inputmode="numeric" value="500.000" oninput="formatInput(this)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500" required>
                        <p class="text-xs text-gray-500 mt-1" id="descExtraPayment">Amount you can pay on top of total minimum payments.</p>
                    </div>
                </div>

                <button type="submit" id="btnCalculate" class="calculate-button w-full text-white font-semibold py-3 rounded-xl text-lg">
                    Calculate Strategies
                </button>
            </form>

            <div id="errorAlert" class="hidden mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative">
                <span id="errorText">Please complete all fields.</span>
            </div>

            <div id="resultBox" class="result-box mt-8 bg-white border border-gray-200 rounded-xl shadow-lg">
                
                <h3 id="resultHeader" class="text-2xl font-bold mb-6 text-gray-800 border-b pb-2">Payoff Strategy Results</h3>
                
                <div class="mb-8 bg-gray-50 p-5 rounded-lg border-l-4 border-orange-500">
                    <h4 class="text-xl font-bold text-orange-600 flex items-center gap-2 mb-3">
                        <span id="titleAvalanche">Avalanche (Lowest Cost)</span>
                        <span id="badgeAvalanche" class="text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full font-normal">High Interest First</span>
                    </h4>
                    <div id="resultAvalanche" class="text-gray-700 text-sm space-y-2"></div>
                </div>

                <div class="mb-8 bg-gray-50 p-5 rounded-lg border-l-4 border-blue-500">
                    <h4 class="text-xl font-bold text-blue-600 flex items-center gap-2 mb-3">
                        <span id="titleSnowball">Snowball (Psychological Win)</span>
                        <span id="badgeSnowball" class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full font-normal">Smallest Balance First</span>
                    </h4>
                    <div id="resultSnowball" class="text-gray-700 text-sm space-y-2"></div>
                </div>

                <div class="recommendation-box mb-2">
                    <h4 class="font-bold text-lg mb-2 flex items-center gap-2">
                        <span>ðŸ’¡</span> <span id="headerConclusion">Our Recommendation</span>
                    </h4>
                    <p id="finalConclusion" class="text-sm leading-relaxed opacity-95"></p>
                </div>
            </div>
            
            <section class="mt-10 pt-6 border-t border-gray-200 font-sans">
                <h2 id="eduHeader1" class="text-xl font-bold text-gray-800 mb-3">Understanding the Strategies</h2>
                
                <div class="grid grid-cols-1 gap-6 mb-6">
                    <div>
                        <h3 class="text-lg font-bold text-orange-600 mb-2">Avalanche Method</h3>
                        <p id="eduContentAvalanche" class="text-gray-600 text-sm leading-relaxed text-justify">
                            This method focuses on the math. You pay high-interest debts first.
                        </p>
                    </div>
                    <div>
                        <h3 class="text-lg font-bold text-blue-600 mb-2">Snowball Method</h3>
                        <p id="eduContentSnowball" class="text-gray-600 text-sm leading-relaxed text-justify">
                            This method focuses on behavior. You pay smallest debts first.
                        </p>
                    </div>
                </div>

                <h3 id="eduHeader2" class="text-lg font-bold text-gray-800 mb-2">Which One Should You Choose?</h3>
                <p id="eduContentChoice" class="text-gray-600 text-sm leading-relaxed text-justify mb-6"></p>

                <h3 id="eduHeader3" class="text-lg font-bold text-gray-800 mb-2">Disclaimer</h3>
                <p id="eduContentDisclaimer" class="text-gray-600 text-sm leading-relaxed text-justify mb-6"></p>
            </section>
        </div>
    </main>

    <section id="related-tools-section" class="layout-article-fixed w-full px-4 py-8 mb-4">
        <div class="flex items-center mb-5">
            <div class="w-1 h-7 mr-3 bg-green-600 dynamic-bg"></div> 
            <h2 class="text-xl font-bold text-gray-800" data-en="Finance Tools" data-id="Alat Keuangan">Finance Tools</h2>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-10">
            <a href="../kalkulator-anggaran-bulanan/index.html" class="tool-card group block p-4 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 hover:border-green-400">
                <h3 class="text-base font-bold mb-1 group-hover:text-green-700 transition-colors" data-en="Monthly Budget" data-id="Anggaran Bulanan">Monthly Budget</h3>
                <p class="text-xs text-gray-600" data-en="Manage 50/30/20 rule." data-id="Kelola aturan 50/30/20.">Manage 50/30/20 rule.</p>
            </a>
            <a href="../kalkulator-bunga-majemuk/index.html" class="tool-card group block p-4 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 hover:border-green-400">
                <h3 class="text-base font-bold mb-1 group-hover:text-green-700 transition-colors" data-en="Compound Interest" data-id="Bunga Majemuk">Compound Interest</h3>
                <p class="text-xs text-gray-600" data-en="Calculate investment growth." data-id="Hitung pertumbuhan investasi.">Calculate investment growth.</p>
            </a>
            <a href="../kalkulator-dpp-ppn-pph/index.html" class="tool-card group block p-4 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 hover:border-green-400">
                <h3 class="text-base font-bold mb-1 group-hover:text-green-700 transition-colors" data-en="Tax Calculator" data-id="Kalkulator Pajak">Tax Calculator</h3>
                <p class="text-xs text-gray-600" data-en="Calculate VAT & Income Tax." data-id="Hitung PPN & PPh.">Calculate VAT & Income Tax.</p>
            </a>
        </div>

        <div class="border-t border-gray-200 pt-8">
            <h3 class="text-xl font-bold text-gray-800 mb-4" data-en="Related Articles" data-id="Artikel Terkait">Related Articles</h3>
            <ul class="space-y-3">
                <li>
                    <a href="../articles/strategi-mempercepat-pelunasan-utang.html" class="flex items-center text-sm hover:underline group text-blue-600 hover:text-blue-800">
                        <span class="w-1.5 h-1.5 bg-gray-300 rounded-full mr-3 group-hover:bg-green-500"></span>
                        <span data-en="Strategies to Accelerate Debt Repayment" data-id="Strategi Mempercepat Pelunasan Utang">Strategies to Accelerate Debt Repayment</span>
                    </a>
                </li>
                <li>
                    <a href="../kalkulator-anggaran-bulanan/index.html" class="flex items-center text-sm hover:underline group text-blue-600 hover:text-blue-800">
                        <span class="w-1.5 h-1.5 bg-gray-300 rounded-full mr-3 group-hover:bg-green-500"></span>
                        <span data-en="Manage Your Cashflow with 50/30/20 Rule" data-id="Kelola Arus Kas dengan Aturan 50/30/20">Manage Your Cashflow with 50/30/20 Rule</span>
                    </a>
                </li>
            </ul>
        </div>
    </section>
    
    <div id="global-footer-container"></div>
    <script src="../components.js"></script>
    
    <script>
        // **********************************************
        // KONFIGURASI BAHASA & LOGIKA
        // **********************************************
        
        let currentLang = 'en';
        let debtCount = 0;

        const translations = {
            id: {
                appTitle: "Kalkulator Prioritas Pelunasan Utang",
                headerTitle: "Kalkulator Prioritas Pelunasan Utang",
                toolSubtitle: "Pilih strategi terbaik: Lunasi bunga tinggi dulu (Avalanche) atau saldo kecil dulu (Snowball)?",
                
                headerDebts: "1. Daftar Utang Anda",
                btnAddDebt: "+ Tambah Utang Lain",
                lblDebtName: "NAMA UTANG",
                phDebtName: "Cth: Koperasi / Kartu Kredit",
                lblBalance: "SISA POKOK",
                lblMinPay: "ANGSURAN MINIMUM",
                lblTerm: "SISA TENOR (BULAN)",
                lblRateDisplay: "Bunga Efektif:",
                btnDelete: "Hapus",
                
                headerExtra: "2. Pembayaran Ekstra Bulanan",
                labelExtraPayment: "Dana Tambahan",
                descExtraPayment: "Berapa uang tambahan yang bisa Anda sisihkan di luar cicilan wajib?",
                btnCalculate: "Hitung & Bandingkan",
                errorText: "Mohon lengkapi data utang dengan benar.",
                
                resultHeader: "Hasil Analisis",
                titleAvalanche: "Strategi Avalanche (Hemat Bunga)",
                badgeAvalanche: "Fokus Bunga Tinggi",
                titleSnowball: "Strategi Snowball (Menang Psikologis)",
                badgeSnowball: "Fokus Saldo Kecil",
                headerConclusion: "Rekomendasi Kami",
                
                narrativeIntro: "Prioritas pembayaran ekstra diarahkan ke",
                narrativeTargetSnow: "Utang Saldo Terkecil",
                narrativeTargetAva: "Utang Bunga Tertinggi",
                txtSpecifically: "yaitu", 
                narrativeListHeader: "Rincian Pelunasan:",
                textPaidIn: "Lunas bulan ke-",
  
                resLabelKesimpulan: "Kesimpulan:",
                resTextIntro: "Dengan membayar ekstra <b>[EXTRA]</b> untuk <b>[NAME]</b> ([DESC]: <b>[VALUE]</b>):",
                resDescAva: "bunga tertinggi",
                resDescSnow: "saldo terkecil",
                resPoint1: "1. Hemat bunga <b>[SAVINGS]</b> dibanding bayar minimum.",
                resPoint2: "2. Bebas utang dalam <b>[TIME]</b>.",
                resTextForever: "Tidak akan lunas (Bunga > Cicilan)",

                conclIdentical: "Hasil kedua strategi <b>HAMPIR IDENTIK</b>. <br><br><b>Saran Kami:</b> Pilih <b>Snowball</b>. Karena hitungan uangnya sama, lebih baik ambil keuntungan psikologis di mana utang kecil cepat lunas, membuat Anda lebih semangat.",
                conclAvaWin: "Strategi <b>Avalanche</b> lebih hemat uang sebesar <b>[AMOUNT]</b> dibanding Snowball. <br><br><b>Saran Kami:</b> Pilih Avalanche untuk berhemat maksimal.",
                conclSnowWin: "Uniknya, pada kasus Anda, <b>Snowball</b> lebih menguntungkan! Pilih Snowball.",
                conclForever: "PERINGATAN: Utang Anda mungkin tidak akan lunas karena bunga lebih besar dari cicilan.",
                
                eduHeader1: "Memahami Strategi",
                eduContentAvalanche: "Fokus matematika. Urutkan dari bunga tertinggi. Bayar ekstra ke utang bunga paling 'jahat'. Paling hemat uang.",
                eduContentSnowball: "Fokus psikologi. Urutkan dari saldo terkecil. Serang yang kecil dulu agar cepat lunas dan semangat naik.",
                eduHeader2: "Mana yang Harus Dipilih?",
                eduContentChoice: "Disiplin angka? Pilih Avalanche. Butuh motivasi cepat? Pilih Snowball. Yang terbaik adalah yang konsisten Anda jalankan.",
                eduHeader3: "Penting (Disclaimer)",
                eduContentDisclaimer: "Kalkulator berasumsi pembayaran ekstra mengurangi pokok utang (principal reduction). Konfirmasikan ke bank Anda."
            },
            en: {
                appTitle: "Debt Payoff Priority Calculator",
                headerTitle: "Debt Payoff Priority Calculator",
                toolSubtitle: "Determine the best strategy: Pay high-interest debt first (Avalanche) or smallest balance first (Snowball)?",
                
                headerDebts: "1. Your Debts",
                btnAddDebt: "+ Add Another Debt",
                lblDebtName: "DEBT NAME",
                phDebtName: "Ex: Credit Card",
                lblBalance: "BALANCE",
                lblMinPay: "MIN PAYMENT",
                lblTerm: "MONTHS LEFT",
                lblRateDisplay: "Implied Rate:",
                btnDelete: "Remove",
                
                headerExtra: "2. Monthly Extra Payment",
                labelExtraPayment: "Extra Amount",
                descExtraPayment: "How much extra can you pay monthly?",
                btnCalculate: "Calculate",
                errorText: "Please complete all fields.",
                
                resultHeader: "Analysis Results",
                titleAvalanche: "Avalanche (Lowest Cost)",
                badgeAvalanche: "High Interest First",
                titleSnowball: "Snowball (Psychological Win)",
                badgeSnowball: "Smallest Balance First",
                headerConclusion: "Our Recommendation",
                
                narrativeIntro: "Extra payments prioritized to",
                narrativeTargetSnow: "Smallest Balance",
                narrativeTargetAva: "Highest Interest",
                txtSpecifically: "specifically", 
                narrativeListHeader: "Timeline:",
                textPaidIn: "Paid in month",
        
                resLabelKesimpulan: "Conclusion:",
                resTextIntro: "By paying extra <b>[EXTRA]</b> towards <b>[NAME]</b> ([DESC]: <b>[VALUE]</b>):",
                resDescAva: "highest rate",
                resDescSnow: "lowest balance",
                resPoint1: "1. Save <b>[SAVINGS]</b> in interest.",
                resPoint2: "2. Debt free in <b>[TIME]</b>.",
                resTextForever: "Will not pay off",
                
                conclIdentical: "Results are <b>NEARLY IDENTICAL</b>. <br><br><b>Advice:</b> Choose <b>Snowball</b> for the psychological win of seeing debts vanish quickly.",
                conclAvaWin: "<b>Avalanche</b> saves you <b>[AMOUNT]</b> more. <br><br><b>Advice:</b> Choose Avalanche for maximum savings.",
                conclSnowWin: "<b>Snowball</b> is mathematically better in this case! Choose Snowball.",
                conclForever: "WARNING: Interest exceeds payments. Debt may never be paid off.",
                
                eduHeader1: "Understanding Strategies",
                eduContentAvalanche: "Math-focused. Pay highest interest first to save the most money over time.",
                eduContentSnowball: "Behavior-focused. Pay smallest balance first to build momentum and motivation.",
                eduHeader2: "Which to Choose?",
                eduContentChoice: "Disciplined? Avalanche. Need motivation? Snowball. The best plan is the one you stick to.",
                eduHeader3: "Disclaimer",
                eduContentDisclaimer: "Assumes extra payments go to principal. Confirm with your lender."
            }
        };

        // Utility Functions
        function formatNumber(amount) {
            const locale = currentLang === 'id' ? 'id-ID' : 'en-US';
            return new Intl.NumberFormat(locale).format(amount);
        }

        function cleanInput(formattedValue) {
            if (!formattedValue) return 0;
            let clean = formattedValue.toString().replace(/\./g, ''); 
            clean = clean.replace(/,/g, '.');
            return parseFloat(clean) || parseFloat(formattedValue.toString().replace(/\D/g, '')) || 0;
        }
        
        function formatInput(inputElement) {
            let rawValue = inputElement.value.replace(/\D/g, '');
            if (rawValue) {
                inputElement.value = new Intl.NumberFormat('id-ID').format(parseInt(rawValue, 10));
            } else {
                inputElement.value = '';
            }
        }

        function formatBulanTahun(totalMonths) {
            const textMonth = currentLang === 'id' ? 'Bulan' : 'Months';
            const textYear = currentLang === 'id' ? 'Tahun' : 'Years';
            if (totalMonths >= 3600) return currentLang === 'id' ? "> 300 Tahun" : "> 300 Years";
            if (totalMonths < 12) return `${totalMonths} ${textMonth}`;
            const years = Math.floor(totalMonths / 12);
            const months = totalMonths % 12;
            return months === 0 ? `${years} ${textYear}` : `${years} ${textYear} ${months} ${textMonth}`;
        }

        // Calculation Logic
        function calculateImpliedRate(balance, payment, months) {
            if (months <= 0 || balance <= 0 || payment <= 0) return 0;
            if (payment * months <= balance) return 0;
            let low = 0, high = 1, guess = 0.05;
            for (let i = 0; i < 100; i++) {
                guess = (low + high) / 2;
                if (guess === 0) break;
                let factor = (1 - Math.pow(1 + guess, -months)) / guess;
                let calcPV = payment * factor;
                if (Math.abs(calcPV - balance) < 0.000001 * balance) break;
                if (calcPV > balance) low = guess; else high = guess;
            }
            return (guess * 12) * 100;
        }

        function calculateRowRate(id) {
            const row = document.getElementById(`debt-row-${id}`);
            if (!row) return;
            const balance = cleanInput(row.querySelector('.debt-balance').value);
            const minPayment = cleanInput(row.querySelector('.debt-min').value);
            const term = parseInt(row.querySelector('.debt-term').value) || 0;
            const displayEl = document.getElementById(`rate-display-${id}`);
            if (balance > 0 && minPayment > 0 && term > 0) {
                 const rate = calculateImpliedRate(balance, minPayment, term);
                 if (rate > 0 && rate < 1000) {
                     displayEl.textContent = rate.toFixed(2) + "% p.a.";
                     displayEl.className = "font-bold text-green-600";
                 } else {
                     displayEl.textContent = "Invalid";
                     displayEl.className = "font-bold text-red-500";
                 }
            } else {
                displayEl.textContent = "-";
                displayEl.className = "text-gray-400";
            }
        }

        function addDebtInput(name = '', balance = '', payment = '', term = '') {
            debtCount++;
            const container = document.getElementById('debtListContainer');
            const t = translations[currentLang];
            const div = document.createElement('div');
            div.className = 'debt-card';
            div.id = `debt-row-${debtCount}`;
            div.innerHTML = `
                <div onclick="removeDebt(${debtCount})" class="delete-btn">${t.btnDelete}</div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-1 lbl-name">${t.lblDebtName}</label>
                        <input type="text" class="debt-name w-full p-2 border border-gray-300 rounded focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none" placeholder="${t.phDebtName}" value="${name}">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-1"><span class="lbl-balance">${t.lblBalance}</span> <span class="text-gray-400 font-normal">(Rp/$)</span></label>
                        <input type="text" class="debt-balance w-full p-2 border border-gray-300 rounded outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500" oninput="formatInput(this); calculateRowRate(${debtCount})" placeholder="0" value="${balance}">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-1"><span class="lbl-minpay">${t.lblMinPay}</span> <span class="text-gray-400 font-normal">(Rp/$)</span></label>
                        <input type="text" class="debt-min w-full p-2 border border-gray-300 rounded outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500" oninput="formatInput(this); calculateRowRate(${debtCount})" placeholder="0" value="${payment}">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 uppercase mb-1 lbl-term">${t.lblTerm}</label>
                        <input type="number" class="debt-term w-full p-2 border border-gray-300 rounded outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500" oninput="calculateRowRate(${debtCount})" placeholder="0" value="${term}">
                        <p class="text-xs mt-1 text-right"><span class="lbl-ratedisplay text-gray-500">${t.lblRateDisplay}</span> <span id="rate-display-${debtCount}" class="text-gray-400">-</span></p>
                    </div>
                </div>`;
            container.appendChild(div);
            if(balance && payment && term) calculateRowRate(debtCount);
        }

        function removeDebt(id) {
            const row = document.getElementById(`debt-row-${id}`);
            if (row) row.remove();
        }

        function calculateStrategies(event) {
            if(event) event.preventDefault();
            const debtRows = document.querySelectorAll('.debt-card');
            let debts = [];
            let hasError = false;
            const t = translations[currentLang];
            
            debtRows.forEach(row => {
                const name = row.querySelector('.debt-name').value || (currentLang === 'id' ? 'Utang' : 'Debt');
                const balance = cleanInput(row.querySelector('.debt-balance').value);
                const minPayment = cleanInput(row.querySelector('.debt-min').value);
                const term = parseInt(row.querySelector('.debt-term').value) || 0;
                if (balance > 0 && minPayment > 0 && term > 0) {
                    debts.push({ name, balance, minPayment, term, rate: calculateImpliedRate(balance, minPayment, term), originalBalance: balance });
                } else if (balance > 0 || minPayment > 0 || term > 0) hasError = true;
            });

            if (debts.length === 0 || hasError) {
                document.getElementById('errorAlert').classList.remove('hidden');
                document.getElementById('resultBox').classList.remove('visible');
                return;
            }
            document.getElementById('errorAlert').classList.add('hidden');
            
            const extra = cleanInput(document.getElementById('extraPayment').value);
            const baseline = simulatePayoff(debts.map(d=>({...d})), 0);
            
            const snowDebts = debts.map(d=>({...d})).sort((a,b) => a.balance - b.balance || b.rate - a.rate);
            const snowRes = simulatePayoff(snowDebts, extra);
            
            const avaDebts = debts.map(d=>({...d})).sort((a,b) => b.rate - a.rate || a.balance - b.balance);
            const avaRes = simulatePayoff(avaDebts, extra);

            renderNarrative('Avalanche', avaRes, baseline, avaDebts[0], extra);
            renderNarrative('Snowball', snowRes, baseline, snowDebts[0], extra);
            renderConclusion(snowRes, avaRes);
            
            document.getElementById('resultBox').classList.add('visible');
        }

        function simulatePayoff(debts, extra) {
            let totalMin = debts.reduce((sum,d) => sum + d.minPayment, 0);
            let commitment = totalMin + extra;
            let current = debts.map(d => ({...d, cur: d.balance, mRate: d.rate/1200, isPaid: false}));
            let months = 0, interest = 0, details = [];
            
            while (current.some(d => !d.isPaid) && months < 3600) {
                months++;
                let cash = commitment;
                current.forEach(d => { if(!d.isPaid) { let int = d.cur * d.mRate; d.cur += int; interest += int; }});
                current.forEach(d => { if(!d.isPaid) { let pay = Math.min(d.cur, d.minPayment); d.cur -= pay; cash -= pay; }});
                for(let d of current) { if(!d.isPaid && cash > 0) { let pay = Math.min(d.cur, cash); d.cur -= pay; cash -= pay; }}
                current.forEach(d => { if(!d.isPaid && d.cur <= 100) { d.isPaid = true; d.cur = 0; details.push({name:d.name, month:months}); }});
            }
            return { totalMonths: months, totalInterest: interest, details, isFullyPaid: !current.some(d => !d.isPaid) };
        }

        function renderNarrative(type, res, base, target, extra) {
            const t = translations[currentLang];
            const container = document.getElementById(`result${type}`);
            const savings = base.totalInterest - res.totalInterest;
            const targetText = type === 'Snowball' ? t.narrativeTargetSnow : t.narrativeTargetAva;
            const targetVal = type === 'Avalanche' ? target.rate.toFixed(2)+"%" : formatNumber(target.originalBalance);
            const desc = type === 'Avalanche' ? t.resDescAva : t.resDescSnow;
            const timeText = res.isFullyPaid ? formatBulanTahun(res.totalMonths) : `<span class="text-red-500">${t.resTextForever}</span>`;

            let html = `<p>${t.narrativeIntro} <b>${targetText}</b> (${t.txtSpecifically}: ${target.name}).</p>`;
            html += `<p class="font-bold text-xs text-gray-500 mt-2 uppercase">${t.narrativeListHeader}</p><ul class="list-disc ml-5 text-sm mb-3">`;
            res.details.forEach(d => html += `<li><b>${d.name}:</b> ${t.textPaidIn} <b>${d.month}</b>.</li>`);
            html += `</ul>`;
            
            const intro = t.resTextIntro.replace('[EXTRA]', formatNumber(extra)).replace('[NAME]', target.name).replace('[DESC]', desc).replace('[VALUE]', targetVal);
            html += `<div class="mt-3 pt-3 border-t border-gray-200 text-sm space-y-1">
                <p>${intro}</p>
                <p>âœ… ${t.resPoint1.replace('[SAVINGS]', formatNumber(Math.max(0, Math.round(savings))))}</p>
                <p>âœ… ${t.resPoint2.replace('[TIME]', timeText)}</p>
            </div>`;
            container.innerHTML = html;
        }

        function renderConclusion(snow, ava) {
            const el = document.getElementById('finalConclusion');
            const t = translations[currentLang];
            
            if (!snow.isFullyPaid || !ava.isFullyPaid) {
                el.innerHTML = t.conclForever;
                el.className = "text-sm leading-relaxed font-bold text-yellow-300"; 
                return;
            }

            const diff = Math.abs(ava.totalInterest - snow.totalInterest);
            if (diff < 1000) {
                el.innerHTML = t.conclIdentical;
            } else if (ava.totalInterest < snow.totalInterest) {
                el.innerHTML = t.conclAvaWin.replace('[AMOUNT]', formatNumber(Math.round(diff)));
            } else {
                el.innerHTML = t.conclSnowWin;
            }
            // Reset text color (Opacity 95, white dari parent container)
            el.className = "text-sm leading-relaxed opacity-95";
        }

        function setLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            
            // Basic Text Updates
            ['appTitle', 'headerTitle', 'headerDebts', 'btnAddDebt', 'headerExtra', 'labelExtraPayment', 'descExtraPayment', 
             'btnCalculate', 'errorText', 'resultHeader', 'titleAvalanche', 'badgeAvalanche', 'titleSnowball', 'badgeSnowball', 
             'headerConclusion', 'eduHeader1', 'eduContentAvalanche', 'eduContentSnowball', 'eduHeader2', 'eduContentChoice', 
             'eduHeader3', 'eduContentDisclaimer'].forEach(id => {
                 const el = document.getElementById(id);
                 if(el) el.textContent = t[id];
            });
            document.getElementById('toolSubtitle').innerHTML = t.toolSubtitle;
            
            document.querySelectorAll('.lbl-name').forEach(e => e.textContent = t.lblDebtName);
            document.querySelectorAll('.debt-name').forEach(e => e.placeholder = t.phDebtName);
            document.querySelectorAll('.lbl-balance').forEach(e => e.textContent = t.lblBalance);
            document.querySelectorAll('.lbl-minpay').forEach(e => e.textContent = t.lblMinPay);
            document.querySelectorAll('.lbl-term').forEach(e => e.textContent = t.lblTerm);
            document.querySelectorAll('.lbl-ratedisplay').forEach(e => e.textContent = t.lblRateDisplay);
            document.querySelectorAll('.delete-btn').forEach(e => e.textContent = t.btnDelete);

            // Related Articles & Tools
            document.querySelectorAll('#related-tools-section [data-en]').forEach(el => {
                const text = el.getAttribute(`data-${lang}`);
                if (text) el.textContent = text;
            });

            if(document.getElementById('resultBox').classList.contains('visible')) calculateStrategies({preventDefault:()=>{}});
        }

        const observer = new MutationObserver((mutations) => {
            mutations.forEach((m) => {
                if (m.type === 'attributes' && m.attributeName === 'lang') {
                    setLanguage(document.documentElement.lang || 'en');
                }
            });
        });
        observer.observe(document.documentElement, { attributes: true });

        document.addEventListener('DOMContentLoaded', () => {
            setLanguage(document.documentElement.lang || 'en');
            setTimeout(() => {
                const isId = document.documentElement.lang === 'id';
                addDebtInput(isId?"Koperasi":"Loan", "5000000", "500000", "12");
                addDebtInput(isId?"Kartu Kredit":"Credit Card", "30000000", "1500000", "26");
            }, 100);
        });

    </script>
</body>
</html>