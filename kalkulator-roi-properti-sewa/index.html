<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="data:,">
    
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../output.css">
    
    <link rel="canonical" href="https://digitaltoolsid.github.io/kalkulator-roi-properti-sewa/" />
    
    <meta name="description" content="Rental Property ROI Calculator. Calculate Cash Flow, Cap Rate, and Cash on Cash Return accurately. Compare Mortgage vs Cash purchase scenarios for real estate investment.">
    <meta name="keywords" content="Rental Property ROI Calculator, Real Estate Investment Analysis, Cap Rate Calculator, Cash on Cash Return, Investment Property Cash Flow, Kalkulator ROI Properti, Hitung Keuntungan Sewa Rumah, Investasi Kos-kosan, Simulasi Bisnis Kontrakan, Analisis Balik Modal Properti, cara hitung keuntungan beli rumah untuk disewakan, apakah investasi properti menguntungkan, hitung cash flow kontrakan vs kpr">
    
    <title id="appTitle">Rental Property ROI Calculator</title>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7M8E7QRYNY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-7M8E7QRYNY');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4885884866232864" crossorigin="anonymous"></script>

    <style>
        /* STANDAR TAMPILAN: Hard Lock 50% Desktop */
        @media (min-width: 1024px) {
            .layout-article-fixed {
                width: 50% !important;
                max-width: 50% !important;
                min-width: 50% !important;
                margin-left: auto;
                margin-right: auto;
            }
        }

        /* CSS LOKAL: Animasi & Override */
        .result-box {
            transition: all 0.5s ease-in-out;
            transform-origin: top center;
            opacity: 0;
            max-height: 0;
            overflow: hidden;
        }
        .result-box.visible {
            opacity: 1;
            max-height: 3000px; 
            padding: 1.5rem; 
        }
        
        /* Override warna tombol finance */
        .calculate-button {
            background-color: #16a34a !important; /* Green-600 */
            color: white !important;
        }
        .calculate-button:hover {
            background-color: #15803d !important; /* Green-700 */
        }

        .section-title {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            font-weight: 700;
            color: #4a5568;
        }
        .section-title::after {
            content: "";
            flex: 1;
            height: 1px;
            background-color: #e2e8f0;
            margin-left: 1rem;
        }
    </style>
</head>

<body class="bg-gray-50 flex flex-col min-h-screen font-sans">

    <script>window.headerCategory = 'finance';</script>
    <div id="global-header-container"></div>

    <main class="flex-grow p-4 sm:p-8 flex justify-center">
        <div class="layout-article-fixed w-full max-w-2xl bg-white shadow-xl rounded-xl p-6 sm:p-8">
            
            <h1 id="headerTitle" class="text-3xl font-extrabold text-gray-900 mb-3">Rental Property ROI Calculator</h1>
            <p id="toolSubtitle" class="text-sm text-gray-700 font-medium mb-6 leading-relaxed text-justify">
            </p>
            
            <form id="roiForm" onsubmit="calculateROI(event)" class="space-y-6">
                
                <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                    <div class="flex items-center justify-between">
                        <label class="text-sm font-bold text-gray-700" id="labelPaymentMethod">Payment Method</label>
                        <div class="flex items-center space-x-4">
                            <label class="inline-flex items-center cursor-pointer">
                                <input type="radio" name="paymentType" value="loan" class="form-radio text-green-600" checked onchange="toggleLoanInputs()">
                                <span class="ml-2 text-sm text-gray-700" id="optionLoan">Loan (KPR)</span>
                            </label>
                            <label class="inline-flex items-center cursor-pointer">
                                <input type="radio" name="paymentType" value="cash" class="form-radio text-green-600" onchange="toggleLoanInputs()">
                                <span class="ml-2 text-sm text-gray-700" id="optionCash">Cash (Tunai)</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                    <div class="section-title text-green-700" id="headerPurchase">1. Purchase Details</div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="relative md:col-span-2">
                            <label for="propertyPrice" class="block text-sm font-medium text-gray-700 mb-1" id="labelPropertyPrice">Property Price</label>
                            <input type="text" id="propertyPrice" inputmode="numeric" value="1.000.000.000" oninput="formatInput(this)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 text-sm" required>
                            <p class="text-xs text-gray-500 mt-1" id="descPropertyPrice">Total harga pembelian properti.</p>
                        </div>
                        
                        <div id="loanInputsContainer" class="contents">
                            <div class="relative">
                                <label for="downPayment" class="block text-sm font-medium text-gray-700 mb-1" id="labelDownPayment">Down Payment (%)</label>
                                <input type="number" id="downPayment" min="0" max="100" step="1" value="20" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 text-sm">
                                <p class="text-xs text-gray-500 mt-1" id="descDownPayment">Persentase uang muka.</p>
                            </div>
                            <div class="relative">
                                <label for="interestRate" class="block text-sm font-medium text-gray-700 mb-1" id="labelInterestRate">Interest Rate (%)</label>
                                <input type="number" id="interestRate" min="0" step="0.1" value="9.5" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 text-sm">
                                <p class="text-xs text-gray-500 mt-1" id="descInterestRate">Suku bunga tahunan.</p>
                            </div>
                            <div class="relative">
                                <label for="loanTerm" class="block text-sm font-medium text-gray-700 mb-1" id="labelLoanTerm">Loan Term (Years)</label>
                                <input type="number" id="loanTerm" min="1" max="30" value="15" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 text-sm">
                                <p class="text-xs text-gray-500 mt-1" id="descLoanTerm">Durasi pinjaman.</p>
                            </div>
                        </div>

                        <div class="relative">
                            <label for="closingCosts" class="block text-sm font-medium text-gray-700 mb-1" id="labelClosingCosts">Closing/Repair Costs</label>
                            <input type="text" id="closingCosts" inputmode="numeric" value="50.000.000" oninput="formatInput(this)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 text-sm">
                            <p class="text-xs text-gray-500 mt-1" id="descClosingCosts">Biaya notaris, pajak, renovasi awal.</p>
                        </div>
                    </div>
                </div>

                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                    <div class="section-title text-green-700" id="headerIncome">2. Income & Expenses</div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="relative">
                            <label for="monthlyRent" class="block text-sm font-medium text-gray-700 mb-1" id="labelMonthlyRent">Monthly Rental Income</label>
                            <input type="text" id="monthlyRent" inputmode="numeric" value="10.000.000" oninput="formatInput(this)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 text-sm" required>
                            <p class="text-xs text-gray-500 mt-1" id="descMonthlyRent">Pendapatan sewa kotor.</p>
                        </div>
                        <div class="relative">
                            <label for="vacancyRate" class="block text-sm font-medium text-gray-700 mb-1" id="labelVacancyRate">Vacancy Rate (%)</label>
                            <input type="number" id="vacancyRate" min="0" max="100" step="1" value="5" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 text-sm">
                            <p class="text-xs text-gray-500 mt-1" id="descVacancyRate">Estimasi kekosongan/tahun.</p>
                        </div>
                        <div class="relative md:col-span-2">
                            <label for="monthlyExpenses" class="block text-sm font-medium text-gray-700 mb-1" id="labelMonthlyExpenses">Total Monthly Expenses</label>
                            <input type="text" id="monthlyExpenses" inputmode="numeric" value="1.500.000" oninput="formatInput(this)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 text-sm" required>
                            <p class="text-xs text-gray-500 mt-1" id="descMonthlyExpenses">Biaya operasional (IPL, PBB, Maintenance). <b>Jangan masukkan cicilan KPR.</b></p>
                        </div>
                    </div>
                </div>

                <button type="submit" id="calculateButton" class="calculate-button w-full text-white font-bold py-3 rounded-xl shadow-md transition duration-300 ease-in-out transform hover:scale-[1.01] focus:outline-none focus:ring-4 focus:ring-green-500 focus:ring-opacity-50">
                    Calculate ROI
                </button>
                
                <div id="errorAlert" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
                    <span id="errorText" class="block sm:inline"></span>
                </div>
            </form>

            <div id="resultBox" class="result-box mt-6 bg-green-50 border border-green-200 rounded-xl shadow-lg">
                
                <h3 id="resultHeader" class="text-xl font-bold mb-4 text-gray-800 border-b pb-2 border-green-300">Investment Analysis</h3>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6 text-center">
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-green-100">
                        <p id="labelCashFlow" class="text-xs font-bold text-gray-500 uppercase tracking-wider">Monthly Cash Flow</p>
                        <p id="resultCashFlow" class="text-2xl font-extrabold text-green-600 mt-1">0</p>
                        <p class="text-[10px] text-gray-400 mt-1" id="descCashFlowResult">Income - Expenses - Mortgage</p>
                    </div>
                    
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-green-100">
                        <p id="labelCoC" class="text-xs font-bold text-gray-500 uppercase tracking-wider">Cash on Cash Return</p>
                        <p id="resultCoC" class="text-2xl font-extrabold text-blue-600 mt-1">0%</p>
                        <p class="text-[10px] text-gray-400 mt-1" id="descCoCResult">Annual Cash Flow / Investment</p>
                    </div>
                    
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-green-100 sm:col-span-2">
                        <p id="labelCapRate" class="text-xs font-bold text-gray-500 uppercase tracking-wider">Cap Rate (Tanpa Hutang)</p>
                        <p id="resultCapRate" class="text-2xl font-extrabold text-purple-600 mt-1">0%</p>
                        <p class="text-[10px] text-gray-400 mt-1" id="descCapRateResult">NOI / Purchase Price</p>
                    </div>
                </div>

                <div class="mb-6 bg-white p-4 rounded-lg border border-green-200">
                    <h4 id="headerInterpretation" class="text-sm font-bold text-gray-800 mb-2">Interpretation</h4>
                    <p id="textInterpretation" class="text-sm text-gray-700 leading-relaxed text-justify">
                    </p>
                </div>

                <h4 id="detailHeader" class="text-lg font-bold text-gray-800 mb-3">Annual Breakdown</h4>
                <div class="bg-white rounded-lg shadow overflow-hidden border border-gray-200 text-sm">
                    <div class="p-3 grid grid-cols-2 gap-4 border-b border-gray-100">
                        <div class="text-gray-600" id="labelGrossIncome">Gross Income</div>
                        <div class="text-right font-semibold" id="valGrossIncome">0</div>
                    </div>
                    <div class="p-3 grid grid-cols-2 gap-4 border-b border-gray-100 bg-gray-50">
                        <div class="text-gray-600" id="labelTotalExpenses">Operating Expenses</div>
                        <div class="text-right font-semibold text-red-500" id="valTotalExpenses">0</div>
                    </div>
                    <div class="p-3 grid grid-cols-2 gap-4 border-b border-gray-100 font-bold">
                        <div class="text-gray-800" id="labelNOI">Net Operating Income (NOI)</div>
                        <div class="text-right text-blue-600" id="valNOI">0</div>
                    </div>
                    <div class="p-3 grid grid-cols-2 gap-4 border-b border-gray-100 bg-gray-50" id="rowMortgage">
                        <div class="text-gray-600" id="labelMortgage">Mortgage Payments</div>
                        <div class="text-right font-semibold text-red-500" id="valMortgage">0</div>
                    </div>
                    <div class="p-3 grid grid-cols-2 gap-4 font-extrabold bg-green-100">
                        <div class="text-green-800" id="labelTotalCashFlow">Total Annual Cash Flow</div>
                        <div class="text-right text-green-800" id="valTotalCashFlow">0</div>
                    </div>
                </div>
                
                <div class="mt-4 text-xs text-gray-500 text-center" id="investmentNote">
                    Total Initial Investment: <span id="valTotalInvestment" class="font-bold">0</span>
                </div>

            </div>
            
            <section class="mt-8 pt-4 border-t border-gray-200 font-sans">
                <h2 id="sectionHeader1" class="text-xl font-bold text-gray-800 mb-3">Understanding Rental Property Metrics</h2>
                <p id="content1" class="text-gray-600 text-sm leading-relaxed text-justify mb-6"></p>

                <h3 id="sectionHeader2" class="text-lg font-bold text-gray-800 mb-2">Cash Flow vs. Appreciation</h3>
                <p id="content2" class="text-gray-600 text-sm leading-relaxed text-justify mb-6"></p>

                <h3 id="sectionHeader3" class="text-lg font-bold text-gray-800 mb-2">What is a Good ROI?</h3>
                <ul class="text-gray-600 text-sm leading-relaxed text-justify mb-6 list-disc ml-6 space-y-1">
                    <li id="tip1"></li>
                    <li id="tip2"></li>
                    <li id="tip3"></li>
                </ul>

                <h3 id="sectionHeader4" class="text-lg font-bold text-gray-800 mb-2">Disclaimer</h3>
                <p id="content4" class="text-gray-600 text-sm leading-relaxed text-justify mb-6"></p>
            </section>

        </div>
    </main>

    <section id="related-tools-section" class="layout-article-fixed w-full max-w-2xl mx-auto px-4 py-8 mb-4">
        <div class="flex items-center mb-5">
            <div class="w-1 h-7 mr-3 bg-green-600 dynamic-bg"></div> 
            <h2 class="text-xl font-bold text-gray-800" data-en="Related Finance Tools" data-id="Alat Keuangan Terkait">Related Finance Tools</h2>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-10">
            <a href="../kalkulator-kpr/index.html" class="tool-card group block p-4 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 hover:border-green-400">
                <h3 class="text-base font-bold mb-1 group-hover:text-green-700 transition-colors" data-en="Mortgage Calculator (KPR)" data-id="Kalkulator KPR Estimasi">Mortgage Calculator (KPR)</h3>
                <p class="text-xs text-gray-600" data-en="Calculate monthly mortgage payments." data-id="Hitung estimasi cicilan bulanan rumah.">Calculate monthly mortgage payments.</p>
            </a>
            <a href="../kalkulator-dpp-ppn-pph/index.html" class="tool-card group block p-4 bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 hover:border-green-400">
                <h3 class="text-base font-bold mb-1 group-hover:text-green-700 transition-colors" data-en="Tax Calculator (PPN & PPh)" data-id="Kalkulator Pajak (PPN & PPh)">Tax Calculator (PPN & PPh)</h3>
                <p class="text-xs text-gray-600" data-en="Calculate tax exclusions and inclusions." data-id="Hitung DPP, PPN, dan PPh 23/21.">Calculate tax exclusions and inclusions.</p>
            </a>
        </div>
        
        <div class="border-t border-gray-100 pt-8">
            <h3 class="text-xl font-bold text-gray-800 mb-4" data-en="Related Articles:" data-id="Artikel Terkait:">Related Articles:</h3>
            <ul class="space-y-3">
                <li>
                    <a href="../articles/klausul-perpajakan-kontrak.html" class="flex items-center text-sm hover:underline group text-blue-600 hover:text-blue-800">
                        <span class="w-1.5 h-1.5 bg-gray-300 rounded-full mr-3 group-hover:bg-green-500"></span>
                        <span data-en="Important Tax Clauses in Contracts" data-id="Klausul Penting Perpajakan dalam Kontrak">Important Tax Clauses in Contracts</span>
                    </a>
                </li>
            </ul>
        </div>
    </section>
    
    <div id="global-footer-container"></div>
    <script src="../components.js"></script>
    
    <script>
        // **********************************************
        // LOGIKA KALKULATOR ROI PROPERTI SEWA (UPDATED)
        // **********************************************

        const translations = {
            id: {
                appTitle: "Kalkulator ROI Properti Sewa",
                headerTitle: "Kalkulator ROI Properti Sewa",
                toolSubtitle: "Analisis lengkap keuntungan investasi properti Anda. Hitung Cash Flow dan ROI, baik untuk pembelian secara <b>Kredit (KPR)</b> maupun <b>Tunai Keras (Cash)</b>.",
                // Back to Catalog dihapus dari tampilan HTML, string dibiarkan di JS agar aman
                backToCatalogText: "Kembali ke Katalog Alat",
                // Payment Method
                labelPaymentMethod: "Metode Pembayaran",
                optionLoan: "Kredit (KPR)",
                optionCash: "Tunai (Cash)",
                // Input
                headerPurchase: "1. Detail Pembelian",
                labelPropertyPrice: "Harga Properti",
                descPropertyPrice: "Total harga pembelian properti.",
                labelDownPayment: "Uang Muka / DP (%)",
                descDownPayment: "Persentase uang muka dari harga properti.",
                labelInterestRate: "Suku Bunga (%)",
                descInterestRate: "Suku bunga KPR/Pinjaman tahunan.",
                labelLoanTerm: "Tenor Pinjaman (Tahun)",
                descLoanTerm: "Durasi pinjaman dalam tahun.",
                labelClosingCosts: "Biaya Awal / Renovasi",
                descClosingCosts: "Biaya notaris, pajak pembeli, renovasi awal, dll.",
                
                headerIncome: "2. Pendapatan Sewa & Pengeluaran",
                labelMonthlyRent: "Pendapatan Sewa Bulanan",
                descMonthlyRent: "Ekspektasi pendapatan sewa kotor.",
                labelVacancyRate: "Tingkat Kekosongan (%)",
                descVacancyRate: "Persentase waktu properti tidak ada penyewa.",
                labelMonthlyExpenses: "Total Pengeluaran Bulanan",
                descMonthlyExpenses: "Biaya operasional (IPL, PBB, Maintenance). <b>Jangan masukkan cicilan KPR.</b>",
                calculateButton: "Hitung Analisis",
                inputError: "Mohon masukkan nilai yang valid.",
                
                // Result
                resultHeader: "Analisis Investasi",
                labelCashFlow: "Arus Kas Bulanan (Cash Flow)",
                descCashFlowResult: "Pendapatan Bersih Bulanan",
                labelCoC: "Cash on Cash Return",
                descCoCResult: "Efisiensi Modal Tunai Anda",
                labelCapRate: "Cap Rate (Tanpa Hutang)",
                descCapRateResult: "Imbal hasil properti murni (NOI / Harga).",
                
                headerInterpretation: "Interpretasi Hasil",
                interpretationPositive: "<b>Investasi Positif.</b> Properti ini menghasilkan uang tunai setiap bulan setelah menutupi semua biaya operasional (dan cicilan KPR jika ada).",
                interpretationNegative: "<b>Investasi Negatif (Cash Flow).</b> Pendapatan sewa tidak cukup menutupi biaya bulanan. Anda harus mengeluarkan uang pribadi setiap bulan.",
                
                // Breakdown
                detailHeader: "Rincian Tahunan",
                labelGrossIncome: "Pendapatan Kotor",
                labelTotalExpenses: "Biaya Operasional",
                labelNOI: "Pendapatan Operasional Bersih (NOI)",
                labelMortgage: "Pembayaran KPR",
                labelTotalCashFlow: "Total Arus Kas",
                investmentNote: "Total Modal Awal (Cash Dibutuhkan): ",
                
                // Edukasi
                sectionHeader1: "Memahami Metrik Properti",
                content1: "<b>Cash Flow</b> adalah uang sisa di kantong Anda setiap bulan. <b>Cash on Cash Return</b> adalah persentase keuntungan dibandingkan uang tunai yang Anda keluarkan (DP + Biaya Awal). <b>Cap Rate</b> adalah metrik untuk membandingkan performa properti seolah-olah dibeli tunai, tanpa pengaruh bunga bank.",
                sectionHeader2: "Cash vs KPR",
                content2: "Membeli tunai (Cash) menghilangkan risiko bunga bank dan meningkatkan Cash Flow, namun membutuhkan modal besar. Membeli dengan KPR (Leverage) memungkinkan Anda membeli properti dengan modal lebih kecil (hanya DP), namun Cash Flow akan terpotong cicilan bank.",
                sectionHeader3: "Indikator ROI yang Bagus?",
                tip1: "Cash on Cash Return: Targetkan di atas 8% - 12%.",
                tip2: "Cash Flow: Harus Positif (kecuali Anda mengincar Capital Gain tinggi).",
                tip3: "Cap Rate: Semakin tinggi semakin baik (biasanya 5% - 10% di area berkembang).",
                sectionHeader4: "Disclaimer",
                content4: "Hasil ini adalah estimasi. Pajak, biaya tak terduga, dan vakansi dapat berubah sewaktu-waktu.",
            },
            en: {
                appTitle: "Rental Property ROI Calculator",
                headerTitle: "Rental Property ROI Calculator",
                toolSubtitle: "Complete analysis of your property investment. Calculate Cash Flow and ROI for both <b>Mortgage (Loan)</b> and <b>Cash Purchase</b> scenarios.",
                backToCatalogText: "Back to Tools Catalog",
                // Payment Method
                labelPaymentMethod: "Payment Method",
                optionLoan: "Loan (Mortgage)",
                optionCash: "Cash (No Loan)",
                // Input
                headerPurchase: "1. Purchase Details",
                labelPropertyPrice: "Property Price",
                descPropertyPrice: "Total purchase price.",
                labelDownPayment: "Down Payment (%)",
                descDownPayment: "Percentage of price paid upfront.",
                labelInterestRate: "Interest Rate (%)",
                descInterestRate: "Annual mortgage interest rate.",
                labelLoanTerm: "Loan Term (Years)",
                descLoanTerm: "Duration of the loan.",
                labelClosingCosts: "Closing/Repair Costs",
                descClosingCosts: "Notary fees, taxes, initial repairs, etc.",
                
                headerIncome: "2. Income & Expenses",
                labelMonthlyRent: "Monthly Rental Income",
                descMonthlyRent: "Expected gross monthly rent.",
                labelVacancyRate: "Vacancy Rate (%)",
                descVacancyRate: "Time property sits empty.",
                labelMonthlyExpenses: "Total Monthly Expenses",
                descMonthlyExpenses: "Operating costs (HOA, Tax, Maintenance). <b>Do not include mortgage.</b>",
                calculateButton: "Calculate Analysis",
                inputError: "Please enter valid values.",
                
                // Result
                resultHeader: "Investment Analysis",
                labelCashFlow: "Monthly Cash Flow",
                descCashFlowResult: "Net Monthly Income",
                labelCoC: "Cash on Cash Return",
                descCoCResult: "Return on your actual cash invested",
                labelCapRate: "Cap Rate (Unleveraged)",
                descCapRateResult: "Pure property yield (NOI / Price).",
                
                headerInterpretation: "Interpretation",
                interpretationPositive: "<b>Positive Investment.</b> This property generates extra cash every month after covering all operating expenses (and mortgage payments if any).",
                interpretationNegative: "<b>Negative Cash Flow.</b> Rental income is not enough to cover monthly costs. You will be paying out of pocket.",
                
                // Breakdown
                detailHeader: "Annual Breakdown",
                labelGrossIncome: "Gross Income",
                labelTotalExpenses: "Operating Expenses",
                labelNOI: "Net Operating Income (NOI)",
                labelMortgage: "Mortgage Payments",
                labelTotalCashFlow: "Total Cash Flow",
                investmentNote: "Total Initial Investment (Cash Needed): ",
                
                // Edukasi
                sectionHeader1: "Understanding Metrics",
                content1: "<b>Cash Flow</b> is money left in your pocket. <b>Cash on Cash Return</b> is your ROI based on actual cash invested. <b>Cap Rate</b> evaluates the property's performance as if bought with all cash, ignoring loan terms.",
                sectionHeader2: "Cash vs Loan",
                content2: "Buying with Cash eliminates interest risk and maximizes Cash Flow. Buying with a Loan (Leverage) allows you to acquire property with less capital (Down Payment only), but your monthly Cash Flow will be reduced by mortgage payments.",
                sectionHeader3: "What is a Good ROI?",
                tip1: "Cash on Cash Return: Target 8% - 12% or higher.",
                tip2: "Cash Flow: Must be Positive (unless relying heavily on appreciation).",
                tip3: "Cap Rate: Higher is better (typically 5% - 10%).",
                sectionHeader4: "Disclaimer",
                content4: "These results are estimates. Actual taxes, maintenance costs, and vacancy rates vary.",
            }
        };

        let currentLang = 'en';

        // Helper Format Angka
        function formatNumber(amount, decimalPlaces = 0) {
            const locale = currentLang === 'id' ? 'id-ID' : 'en-US';
            return new Intl.NumberFormat(locale, {
                minimumFractionDigits: decimalPlaces,
                maximumFractionDigits: decimalPlaces,
            }).format(amount);
        }

        function formatInput(inputElement) {
            let rawValue = inputElement.value.replace(/\D/g, ''); 
            if (rawValue) {
                const numericValue = parseInt(rawValue, 10);
                inputElement.value = formatNumber(numericValue);
            } else {
                inputElement.value = ''; 
            }
        }
        
        function cleanInput(formattedValue) {
            if(!formattedValue) return 0;
            return parseFloat(formattedValue.replace(/[^\d]/g, '')) || 0;
        }

        // Logic Toggle Loan Inputs
        function toggleLoanInputs() {
            const isCash = document.querySelector('input[name="paymentType"]:checked').value === 'cash';
            const loanContainer = document.getElementById('loanInputsContainer');
            const rowMortgage = document.getElementById('rowMortgage');
            
            if (isCash) {
                loanContainer.classList.add('hidden');
                if(rowMortgage) rowMortgage.classList.add('hidden');
            } else {
                loanContainer.classList.remove('hidden');
                if(rowMortgage) rowMortgage.classList.remove('hidden');
            }
        }

        function calculateROI(event) {
            if(event) event.preventDefault();
            
            const isCash = document.querySelector('input[name="paymentType"]:checked').value === 'cash';

            // 1. Inputs
            const propertyPrice = cleanInput(document.getElementById('propertyPrice').value);
            const closingCosts = cleanInput(document.getElementById('closingCosts').value);
            const monthlyRent = cleanInput(document.getElementById('monthlyRent').value);
            const vacancyRate = parseFloat(document.getElementById('vacancyRate').value) / 100;
            const monthlyExpenses = cleanInput(document.getElementById('monthlyExpenses').value);

            let downPaymentAmount, loanAmount, monthlyMortgage = 0;

            // 2. Logic Cash vs Loan
            if (isCash) {
                downPaymentAmount = propertyPrice; // Full Price
                loanAmount = 0;
                monthlyMortgage = 0;
            } else {
                const downPaymentPercent = parseFloat(document.getElementById('downPayment').value);
                const interestRate = parseFloat(document.getElementById('interestRate').value) / 100;
                const loanTermYears = parseInt(document.getElementById('loanTerm').value);
                
                downPaymentAmount = propertyPrice * (downPaymentPercent / 100);
                loanAmount = propertyPrice - downPaymentAmount;

                if (interestRate > 0 && loanTermYears > 0) {
                    const r = interestRate / 12;
                    const n = loanTermYears * 12;
                    monthlyMortgage = loanAmount * (r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1);
                } else {
                    monthlyMortgage = 0;
                }
            }

            // 3. Validasi Basic
            if (propertyPrice <= 0 || monthlyRent <= 0) {
                document.getElementById('errorAlert').classList.remove('hidden');
                document.getElementById('errorText').textContent = translations[currentLang].inputError;
                return;
            }
            document.getElementById('errorAlert').classList.add('hidden');

            // 4. Perhitungan Tahunan
            const annualMortgage = monthlyMortgage * 12;
            const grossAnnualIncome = monthlyRent * 12;
            const vacancyLoss = grossAnnualIncome * vacancyRate;
            const effectiveGrossIncome = grossAnnualIncome - vacancyLoss;
            const annualOperatingExpenses = monthlyExpenses * 12;

            // 5. Key Metrics
            const NOI = effectiveGrossIncome - annualOperatingExpenses;
            const annualCashFlow = NOI - annualMortgage;
            const monthlyCashFlow = annualCashFlow / 12;
            const totalInitialInvestment = downPaymentAmount + closingCosts;

            const cashOnCashReturn = (totalInitialInvestment > 0) ? (annualCashFlow / totalInitialInvestment) * 100 : 0;
            const capRate = (propertyPrice > 0) ? (NOI / propertyPrice) * 100 : 0;

            // 6. Display Results
            const resCashFlow = document.getElementById('resultCashFlow');
            resCashFlow.textContent = formatNumber(monthlyCashFlow);
            
            if (monthlyCashFlow < 0) {
                resCashFlow.classList.remove('text-green-600');
                resCashFlow.classList.add('text-red-600');
                document.getElementById('textInterpretation').innerHTML = translations[currentLang].interpretationNegative;
            } else {
                resCashFlow.classList.add('text-green-600');
                resCashFlow.classList.remove('text-red-600');
                document.getElementById('textInterpretation').innerHTML = translations[currentLang].interpretationPositive;
            }

            document.getElementById('resultCoC').textContent = formatNumber(cashOnCashReturn, 2) + "%";
            document.getElementById('resultCapRate').textContent = formatNumber(capRate, 2) + "%";
            
            // Breakdown Table
            document.getElementById('valGrossIncome').textContent = formatNumber(Math.round(effectiveGrossIncome));
            document.getElementById('valTotalExpenses').textContent = "(" + formatNumber(Math.round(annualOperatingExpenses)) + ")";
            document.getElementById('valNOI').textContent = formatNumber(Math.round(NOI));
            document.getElementById('valMortgage').textContent = "(" + formatNumber(Math.round(annualMortgage)) + ")";
            document.getElementById('valTotalCashFlow').textContent = formatNumber(Math.round(annualCashFlow));
            document.getElementById('valTotalInvestment').textContent = formatNumber(Math.round(totalInitialInvestment));

            document.getElementById('resultBox').classList.add('visible');
        }

        function setLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            
            // Simpan nilai input saat ini agar tidak hilang saat re-render
            const priceVal = document.getElementById('propertyPrice').value;
            const closingVal = document.getElementById('closingCosts').value;
            const rentVal = document.getElementById('monthlyRent').value;
            const expVal = document.getElementById('monthlyExpenses').value;

            // Update UI Teks
            document.getElementById('appTitle').textContent = t.appTitle;
            document.getElementById('headerTitle').textContent = t.headerTitle;
            document.getElementById('toolSubtitle').innerHTML = t.toolSubtitle;
            
            // Payment Method
            document.getElementById('labelPaymentMethod').textContent = t.labelPaymentMethod;
            document.getElementById('optionLoan').textContent = t.optionLoan;
            document.getElementById('optionCash').textContent = t.optionCash;

            // Inputs
            document.getElementById('headerPurchase').textContent = t.headerPurchase;
            document.getElementById('labelPropertyPrice').textContent = t.labelPropertyPrice;
            document.getElementById('descPropertyPrice').textContent = t.descPropertyPrice;
            document.getElementById('labelDownPayment').textContent = t.labelDownPayment;
            document.getElementById('descDownPayment').textContent = t.descDownPayment;
            document.getElementById('labelInterestRate').textContent = t.labelInterestRate;
            document.getElementById('descInterestRate').textContent = t.descInterestRate;
            document.getElementById('labelLoanTerm').textContent = t.labelLoanTerm;
            document.getElementById('descLoanTerm').textContent = t.descLoanTerm;
            document.getElementById('labelClosingCosts').textContent = t.labelClosingCosts;
            document.getElementById('descClosingCosts').textContent = t.descClosingCosts;
            
            document.getElementById('headerIncome').textContent = t.headerIncome;
            document.getElementById('labelMonthlyRent').textContent = t.labelMonthlyRent;
            document.getElementById('descMonthlyRent').textContent = t.descMonthlyRent;
            document.getElementById('labelVacancyRate').textContent = t.labelVacancyRate;
            document.getElementById('descVacancyRate').textContent = t.descVacancyRate;
            document.getElementById('labelMonthlyExpenses').textContent = t.labelMonthlyExpenses;
            document.getElementById('descMonthlyExpenses').innerHTML = t.descMonthlyExpenses;
            
            document.getElementById('calculateButton').textContent = t.calculateButton;

            // Re-apply format input sesuai bahasa baru
            document.getElementById('propertyPrice').value = formatNumber(cleanInput(priceVal));
            document.getElementById('closingCosts').value = formatNumber(cleanInput(closingVal));
            document.getElementById('monthlyRent').value = formatNumber(cleanInput(rentVal));
            document.getElementById('monthlyExpenses').value = formatNumber(cleanInput(expVal));
            
            // Results
            document.getElementById('resultHeader').textContent = t.resultHeader;
            document.getElementById('labelCashFlow').textContent = t.labelCashFlow;
            document.getElementById('descCashFlowResult').textContent = t.descCashFlowResult;
            document.getElementById('labelCoC').textContent = t.labelCoC;
            document.getElementById('descCoCResult').textContent = t.descCoCResult;
            document.getElementById('labelCapRate').textContent = t.labelCapRate;
            document.getElementById('descCapRateResult').textContent = t.descCapRateResult;
            document.getElementById('headerInterpretation').textContent = t.headerInterpretation;
            
            document.getElementById('detailHeader').textContent = t.detailHeader;
            document.getElementById('labelGrossIncome').textContent = t.labelGrossIncome;
            document.getElementById('labelTotalExpenses').textContent = t.labelTotalExpenses;
            document.getElementById('labelNOI').textContent = t.labelNOI;
            document.getElementById('labelMortgage').textContent = t.labelMortgage;
            document.getElementById('labelTotalCashFlow').textContent = t.labelTotalCashFlow;
            
            // Note Investment
            const investVal = document.getElementById('valTotalInvestment').textContent;
            document.getElementById('investmentNote').innerHTML = t.investmentNote + `<span id="valTotalInvestment" class="font-bold">${investVal}</span>`;

            // Edukasi
            document.getElementById('sectionHeader1').textContent = t.sectionHeader1;
            document.getElementById('content1').innerHTML = t.content1;
            document.getElementById('sectionHeader2').textContent = t.sectionHeader2;
            document.getElementById('content2').innerHTML = t.content2;
            document.getElementById('sectionHeader3').textContent = t.sectionHeader3;
            document.getElementById('tip1').textContent = t.tip1;
            document.getElementById('tip2').textContent = t.tip2;
            document.getElementById('tip3').textContent = t.tip3;
            document.getElementById('sectionHeader4').textContent = t.sectionHeader4;
            document.getElementById('content4').textContent = t.content4;

            // Update Related Content (Grid & List)
            updateRelatedContent(lang);

            // Re-calculate jika result box sedang terbuka
            if(document.getElementById('resultBox').classList.contains('visible')){
                calculateROI();
            }
        }
        
        // Fungsi Update Related Content (Sesuai Benchmark BMI)
        function updateRelatedContent(lang) {
            const translatableElements = document.querySelectorAll('#related-tools-section [data-en]');
            translatableElements.forEach(el => {
                const newText = el.getAttribute(`data-${lang}`);
                if (newText) el.textContent = newText;
            });
        }

        // Observer untuk Bahasa (Standard SOP)
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'attributes' && mutation.attributeName === 'lang') {
                    const currentLang = document.documentElement.lang || 'en';
                    setLanguage(currentLang);
                }
            });
        });
        observer.observe(document.documentElement, { attributes: true });

        // Init
        document.addEventListener('DOMContentLoaded', () => {
            const currentLang = document.documentElement.lang || 'en';
            setLanguage(currentLang);
            toggleLoanInputs(); // Set initial state
        });
    </script>
</body>
</html>