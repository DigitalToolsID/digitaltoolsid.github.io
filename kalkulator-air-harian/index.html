<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="appTitle">Daily Water Intake Calculator</title>
    
    <!-- PWA dan Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#1e3a8a">
    <link rel="apple-touch-icon" href="/icon-192.png">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Analytics Code (G-7M8E7QRYNY) - Sesuai Permintaan Butir 13e -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7M8E7QRYNY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-7M8E7QRYNY');
    </script>
    
    <!-- Google AdSense Code (ca-pub-4885884866232864) - Sesuai Permintaan Butir 13f -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4885884866232864"
         crossorigin="anonymous"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        // Warna dasar dari index.html
                        'primary': '#2c3e50', 
                        'secondary': '#3498db', 
                        'primary-dark': '#1e3a8a', 
                        'toggle-bg': '#e5e7eb',
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Gaya Kustom untuk toggle bahasa */
        .lang-toggle-container {
            position: relative;
            display: inline-flex;
            background-color: #e5e7eb; 
            border-radius: 9999px; 
            padding: 4px;
        }
        .lang-toggle-btn {
            padding: 6px 14px;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            z-index: 10;
            color: #6b7280; 
            transition: color 0.3s ease;
            position: relative;
        }
        .lang-toggle-slider {
            position: absolute;
            top: 4px;
            left: 4px;
            height: calc(100% - 8px);
            width: calc(50% - 4px); 
            background-color: #1e3a8a; /* Primary-dark */
            border-radius: 9999px;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 5;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }
        .lang-toggle-container.lang-en .lang-toggle-slider { transform: translateX(0%); }
        .lang-toggle-container.lang-id .lang-toggle-slider { transform: translateX(100%); }
        .lang-toggle-container.lang-en #lang-en { color: white; }
        .lang-toggle-container.lang-id #lang-id { color: white; }

        /* Gaya Kustom untuk hasil */
        .result-box {
            transition: all 0.5s ease-in-out;
            transform-origin: top center;
            opacity: 0;
            max-height: 0;
            overflow: hidden;
        }
        .result-box.visible {
            opacity: 1;
            max-height: 1200px; 
            padding: 1.5rem; 
        }
        
        /* Untuk daftar aksi */
        .action-list {
            list-style-type: disc;
            margin-left: 1.5rem;
            margin-top: 0.5rem;
        }
        .action-list li {
            margin-bottom: 0.25rem;
        }
        
        /* Gaya PWA Banner (diambil dari index.html) */
        #pwaBanner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 50;
            opacity: 0;
            transform: translateY(100%);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            height: 70px;
        }
        #pwaBanner.show {
            opacity: 1;
            transform: translateY(0);
        }
        @media (max-width: 767px) {
            body.pwa-visible {
                padding-bottom: 70px; 
            }
        }
    </style>
</head>

<!-- Butir 10: Kode pengaman konten sederhana - menonaktifkan klik kanan dan copy/paste -->
<body class="bg-gray-50 flex flex-col min-h-screen font-sans" oncontextmenu="return false;" oncopy="return false;" oncut="return false;">

    <header class="bg-primary-dark text-white py-4 shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center">
            
            <!-- Butir 11d: Link Kembali ke Katalog (halaman utama) -->
            <a href="../index.html" class="text-lg font-semibold tracking-tight text-gray-200 hover:text-white transition duration-150">
                &larr; <span id="backToCatalogText">Back to Tools Catalog</span>
            </a>
            
            <!-- Butir 13a: Tombol EN/ID -->
            <div id="languageSwitcher" class="lang-toggle-container lang-en">
                <div id="langToggleSlider" class="lang-toggle-slider"></div>
                <button id="lang-en" onclick="setLanguage('en')" class="lang-toggle-btn">
                    EN
                </button>
                <button id="lang-id" onclick="setLanguage('id')" class="lang-toggle-btn">
                    ID
                </button>
            </div>
            </div>
    </header>

    <main class="flex-grow p-4 sm:p-8 flex justify-center">
        <div class="w-full max-w-lg bg-white shadow-xl rounded-xl p-6 sm:p-8">
            
            <h1 id="headerTitle" class="text-3xl font-extrabold text-blue-800 mb-3">Daily Water Intake Calculator</h1>
            
            <p id="toolSubtitle" class="text-base text-gray-700 font-medium mb-6">
                Calculate your precise daily water requirement based on your body weight, activity level, and climate.
            </p>
            
            <div class="space-y-4">
                <!-- Input Berat Badan -->
                <div class="relative">
                    <label for="weightInput" class="block text-sm font-medium text-gray-700 mb-1" id="labelWeight">Weight (kg)</label>
                    <input type="number" id="weightInput" placeholder="E.g.: 70" step="0.1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150" required>
                </div>

                <!-- Input Tingkat Aktivitas -->
                <div class="relative">
                    <label for="activitySelect" class="block text-sm font-medium text-gray-700 mb-1" id="labelActivity">Activity Level</label>
                    <select id="activitySelect" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150 appearance-none bg-white">
                        <option value="1.0" id="activitySedentary">Sedentary (Little/no exercise)</option>
                        <option value="1.1" id="activityLight">Lightly Active (1-3 days/week)</option>
                        <option value="1.2" id="activityModerate">Moderately Active (3-5 days/week)</option>
                        <option value="1.3" id="activityVery">Very Active (Daily exercise)</option>
                    </select>
                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                        <svg class="h-5 w-5 text-gray-400 mt-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                    </div>
                </div>

                <!-- Input Suhu Lingkungan -->
                <div class="relative">
                    <label for="climateSelect" class="block text-sm font-medium text-gray-700 mb-1" id="labelClimate">Climate / Temperature</label>
                    <select id="climateSelect" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150 appearance-none bg-white">
                        <option value="0" id="climateCool">Cool / Standard (Below 25¬∞C)</option>
                        <option value="0.1" id="climateWarm">Warm / Tropical (25¬∞C - 30¬∞C)</option>
                        <option value="0.2" id="climateHot">Hot / Humid (> 30¬∞C or High Humidity)</option>
                    </select>
                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                        <svg class="h-5 w-5 text-gray-400 mt-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                    </div>
                </div>

                <button id="calculateButton" onclick="calculateWaterIntake()" class="w-full bg-secondary text-white font-semibold py-3 rounded-xl shadow-md hover:bg-primary transition duration-300 ease-in-out transform hover:scale-[1.01] focus:outline-none focus:ring-4 focus:ring-secondary focus:ring-opacity-50">
                    Calculate Water Intake
                </button>
                
                <div id="errorAlert" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
                    <span id="errorText" class="block sm:inline"></span>
                </div>
            </div>

            <!-- Bagian Hasil -->
            <div id="resultBox" class="result-box mt-6 bg-blue-50 border border-blue-200 rounded-xl shadow-lg">
                <div class="text-center p-3 border-b border-blue-200 mb-4">
                    <p id="labelDailyIntake" class="text-sm text-blue-800 font-medium">Your Minimum Daily Water Intake</p>
                    <p id="waterResultLiters" class="text-5xl font-extrabold text-blue-600 mt-1">-- L</p>
                    <p id="waterResultGlasses" class="text-lg font-semibold text-gray-600 mt-1">(-- glasses)</p>
                </div>

                <div id="adviceBox" class="p-3 mt-4 rounded-lg bg-white border border-gray-300">
                    <p id="adviceHeader" class="text-md font-bold text-primary-dark mb-2">Important Advice</p>
                    <p id="adviceText" class="text-sm text-gray-700"></p>
                </div>
            </div>
            
            <!-- Konten Edukasi Wajib (High-Value Content) -->
            <section class="mt-8 pt-4 border-t border-gray-200 font-sans">
                <h2 id="sectionHeader1" class="text-xl font-bold text-gray-800 mb-3">Why Hydration is Your Health Foundation</h2>
                <p id="content1" class="text-gray-600 text-sm leading-relaxed text-justify mb-6"></p>

                <h3 id="sectionHeader2" class="text-lg font-bold text-gray-800 mb-2">The Dangers of Chronic Dehydration</h3>
                
                <div id="content2" class="text-gray-600 text-sm leading-relaxed text-justify mb-6 space-y-4">
                    <p id="content2Intro"></p>
                    <h4 class="text-base font-semibold mt-0 text-primary-dark" id="symptomHeader">Recognizing the Symptoms</h4>
                    <ul class="action-list list-disc ml-4 space-y-1" id="symptomList">
                        <li></li>
                        <li></li>
                        <li></li>
                        <li></li>
                    </ul>
                    
                    <h4 class="text-base font-semibold mt-4 text-primary-dark" id="longTermHeader">Long-Term Impact</h4>
                    <ul class="action-list list-disc ml-4 space-y-1" id="longTermList">
                        <li></li>
                        <li></li>
                        <li></li>
                    </ul>
                </div>

                <h3 id="sectionHeader3" class="text-lg font-bold text-gray-800 mb-2">Actionable Strategy: How to Hit Your Water Goals</h3>
                <p id="content3" class="text-gray-600 text-sm leading-relaxed text-justify mb-6"></p>
                <div id="content4" class="text-gray-600 text-sm leading-relaxed text-justify mb-6 space-y-4">
                    <h4 class="text-base font-semibold mt-0 text-primary-dark" id="strategyHeader">Practical Drinking Strategy</h4>
                    <ul class="action-list list-disc ml-4 space-y-1" id="strategyList">
                        <li></li>
                        <li></li>
                        <li></li>
                    </ul>
                </div>
            </section>

        </div>
    </main>
    
    <!-- PWA Banner (dari index.html) -->
    <div id="pwaBanner" class="p-3 bg-primary-dark text-white text-center shadow-2xl">
        <p id="pwaAdviceText" class="text-sm font-medium">
            üëã <strong>Install Water Calculator</strong> ini di Homescreen Anda untuk akses cepat! Klik tombol <strong>Bagikan</strong> (‚¨ÜÔ∏è) lalu pilih <strong>Add to Home Screen</strong>.
        </p>
        <button onclick="closePWABanner()" class="mt-2 text-xs font-semibold text-gray-300 hover:text-white underline">
            Close
        </button>
    </div>

    <!-- Footer (dari index.html) - Butir 12 & 13b -->
    <footer class="mt-12 py-6 border-t border-gray-200 bg-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-wrap justify-center space-x-4 sm:space-x-8 text-sm font-medium text-gray-600">
                <a href="../privacy-policy.html" class="hover:text-secondary transition duration-150 ease-in-out">Privacy Policy</a>
                <span aria-hidden="true" class="hidden sm:inline">|</span>
                <a href="../terms-of-service.html" class="hover:text-secondary transition duration-150 ease-in-out">Terms of Service</a>
                <span aria-hidden="true" class="hidden sm:inline">|</span>
                <a href="../about-us.html" class="hover:text-secondary transition duration-150 ease-in-out">About Us</a>
                <span aria-hidden="true" class="hidden sm:inline">|</span>
                <a href="../contact-us.html" class="hover:text-secondary transition duration-150 ease-in-out">Contact Us</a>
            </div>
            
            <div class="mt-6 text-center text-xs text-gray-500">
                &copy; 2025 Digital Tools ID. All rights reserved. Developed by DTID Analytics.
            </div>
        </div>
    </footer>
    
    <script>
        // **********************************************
        // LOGIKA BARU UNTUK KALKULATOR KEBUTUHAN AIR HARIAN
        // **********************************************

        const translations = {
            id: {
                appTitle: "Kalkulator Kebutuhan Air Harian",
                headerTitle: "Kalkulator Kebutuhan Air Harian",
                toolSubtitle: "Hitung kebutuhan minimum air harian Anda secara akurat berdasarkan berat badan, tingkat aktivitas, dan iklim.",
                backToCatalogText: "Kembali ke Katalog Alat",
                labelWeight: "Berat Badan (kg)",
                labelActivity: "Tingkat Aktivitas",
                activitySedentary: "Sangat Ringan (Kurang/Tanpa olahraga)",
                activityLight: "Ringan (1-3 hari/minggu)",
                activityModerate: "Sedang (3-5 hari/minggu)",
                activityVery: "Sangat Aktif (Latihan berat harian)",
                labelClimate: "Iklim / Suhu Lingkungan",
                climateCool: "Sejuk / Standar (Di bawah 25¬∞C)",
                climateWarm: "Hangat / Tropis (25¬∞C - 30¬∞C)",
                climateHot: "Panas / Lembab (> 30¬∞C atau Kelembaban Tinggi)",
                calculateButton: "Hitung Kebutuhan Air",
                labelDailyIntake: "Kebutuhan Minimum Air Harian Anda",
                inputError: "Mohon masukkan Berat Badan yang valid (lebih dari 0).",
                placeholderWeight: "Contoh: 70",
                
                // Saran
                adviceHeader: "Saran Penting",
                adviceText: (liters) => `Target ${liters} liter ini adalah minimum, dan ini belum termasuk air yang hilang saat sakit atau di lingkungan yang sangat panas. Konsumsilah air secara bertahap sepanjang hari.`,
                
                // Konten Edukasi Wajib
                sectionHeader1: "Mengapa Hidrasi adalah Fondasi Kesehatan Anda",
                content1: "Air adalah nutrisi terpenting bagi tubuh, membentuk sekitar 60% dari total berat badan Anda. Fungsi air tidak hanya menghilangkan haus, tetapi juga vital untuk setiap proses metabolisme: ia melumasi sendi, mengatur suhu tubuh (melalui keringat), membantu pencernaan dan penyerapan nutrisi, serta membawa oksigen dan nutrisi ke sel-sel Anda. <br><br> Kekurangan air, bahkan dehidrasi ringan, dapat memengaruhi fungsi kognitif, tingkat energi, dan mood Anda. Kalkulator ini menyediakan target dasar dalam liter, tetapi yang terpenting adalah konsistensi: pastikan Anda minum secara teratur sebelum rasa haus yang intens muncul, terutama saat berolahraga atau berada di lingkungan tropis seperti Indonesia.",
                
                sectionHeader2: "Bahaya Dehidrasi Kronis",
                content2Intro: `Dehidrasi yang berkepanjangan atau kronis, bahkan yang ringan, telah dikaitkan dengan penurunan kinerja fisik dan mental serta meningkatkan risiko kesehatan jangka panjang. Memahami gejalanya dan dampak jangka panjangnya adalah kunci untuk motivasi hidrasi yang lebih baik.`,
                
                symptomHeader: "Mengenali Gejala Awal",
                symptomList1: "Urin gelap atau keruh: Indikator hidrasi termudah.",
                symptomList2: "Sembelit dan masalah pencernaan, karena kurangnya pelumas air.",
                symptomList3: "Sakit kepala atau migrain, sering kali salah diartikan sebagai kelelahan.",
                symptomList4: "Kelelahan, perubahan suasana hati, dan kesulitan fokus (kabut otak).",
                
                longTermHeader: "Dampak Jangka Panjang",
                longTermList1: "Meningkatkan risiko batu ginjal (karena urin menjadi lebih terkonsentrasi).",
                longTermList2: "Masalah tekanan darah dan denyut jantung karena volume darah berkurang.",
                longTermList3: "Penuaan kulit yang lebih cepat dan elastisitas kulit yang menurun.",

                sectionHeader3: "Strategi Tindakan: Cara Mencapai Target Air Anda",
                content3: "Mengetahui jumlah air yang dibutuhkan adalah langkah pertama, namun implementasi konsumsi yang konsisten seringkali menjadi tantangan. Strategi hidrasi yang efektif harus diintegrasikan ke dalam rutinitas harian Anda, bukan hanya saat Anda merasa haus.",
                
                strategyHeader: "Strategi Minum Praktis",
                strategyList1: "Minum dua gelas air segera setelah bangun tidur untuk 'menghidupkan' organ Anda.",
                strategyList2: "Gunakan botol air yang dapat digunakan ulang (reusable) dan jadikan sebagai pengingat visual yang selalu ada di meja Anda.",
                strategyList3: "Atur alarm setiap jam di ponsel Anda untuk minum satu tegukan besar (sekitar 100-150 ml), memastikan asupan yang stabil.",

                // Saran PWA
                pwaAdvice: `üëã <strong>Install Kalkulator Air</strong> ini di Homescreen Anda untuk akses cepat! Klik tombol <strong>Bagikan</strong> (‚¨ÜÔ∏è) lalu pilih <strong>Add to Home Screen</strong>.`,
            },
            en: {
                appTitle: "Daily Water Intake Calculator",
                headerTitle: "Daily Water Intake Calculator",
                toolSubtitle: "Calculate your precise daily water requirement based on your body weight, activity level, and climate.",
                backToCatalogText: "Back to Tools Catalog",
                labelWeight: "Weight (kg)",
                labelActivity: "Activity Level",
                activitySedentary: "Sedentary (Little/no exercise)",
                activityLight: "Lightly Active (1-3 days/week)",
                activityModerate: "Moderately Active (3-5 days/week)",
                activityVery: "Very Active (Daily exercise)",
                labelClimate: "Climate / Temperature",
                climateCool: "Cool / Standard (Below 25¬∞C)",
                climateWarm: "Warm / Tropical (25¬∞C - 30¬∞C)",
                climateHot: "Hot / Humid (> 30¬∞C or High Humidity)",
                calculateButton: "Calculate Water Intake",
                labelDailyIntake: "Your Minimum Daily Water Intake",
                inputError: "Please enter a valid Weight (greater than 0).",
                placeholderWeight: "E.g.: 70",

                // Advice
                adviceHeader: "Important Advice",
                adviceText: (liters) => `This ${liters} liter target is a minimum, and does not include water lost during illness or in extremely hot environments. Consume water gradually throughout the day.`,

                // Mandatory Educational Content
                sectionHeader1: "Why Hydration is Your Health Foundation",
                content1: "Water is the most crucial nutrient for the body, making up about 60% of your total body weight. Water's function is not just to quench thirst, but it is vital for every metabolic process: it lubricates joints, regulates body temperature (through sweat), aids digestion and nutrient absorption, and carries oxygen and nutrients to your cells. <br><br> Even mild dehydration can impair cognitive function, energy levels, and mood. This calculator provides a base target in liters, but consistency is key: ensure you drink regularly before intense thirst sets in, especially when exercising or in tropical environments like Indonesia.",
                
                sectionHeader2: "The Dangers of Chronic Dehydration",
                content2Intro: `Prolonged or chronic dehydration, even mild forms, has been linked to decreased physical and mental performance and increased long-term health risks. Understanding the symptoms and long-term impact is key to better hydration motivation.`,
                
                symptomHeader: "Recognizing Early Symptoms",
                symptomList1: "Dark or cloudy urine: The easiest hydration indicator.",
                symptomList2: "Constipation and digestive issues, due to lack of water lubrication.",
                symptomList3: "Headaches or migraines, often mistaken for fatigue.",
                symptomList4: "Fatigue, mood swings, and difficulty focusing (brain fog).",
                
                longTermHeader: "Long-Term Impact",
                longTermList1: "Increased risk of kidney stones (as urine becomes more concentrated).",
                longTermList2: "Blood pressure and heart rate issues due to reduced blood volume.",
                longTermList3: "Accelerated skin aging and decreased skin elasticity.",

                sectionHeader3: "Actionable Strategy: How to Hit Your Water Goals",
                content3: "Knowing the amount of water needed is the first step, but consistent consumption implementation is often the challenge. An effective hydration strategy must be integrated into your daily routine, not just when you feel thirsty.",
                
                strategyHeader: "Practical Drinking Strategy",
                strategyList1: "Drink two glasses of water immediately after waking up to 'turn on' your organs.",
                strategyList2: "Use a reusable water bottle and keep it as a visual reminder on your desk at all times.",
                strategyList3: "Set an hourly alarm on your phone to take one large sip (about 100-150 ml), ensuring steady intake.",

                // PWA Advice
                pwaAdvice: `üëã <strong>Install Water Calculator</strong> on your Homescreen for quick access! Click the <strong>Share</strong> button (${getShareIcon()}) lalu pilih <strong>Add to Home Screen</strong>.`,
            }
        };

        let currentLang = 'en'; // Default language

        // Fungsi Bantu untuk ikon Share
        function getShareIcon() {
            const ua = navigator.userAgent;
            if (/iPad|iPhone|iPod/.test(ua) && !window.MSStream) { return '‚¨ÜÔ∏è'; } 
            if (/Android/.test(ua)) { return '‚ãÆ'; }
            return '‚¨áÔ∏è'; 
        }

        // Fungsi utama untuk menghitung kebutuhan air
        function calculateWaterIntake() {
            const weight = parseFloat(document.getElementById('weightInput').value);
            const activityMultiplier = parseFloat(document.getElementById('activitySelect').value);
            const climateAdjustment = parseFloat(document.getElementById('climateSelect').value);

            const lang = currentLang;
            const resultBox = document.getElementById('resultBox');
            const errorAlert = document.getElementById('errorAlert');

            // 1. Validasi Input
            if (isNaN(weight) || weight <= 0) {
                document.getElementById('errorText').textContent = translations[lang].inputError;
                errorAlert.classList.remove('hidden');
                resultBox.classList.remove('visible');
                return;
            }
            
            errorAlert.classList.add('hidden');

            // --- PERHITUNGAN KEBUTUHAN AIR (RUMUS DASAR) ---
            // Menggunakan rumus umum: 30-40 ml per kg berat badan. Kita ambil rata-rata 35 ml/kg sebagai basis.
            const baseIntakeMl = weight * 35; 
            
            // Penyesuaian:
            // 1. Berdasarkan Aktivitas: Tambah 10-30%
            const intakeAfterActivityMl = baseIntakeMl * activityMultiplier;

            // 2. Berdasarkan Iklim/Suhu: Tambah 0-20% dari basis
            const climateAdditionMl = baseIntakeMl * climateAdjustment; 
            
            const totalIntakeMl = intakeAfterActivityMl + climateAdditionMl;
            const totalIntakeLiters = totalIntakeMl / 1000;
            
            // Pembulatan ke 1 desimal
            const formattedLiters = totalIntakeLiters.toFixed(1);
            
            // Konversi ke Gelas (Asumsi 1 gelas = 240 ml, standar US)
            const glasses = (totalIntakeMl / 240).toFixed(1);

            // --- TAMPILKAN HASIL ---
            document.getElementById('waterResultLiters').textContent = `${formattedLiters} L`;
            document.getElementById('waterResultGlasses').textContent = `(${glasses} glasses)`;

            // --- TAMPILKAN SARAN ---
            document.getElementById('adviceText').textContent = translations[lang].adviceText(formattedLiters);

            // 7. Tampilkan kotak hasil
            resultBox.classList.add('visible');
        }


        // Fungsi untuk mengubah semua teks UI berdasarkan bahasa (Butir 13a)
        function setLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            const languageSwitcher = document.getElementById('languageSwitcher');

            // Update status toggle
            languageSwitcher.classList.remove('lang-en', 'lang-id');
            languageSwitcher.classList.add(`lang-${lang}`);

            // Update teks statis
            document.getElementById('appTitle').textContent = t.appTitle;
            document.getElementById('headerTitle').textContent = t.headerTitle;
            document.getElementById('toolSubtitle').textContent = t.toolSubtitle;
            document.getElementById('backToCatalogText').textContent = t.backToCatalogText;
            
            // Update label formulir dan tombol
            document.getElementById('labelWeight').textContent = t.labelWeight;
            document.getElementById('labelActivity').textContent = t.labelActivity;
            document.getElementById('labelClimate').textContent = t.labelClimate;
            document.getElementById('calculateButton').textContent = t.calculateButton;

            // Update option aktivitas
            document.getElementById('activitySedentary').textContent = t.activitySedentary;
            document.getElementById('activityLight').textContent = t.activityLight;
            document.getElementById('activityModerate').textContent = t.activityModerate;
            document.getElementById('activityVery').textContent = t.activityVery;
            
            // Update option iklim
            document.getElementById('climateCool').textContent = t.climateCool;
            document.getElementById('climateWarm').textContent = t.climateWarm;
            document.getElementById('climateHot').textContent = t.climateHot;
            
            // Update placeholder
            document.getElementById('weightInput').placeholder = t.placeholderWeight;

            // Update label hasil
            document.getElementById('labelDailyIntake').textContent = t.labelDailyIntake;
            document.getElementById('adviceHeader').textContent = t.adviceHeader;
            
            // Update Konten Edukasi Wajib
            document.getElementById('sectionHeader1').textContent = t.sectionHeader1;
            document.getElementById('content1').innerHTML = t.content1;
            document.getElementById('sectionHeader2').textContent = t.sectionHeader2;
            document.getElementById('content2Intro').innerHTML = t.content2Intro;
            
            // Gejala
            document.getElementById('symptomHeader').textContent = t.symptomHeader;
            document.getElementById('symptomList').innerHTML = `
                <li>${t.symptomList1}</li>
                <li>${t.symptomList2}</li>
                <li>${t.symptomList3}</li>
                <li>${t.symptomList4}</li>
            `;

            // Dampak Jangka Panjang
            document.getElementById('longTermHeader').textContent = t.longTermHeader;
            document.getElementById('longTermList').innerHTML = `
                <li>${t.longTermList1}</li>
                <li>${t.longTermList2}</li>
                <li>${t.longTermList3}</li>
            `;

            document.getElementById('sectionHeader3').textContent = t.sectionHeader3;
            document.getElementById('content3').innerHTML = t.content3;
            
            // Strategi
            document.getElementById('strategyHeader').textContent = t.strategyHeader;
            document.getElementById('strategyList').innerHTML = `
                <li>${t.strategyList1}</li>
                <li>${t.strategyList2}</li>
                <li>${t.strategyList3}</li>
            `;

            // Update Saran PWA
            const pwaAdviceText = document.getElementById('pwaAdviceText');
            const pwaMessage = t.pwaAdvice;
            pwaAdviceText.innerHTML = pwaMessage.replace(/<strong>(.*?)<\/strong>/g, '<span>$1</span>');


            // Perbarui hasil yang sudah ada (jika sudah dihitung)
            const waterResultElement = document.getElementById('waterResultLiters');
            if (waterResultElement.textContent !== '-- L') {
                 // Hitung ulang dengan bahasa baru untuk mendapatkan teks saran yang diperbarui
                 calculateWaterIntake();
            }

             // Pastikan error message diupdate
            if (!document.getElementById('errorAlert').classList.contains('hidden')) {
                document.getElementById('errorText').textContent = t.inputError;
            }
        }
        
        // Fungsi PWA Banner (dari index.html)
        function showPWABanner() {
            const pwaBanner = document.getElementById('pwaBanner');
            const body = document.body;
            if (window.innerWidth < 768) {
                setTimeout(() => {
                    pwaBanner.classList.add('show');
                    body.classList.add('pwa-visible'); 
                }, 2000); 
            }
        }
        
        function closePWABanner() {
            const pwaBanner = document.getElementById('pwaBanner');
            const body = document.body;
            pwaBanner.classList.remove('show');
            body.classList.remove('pwa-visible');
        }
        document.querySelector('#pwaBanner button').onclick = closePWABanner;
        
        // Event listener untuk perubahan bahasa
        document.getElementById('languageSwitcher').addEventListener('click', (event) => {
            if (event.target.tagName === 'BUTTON') {
                const newLang = event.target.id === 'lang-en' ? 'en' : 'id';
                if (newLang !== currentLang) {
                    setLanguage(newLang);
                    document.getElementById('resultBox').classList.remove('visible');
                    document.getElementById('errorAlert').classList.add('hidden');
                    closePWABanner();
                }
            }
        });

        // Inisialisasi
        document.addEventListener('DOMContentLoaded', () => {
            setLanguage('en'); 
            showPWABanner();
        });

    </script>
</body>
</html>