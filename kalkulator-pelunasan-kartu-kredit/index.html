<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="canonical" href="https://digitaltoolsid.github.io/kalkulator-pelunasan-kartu-kredit/" />
    <!-- Judul akan di-set oleh JS -->
 
    <meta name="description" content="Kalkulator Pelunasan Kartu Kredit. Hitung berapa lama utang kartu kredit Anda akan lunas atau berapa yang harus dibayar bulanan untuk bebas utang lebih cepat." />
 
    <title id="appTitle">Credit Card Payoff Calculator</title>
    <link rel="alternate" hreflang="id" href="https://digitaltoolsid.github.io/credit-card-payoff-calculator/index.html" />
    <link rel="alternate" hreflang="en" href="https://digitaltoolsid.github.io/credit-card-payoff-calculator/index.html" />
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Kode Google Analytic dan Adsense -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7M8E7QRYNY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-7M8E7QRYNY');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4885884866232864"
         crossorigin="anonymous"></script>
    
    <!-- Konfigurasi Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'primary': '#2c3e50', 
                        'secondary': '#3498db', 
                        'primary-dark': '#1e3a8a', 
                        'finance-color': '#27ae60', // Hijau untuk Keuangan
                        'debt-color': '#c0392b', // Merah untuk Utang
                        'warning-bg': '#fff3cd',
                        'warning-text': '#856404',
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Gaya kustom untuk tampilan hasil */
        .result-box {
            transition: all 0.5s ease-in-out;
            transform-origin: top center;
            opacity: 0;
            max-height: 0;
            overflow: hidden;
        }
        .result-box.visible {
            opacity: 1;
            max-height: 3000px; 
            padding: 1.5rem; 
        }
        
        /* Gaya Toggle Bahasa */
        .lang-toggle-container {
            position: relative;
            display: inline-flex;
            background-color: #e5e7eb; 
            border-radius: 9999px; 
            padding: 4px;
        }
        .lang-toggle-btn {
            padding: 6px 14px;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            z-index: 10;
            color: #6b7280; 
            transition: color 0.3s ease;
            position: relative;
        }
        .lang-toggle-slider {
            position: absolute;
            top: 4px;
            left: 4px;
            height: calc(100% - 8px);
            width: calc(50% - 4px); 
            background-color: #1e3a8a; /* Primary-dark */
            border-radius: 9999px;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 5;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
        }
        .lang-toggle-container.lang-en .lang-toggle-slider { transform: translateX(0%); }
        .lang-toggle-container.lang-id .lang-toggle-slider { transform: translateX(100%); }
        .lang-toggle-container.lang-en #lang-en { color: white; }
        .lang-toggle-container.lang-id #lang-id { color: white; }
        
        /* Gaya kustom untuk input dan tombol */
        .calculate-button {
            box-shadow: 0 4px #922b21; /* Warna merah gelap */
            background-color: #c0392b; /* debt-color */
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .calculate-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px #922b21;
            background-color: #e74c3c;
        }
        .calculate-button:active {
            transform: translateY(2px);
            box-shadow: 0 2px #922b21;
        }

        /* Gaya untuk deskripsi input */
        .input-description {
            font-size: 0.75rem; /* text-xs */
            color: #6b7280; /* text-gray-500 */
            margin-top: 0.25rem;
        }

        /* Gaya Kartu Hasil Utama */
        .result-card-main {
            background-color: #fff5f5; /* Red 50 */
            border: 2px solid #feb2b2; /* Red 200 */
        }
        
        /* Section Header */
        .section-title {
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
            color: #2c3e50;
        }

    </style>
</head>

<body class="bg-gray-50 flex flex-col min-h-screen font-sans" oncontextmenu="return false;" oncopy="return false;" oncut="return false;">

    <!-- Header -->
    <header class="bg-primary-dark text-white py-4 shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center">
            <a href="../index.html" class="text-lg font-semibold tracking-tight text-gray-200 hover:text-white transition duration-150">
                &larr; <span id="backToCatalogText">Back to Tools Catalog</span>
            </a>
            <div id="languageSwitcher" class="lang-toggle-container lang-en">
                <div id="langToggleSlider" class="lang-toggle-slider"></div>
                <button id="lang-en" onclick="setLanguage('en')" class="lang-toggle-btn">EN</button>
                <button id="lang-id" onclick="setLanguage('id')" class="lang-toggle-btn">ID</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow p-4 sm:p-8 flex justify-center">
        <div class="w-full max-w-4xl bg-white shadow-xl rounded-xl p-6 sm:p-8">
            
            <h1 id="headerTitle" class="text-3xl font-extrabold text-primary-dark mb-3">Credit Card Payoff Calculator</h1>
            <p id="toolSubtitle" class="text-base text-gray-700 font-medium mb-6 leading-relaxed text-justify">
               <!-- Konten Subtitle akan diisi oleh JS -->
            </p>
            
            <!-- Form Input -->
            <form id="payoffForm" onsubmit="calculatePayoff(event)" class="space-y-6">
                
                <!-- Detail Kartu -->
                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                    <h2 class="section-title" id="headerDetails">1. Credit Card Details</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="relative">
                            <label for="cardBalance" class="block text-sm font-medium text-gray-700 mb-1" id="labelCardBalance">Outstanding Balance</label>
                            <input type="text" id="cardBalance" inputmode="numeric" value="10.000.000" oninput="formatInput(this)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-debt-color focus:border-debt-color" required>
                            <p class="input-description" id="descCardBalance">Total utang kartu kredit Anda saat ini.</p>
                        </div>
                        
                        <div class="relative">
                            <label for="interestRate" class="block text-sm font-medium text-gray-700 mb-1" id="labelInterestRate">Annual Interest Rate (%)</label>
                            <input type="number" id="interestRate" min="0" step="0.01" value="20" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-debt-color focus:border-debt-color" required>
                            <p class="input-description" id="descInterestRate">Suku bunga tahunan kartu kredit (bukan bulanan).</p>
                        </div>
                    </div>
                </div>

                <!-- Strategi Pembayaran -->
                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                    <h2 class="section-title" id="headerStrategy">2. Payment Strategy</h2>
                    <div class="relative mb-4">
                        <label for="calcMode" class="block text-sm font-medium text-gray-700 mb-1" id="labelCalcMode">I want to calculate...</label>
                        <select id="calcMode" onchange="toggleInputMode()" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-debt-color focus:border-debt-color bg-white">
                            <option value="time">How long will it take to pay off? (Fixed Payment)</option>
                            <option value="payment">How much should I pay monthly? (Fixed Time)</option>
                        </select>
                    </div>

                    <!-- Input Dinamis: Monthly Payment -->
                    <div class="relative" id="inputMonthlyPaymentBox">
                        <label for="monthlyPayment" class="block text-sm font-medium text-gray-700 mb-1" id="labelMonthlyPayment">Fixed Monthly Payment</label>
                        <input type="text" id="monthlyPayment" inputmode="numeric" value="500.000" oninput="formatInput(this)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-debt-color focus:border-debt-color">
                        <p class="input-description" id="descMonthlyPayment">Berapa yang sanggup Anda bayar setiap bulan.</p>
                    </div>

                    <!-- Input Dinamis: Months to Payoff -->
                    <div class="relative hidden" id="inputMonthsBox">
                        <label for="monthsGoal" class="block text-sm font-medium text-gray-700 mb-1" id="labelMonthsGoal">Desired Payoff Time (Months)</label>
                        <input type="number" id="monthsGoal" min="1" step="1" value="12" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-debt-color focus:border-debt-color">
                        <p class="input-description" id="descMonthsGoal">Dalam berapa bulan Anda ingin utang ini lunas.</p>
                    </div>
                </div>

                <button type="submit" id="calculateButton" class="calculate-button w-full text-white font-semibold py-3 rounded-xl hover:bg-red-700 transition duration-300 ease-in-out transform focus:outline-none focus:ring-4 focus:ring-red-500 focus:ring-opacity-50">
                    Calculate Payoff
                </button>
                
                <!-- Warning Alert (Minimum Payment) -->
                <div id="minPaymentWarning" class="hidden mt-4 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4" role="alert">
                    <p class="font-bold">Warning!</p>
                    <p id="warningText">Your payment is too low. It covers less than the interest accrued. You will never pay off this debt.</p>
                </div>

                <!-- Error Alert -->
                <div id="errorAlert" class="hidden mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
                    <span id="errorText" class="block sm:inline"></span>
                </div>
            </form>

            <!-- Result Box -->
            <div id="resultBox" class="result-box mt-8 p-6 rounded-xl shadow-lg result-card-main">
                
                <h3 id="resultHeader" class="text-2xl font-bold mb-6 text-primary border-b pb-2 border-red-300">Payoff Plan Result</h3>
                
                <!-- Hasil Utama -->
                <div class="text-center mb-8">
                    <p id="labelMainResult" class="text-lg font-bold text-gray-700 mb-1">You will be debt-free in:</p>
                    <p id="resultMain" class="text-4xl font-extrabold text-debt-color">0 Months</p>
                    <p id="subResult" class="text-sm text-gray-600 mt-2 hidden"></p>
                </div>

                <!-- Interpretasi Hasil -->
                <div class="mb-8 bg-white p-4 rounded-lg border border-red-200">
                    <h4 id="headerInterpretation" class="text-md font-bold text-primary mb-2">Financial Impact</h4>
                    <p id="textInterpretation" class="text-sm text-gray-700 leading-relaxed">
                        <!-- Teks interpretasi dinamis -->
                    </p>
                </div>
                
                <!-- Detail Breakdown -->
                <h4 id="detailHeader" class="text-lg font-bold text-primary mb-3">Total Cost Breakdown</h4>
                <div class="bg-white rounded-lg shadow overflow-hidden border border-gray-200 text-sm">
                    <div class="p-3 grid grid-cols-2 gap-4 border-b border-gray-100">
                        <div class="text-gray-600" id="labelPrincipal">Principal Balance</div>
                        <div class="text-right font-semibold" id="valPrincipal">0</div>
                    </div>
                    <div class="p-3 grid grid-cols-2 gap-4 border-b border-gray-100 bg-red-50">
                         <div class="text-gray-600" id="labelTotalInterest">Total Interest Paid</div>
                        <div class="text-right font-semibold text-red-600" id="valTotalInterest">0</div>
                    </div>
                     <div class="p-3 grid grid-cols-2 gap-4 border-b border-gray-100 font-bold">
                        <div class="text-debt-color" id="labelTotalPaid">Total Amount Paid</div>
                        <div class="text-right text-debt-color" id="valTotalPaid">0</div>
                    </div>
                </div>

            </div>
            
            <!-- Konten Edukasi -->
            <section class="mt-8 pt-4 border-t border-gray-200 font-sans">
                <h2 id="sectionHeader1" class="text-xl font-bold text-gray-800 mb-3">The Trap of Minimum Payments</h2>
                <p id="content1" class="text-gray-600 text-sm leading-relaxed text-justify mb-6"></p>

                <h3 id="sectionHeader2" class="text-lg font-bold text-gray-800 mb-2">Payoff Strategies</h3>
                <p id="content2" class="text-gray-600 text-sm leading-relaxed text-justify mb-6"></p>

                <h3 id="sectionHeader3" class="text-lg font-bold text-gray-800 mb-2">Tips to Get Out of Debt</h3>
                
                <p id="content3" class="text-gray-600 text-sm leading-relaxed text-justify mb-2"></p>
                
                <ul class="text-gray-600 text-sm leading-relaxed text-justify mb-6 list-disc ml-6 space-y-1">
                    <li id="tip1"></li>
                    <li id="tip2"></li>
                    <li id="tip3"></li>
                </ul>

                <h3 id="sectionHeader4" class="text-lg font-bold text-gray-800 mb-2">Disclaimer</h3>
                <p id="content4" class="text-gray-600 text-sm leading-relaxed text-justify mb-6"></p>
            </section>

        </div>
    </main>
    
    <!-- Footer -->
    <footer class="mt-12 py-6 border-t border-gray-200 bg-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div id="footerLinks" class="flex flex-wrap justify-center space-x-4 sm:space-x-8 text-sm font-medium text-gray-600">
                <a href="../privacy-policy.html" id="linkPrivacy" class="hover:text-secondary transition duration-150 ease-in-out">Privacy Policy</a>
                <span aria-hidden="true" class="hidden sm:inline">|</span>
                <a href="../terms-of-service.html" id="linkTerms" class="hover:text-secondary transition duration-150 ease-in-out">Terms of Service</a>
                <span aria-hidden="true" class="hidden sm:inline">|</span>
                <a href="../about-us.html" id="linkAbout" class="hover:text-secondary transition duration-150 ease-in-out">About Us</a>
                <span aria-hidden="true" class="hidden sm:inline">|</span>
                <a href="../contact-us.html" id="linkContact" class="hover:text-secondary transition duration-150 ease-in-out">Contact Us</a>
            </div>
            <div class="mt-6 text-center text-xs text-gray-500">
                <span id="footerCopyright">&copy; 2025 Digital Tools ID. All rights reserved. Developed by DTID Analytics.</span>
            </div>
        </div>
    </footer>
    
    <script>
        // **********************************************
        // LOGIKA KALKULATOR PELUNASAN KARTU KREDIT
        // **********************************************

        const translations = {
            id: {
                appTitle: "Kalkulator Kartu Kredit",
                headerTitle: "Kalkulator Pelunasan Kartu Kredit",
                toolSubtitle: "Terjebak dengan pembayaran minimum? Alat ini membantu Anda membuat rencana pelunasan. Masukkan saldo utang dan bunga kartu kredit Anda untuk melihat berapa lama waktu yang dibutuhkan untuk lunas dengan pembayaran bulanan tertentu, atau hitung berapa yang harus Anda bayar per bulan agar bebas utang dalam waktu yang Anda inginkan.",
                backToCatalogText: "Kembali ke Katalog Alat",
                // Input
                headerDetails: "1. Detail Kartu Kredit",
                labelCardBalance: "Saldo Terutang",
                descCardBalance: "Total utang yang tertera di tagihan kartu kredit Anda.",
                labelInterestRate: "Suku Bunga Tahunan (%)",
                descInterestRate: "Biasanya 20% - 25% per tahun di Indonesia (atau sekitar 1.75% - 2.25% per bulan).",
                
                headerStrategy: "2. Strategi Pembayaran",
                labelCalcMode: "Saya ingin menghitung...",
                optTime: "Berapa lama sampai lunas? (Bayar Tetap)",
                optPayment: "Harus bayar berapa per bulan? (Target Waktu)",
                labelMonthlyPayment: "Pembayaran Bulanan Tetap",
                descMonthlyPayment: "Jumlah yang sanggup Anda bayarkan setiap bulan secara konsisten.",
                labelMonthsGoal: "Target Waktu Pelunasan (Bulan)",
                descMonthsGoal: "Dalam berapa bulan Anda ingin bebas dari utang ini?",
                
                calculateButton: "Hitung Rencana Pelunasan",
                inputError: "Mohon masukkan nilai yang valid.",
                warningMinPay: "<b>Peringatan:</b> Pembayaran bulanan Anda terlalu kecil. Jumlah ini bahkan tidak menutupi bunga yang berjalan. Utang Anda tidak akan pernah lunas dan malah akan terus bertambah.",
                
                // Result
                resultHeader: "Hasil Rencana Pelunasan",
                labelMainResultTime: "Anda akan bebas utang dalam:",
                labelMainResultPay: "Anda perlu membayar setiap bulan:",
                
                headerInterpretation: "Dampak Finansial",
                interpTime: "Dengan membayar <b>[PAYMENT]</b> setiap bulan, Anda akan melunasi saldo <b>[BALANCE]</b> dalam waktu <b>[MONTHS] bulan</b> ([YEARS] tahun).",
                interpPay: "Untuk melunasi saldo <b>[BALANCE]</b> dalam <b>[MONTHS] bulan</b>, Anda harus menyisihkan <b>[PAYMENT]</b> setiap bulan.",
                interpInterest: "Hati-hati! Total bunga yang Anda bayarkan mencapai <b>[PERCENT]%</b> dari utang pokok Anda. Semakin lama Anda menunda, semakin besar 'uang hangus' untuk bunga.",
                
                detailHeader: "Rincian Total Biaya",
                labelPrincipal: "Pokok Utang Awal",
                labelTotalInterest: "Total Bunga Dibayar",
                labelTotalPaid: "Total Uang yang Dikeluarkan",
                
                // Edukasi
                sectionHeader1: "Jebakan Pembayaran Minimum",
                content1: "Bank biasanya menetapkan pembayaran minimum sekitar 5% - 10% dari tagihan. Membayar hanya sejumlah minimum adalah cara termahal untuk menggunakan kartu kredit. Sebagian besar uang Anda hanya akan habis untuk membayar bunga, sementara pokok utang berkurang sangat lambat, membuat Anda terjebak utang selama bertahun-tahun.",
                sectionHeader2: "Strategi Pelunasan",
                content2: "Ada dua metode populer: <b>Avalanche</b> (fokus melunasi utang dengan bunga tertinggi dulu untuk hemat uang) dan <b>Snowball</b> (fokus melunasi utang dengan saldo terkecil dulu untuk motivasi psikologis). Apapun metodenya, kuncinya adalah membayar lebih dari minimum.",
                sectionHeader3: "Tips Bebas Utang",
                content3: "Langkah praktis yang bisa Anda lakukan sekarang:",
                tip1: "<b>Stop Penggunaan Baru:</b> Jangan gunakan kartu kredit tersebut sampai utang lunas.",
                tip2: "<b>Negosiasi Bunga:</b> Hubungi bank untuk meminta keringanan bunga atau program cicilan tetap (reschedule) jika Anda kesulitan.",
                tip3: "<b>Transfer Balance:</b> Cari kartu lain yang menawarkan bunga 0% untuk transfer saldo, tapi perhatikan biaya adminnya.",
                sectionHeader4: "Disclaimer",
                content4: "Kalkulator ini mengasumsikan bunga dihitung secara efektif/compounding bulanan dan tidak ada penggunaan baru pada kartu kredit selama masa pelunasan. Hasil perhitungan adalah estimasi dan mungkin berbeda sedikit dengan tagihan bank karena perbedaan metode hari bunga atau biaya tambahan (denda/admin).",

                // Footer
                linkPrivacy: "Kebijakan Privasi",
                linkTerms: "Ketentuan Layanan",
                linkAbout: "Tentang Kami",
                linkContact: "Hubungi Kami",
                footerCopyright: "&copy; 2025 Digital Tools ID. Semua hak dilindungi. Dikembangkan oleh DTID Analytics."
            },
            en: {
                appTitle: "Credit Card Payoff Calculator",
                headerTitle: "Credit Card Payoff Calculator",
                toolSubtitle: "Stuck with minimum payments? This tool helps you create a payoff plan. Enter your credit card balance and interest rate to see how long it will take to become debt-free with a fixed monthly payment, or calculate exactly how much you need to pay monthly to reach your goal date.",
                backToCatalogText: "Back to Tools Catalog",
                // Input
                headerDetails: "1. Credit Card Details",
                labelCardBalance: "Outstanding Balance",
                descCardBalance: "The total amount you owe on your credit card.",
                labelInterestRate: "Annual Interest Rate (%)",
                descInterestRate: "Typically 20% - 25% per year (APR).",
                
                headerStrategy: "2. Payment Strategy",
                labelCalcMode: "I want to calculate...",
                optTime: "How long will it take to pay off? (Fixed Payment)",
                optPayment: "How much should I pay monthly? (Target Time)",
                labelMonthlyPayment: "Fixed Monthly Payment",
                descMonthlyPayment: "The amount you can consistently pay each month.",
                labelMonthsGoal: "Desired Payoff Time (Months)",
                descMonthsGoal: "In how many months do you want to be debt-free?",
                
                calculateButton: "Calculate Payoff",
                inputError: "Please enter valid numeric values.",
                warningMinPay: "<b>Warning:</b> Your monthly payment is too low. It covers less than the accruing interest. You will never pay off this debt and the balance will keep growing.",
                
                // Result
                resultHeader: "Payoff Plan Result",
                labelMainResultTime: "You will be debt-free in:",
                labelMainResultPay: "You need to pay monthly:",
                
                headerInterpretation: "Financial Impact",
                interpTime: "By paying <b>[PAYMENT]</b> each month, you will clear your <b>[BALANCE]</b> balance in <b>[MONTHS] months</b> ([YEARS] years).",
                interpPay: "To clear your <b>[BALANCE]</b> balance in <b>[MONTHS] months</b>, you must set aside <b>[PAYMENT]</b> each month.",
                interpInterest: "Watch out! The total interest you pay amounts to <b>[PERCENT]%</b> of your original debt. The longer you delay, the more money you lose to interest.",
                
                detailHeader: "Total Cost Breakdown",
                labelPrincipal: "Principal Balance",
                labelTotalInterest: "Total Interest Paid",
                labelTotalPaid: "Total Amount Paid",
                
                // Edukasi
                sectionHeader1: "The Trap of Minimum Payments",
                content1: "Banks typically set minimum payments at 5% - 10% of the balance. Paying only the minimum is the most expensive way to use a credit card. Most of your money goes toward interest, while the principal reduces very slowly, keeping you in debt for years.",
                sectionHeader2: "Payoff Strategies",
                content2: "There are two popular methods: <b>Avalanche</b> (focus on paying off highest interest debt first to save money) and <b>Snowball</b> (focus on paying off smallest balance first for psychological wins). Whichever method you choose, the key is to pay more than the minimum.",
                sectionHeader3: "Tips to Get Out of Debt",
                content3: "Practical steps you can take now:",
                tip1: "<b>Stop New Charges:</b> Do not use the card for new purchases until the debt is cleared.",
                tip2: "<b>Negotiate Rates:</b> Contact your bank to ask for a lower interest rate or a fixed installment plan if you are struggling.",
                tip3: "<b>Balance Transfer:</b> Look for cards offering 0% interest on balance transfers, but be mindful of transfer fees.",
                sectionHeader4: "Disclaimer",
                content4: "This calculator assumes interest is compounded monthly and that no new charges are made on the card during the payoff period. Results are estimates and may differ slightly from bank statements due to differences in daily interest calculations or additional fees.",

                // Footer
                linkPrivacy: "Privacy Policy",
                linkTerms: "Terms of Service",
                linkAbout: "About Us",
                linkContact: "Contact Us",
                footerCopyright: "&copy; 2025 Digital Tools ID. All rights reserved. Developed by DTID Analytics."
            }
        };

        let currentLang = 'en'; // Default language

        function formatNumber(amount, decimalPlaces = 0) {
            const locale = currentLang === 'id' ? 'id-ID' : 'en-US';
            return new Intl.NumberFormat(locale, {
                minimumFractionDigits: decimalPlaces,
                maximumFractionDigits: decimalPlaces,
            }).format(amount);
        }

        function formatInput(inputElement) {
            let rawValue = inputElement.value.replace(/\D/g, ''); 
            if (rawValue) {
                const numericValue = parseInt(rawValue, 10);
                inputElement.value = formatNumber(numericValue);
            } else {
                inputElement.value = ''; 
            }
        }
        
        function cleanInput(formattedValue) {
            return parseFloat(formattedValue.replace(/\D/g, '')) || 0;
        }

        function toggleInputMode() {
            const mode = document.getElementById('calcMode').value;
            const t = translations[currentLang];
            
            if (mode === 'time') {
                document.getElementById('inputMonthlyPaymentBox').classList.remove('hidden');
                document.getElementById('inputMonthsBox').classList.add('hidden');
            } else {
                document.getElementById('inputMonthlyPaymentBox').classList.add('hidden');
                document.getElementById('inputMonthsBox').classList.remove('hidden');
            }
            // Hide results on mode change
            document.getElementById('resultBox').classList.remove('visible');
            document.getElementById('minPaymentWarning').classList.add('hidden');
        }

        function calculatePayoff(event) {
            event.preventDefault();

            const mode = document.getElementById('calcMode').value;
            const balance = cleanInput(document.getElementById('cardBalance').value);
            const annualRate = parseFloat(document.getElementById('interestRate').value) / 100;
            const monthlyRate = annualRate / 12;
            
            const errorAlert = document.getElementById('errorAlert');
            const warningBox = document.getElementById('minPaymentWarning');
            const resultBox = document.getElementById('resultBox');
            const t = translations[currentLang];

            // Validation
            if (balance <= 0 || annualRate < 0) {
                errorAlert.classList.remove('hidden');
                document.getElementById('errorText').textContent = t.inputError;
                resultBox.classList.remove('visible');
                return;
            }
            errorAlert.classList.add('hidden');
            warningBox.classList.add('hidden');

            let months = 0;
            let monthlyPayment = 0;
            let totalInterest = 0;
            let totalPaid = 0;

            if (mode === 'time') {
                monthlyPayment = cleanInput(document.getElementById('monthlyPayment').value);
                
                // Cek jika pembayaran cukup menutupi bunga bulanan pertama
                const firstMonthInterest = balance * monthlyRate;
                if (monthlyPayment <= firstMonthInterest) {
                    warningBox.classList.remove('hidden');
                    document.getElementById('warningText').innerHTML = t.warningMinPay;
                    resultBox.classList.remove('visible');
                    return;
                }

                // Rumus N = -log(1 - (i * B) / P) / log(1 + i)
                // i = monthly rate, B = balance, P = payment
                const numerator = -Math.log(1 - (monthlyRate * balance) / monthlyPayment);
                const denominator = Math.log(1 + monthlyRate);
                months = Math.ceil(numerator / denominator);
                
                // Recalculate exact totals based on integer months
                // Simple iteration for accuracy with rounding
                let tempBalance = balance;
                totalPaid = 0;
                for(let i=0; i<months; i++){
                    let interest = tempBalance * monthlyRate;
                    let principal = monthlyPayment - interest;
                    if (tempBalance < principal) {
                        // Last month adjustment
                        monthlyPayment = tempBalance + interest;
                        principal = tempBalance;
                    }
                    totalPaid += monthlyPayment;
                    tempBalance -= principal;
                }
                totalInterest = totalPaid - balance;

                // Set Result Label
                document.getElementById('labelMainResult').textContent = t.labelMainResultTime;
                document.getElementById('resultMain').textContent = `${months} ${currentLang==='id'?'Bulan':'Months'}`;

            } else {
                months = parseInt(document.getElementById('monthsGoal').value);
                if (months <= 0) {
                    errorAlert.classList.remove('hidden');
                    document.getElementById('errorText').textContent = t.inputError;
                    return;
                }
                
                // Rumus P = (i * B) / (1 - (1 + i)^-N)
                monthlyPayment = (monthlyRate * balance) / (1 - Math.pow(1 + monthlyRate, -months));
                
                totalPaid = monthlyPayment * months;
                totalInterest = totalPaid - balance;

                // Set Result Label
                document.getElementById('labelMainResult').textContent = t.labelMainResultPay;
                document.getElementById('resultMain').textContent = formatNumber(Math.ceil(monthlyPayment));
            }

            // Common Results Display
            const years = (months / 12).toFixed(1);
            const interestPercent = ((totalInterest / balance) * 100).toFixed(0);
            
            // Interpretation String Replace
            let interpText = "";
            if (mode === 'time') {
                 interpText = t.interpTime
                    .replace('[PAYMENT]', formatNumber(Math.ceil(monthlyPayment)))
                    .replace('[BALANCE]', formatNumber(balance))
                    .replace('[MONTHS]', months)
                    .replace('[YEARS]', years);
            } else {
                 interpText = t.interpPay
                    .replace('[PAYMENT]', formatNumber(Math.ceil(monthlyPayment)))
                    .replace('[BALANCE]', formatNumber(balance))
                    .replace('[MONTHS]', months);
            }
            interpText += "<br><br>" + t.interpInterest.replace('[PERCENT]', interestPercent);
            
            document.getElementById('textInterpretation').innerHTML = interpText;
            
            // Breakdown
            document.getElementById('valPrincipal').textContent = formatNumber(balance);
            document.getElementById('valTotalInterest').textContent = formatNumber(Math.round(totalInterest));
            document.getElementById('valTotalPaid').textContent = formatNumber(Math.round(totalPaid));

            resultBox.classList.add('visible');
        }

        function setLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            
            const switcher = document.getElementById('languageSwitcher');
            switcher.classList.remove('lang-en', 'lang-id');
            switcher.classList.add(`lang-${lang}`);

            // Save inputs
            const balVal = document.getElementById('cardBalance').value;
            const payVal = document.getElementById('monthlyPayment').value;

            // Texts
            document.getElementById('appTitle').textContent = t.appTitle;
            document.getElementById('headerTitle').textContent = t.headerTitle;
            document.getElementById('toolSubtitle').innerHTML = t.toolSubtitle;
            document.getElementById('backToCatalogText').textContent = t.backToCatalogText;
            
            document.getElementById('headerDetails').textContent = t.headerDetails;
            document.getElementById('labelCardBalance').textContent = t.labelCardBalance;
            document.getElementById('descCardBalance').textContent = t.descCardBalance;
            document.getElementById('labelInterestRate').textContent = t.labelInterestRate;
            document.getElementById('descInterestRate').textContent = t.descInterestRate;
            
            document.getElementById('headerStrategy').textContent = t.headerStrategy;
            document.getElementById('labelCalcMode').textContent = t.labelCalcMode;
            document.getElementById('labelMonthlyPayment').textContent = t.labelMonthlyPayment;
            document.getElementById('descMonthlyPayment').textContent = t.descMonthlyPayment;
            document.getElementById('labelMonthsGoal').textContent = t.labelMonthsGoal;
            document.getElementById('descMonthsGoal').textContent = t.descMonthsGoal;
            
            // Select options text update manually
            const select = document.getElementById('calcMode');
            select.options[0].text = t.optTime;
            select.options[1].text = t.optPayment;

            document.getElementById('calculateButton').textContent = t.calculateButton;
            
            // Inputs reformat
            document.getElementById('cardBalance').value = formatNumber(cleanInput(balVal));
            document.getElementById('monthlyPayment').value = formatNumber(cleanInput(payVal));

            // Results
            document.getElementById('resultHeader').textContent = t.resultHeader;
            // Main label depends on state, re-run calc if visible
            document.getElementById('headerInterpretation').textContent = t.headerInterpretation;
            document.getElementById('detailHeader').textContent = t.detailHeader;
            document.getElementById('labelPrincipal').textContent = t.labelPrincipal;
            document.getElementById('labelTotalInterest').textContent = t.labelTotalInterest;
            document.getElementById('labelTotalPaid').textContent = t.labelTotalPaid;

            // Edukasi
            document.getElementById('sectionHeader1').textContent = t.sectionHeader1;
            document.getElementById('content1').innerHTML = t.content1;
            document.getElementById('sectionHeader2').textContent = t.sectionHeader2;
            document.getElementById('content2').innerHTML = t.content2;
            document.getElementById('sectionHeader3').textContent = t.sectionHeader3;
            document.getElementById('content3').textContent = t.content3;
            document.getElementById('tip1').innerHTML = t.tip1;
            document.getElementById('tip2').innerHTML = t.tip2;
            document.getElementById('tip3').innerHTML = t.tip3;
            document.getElementById('sectionHeader4').textContent = t.sectionHeader4;
            document.getElementById('content4').textContent = t.content4;
            
            // Footer
            document.getElementById('linkPrivacy').textContent = t.linkPrivacy;
            document.getElementById('linkTerms').textContent = t.linkTerms;
            document.getElementById('linkAbout').textContent = t.linkAbout;
            document.getElementById('linkContact').textContent = t.linkContact;
            document.getElementById('footerCopyright').innerHTML = t.footerCopyright;
            
            if(document.getElementById('resultBox').classList.contains('visible')){
                calculatePayoff({preventDefault:()=>{}});
            }
        }

        document.getElementById('languageSwitcher').addEventListener('click', (event) => {
            if (event.target.tagName === 'BUTTON') {
                const newLang = event.target.id === 'lang-en' ? 'en' : 'id';
                if (newLang !== currentLang) setLanguage(newLang);
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            let defaultLang = 'en'; 
            const browserLang = (navigator.language || navigator.userLanguage).toLowerCase();
            if (browserLang.startsWith('id')) defaultLang = 'id';
            setLanguage(defaultLang); 
            toggleInputMode(); // Set initial visibility
        });
    </script>
</body>
</html>